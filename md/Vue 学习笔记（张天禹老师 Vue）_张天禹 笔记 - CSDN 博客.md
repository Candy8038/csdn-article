> æœ¬æ–‡ç”± [ç®€æ‚¦ SimpRead](http://ksria.com/simpread/) è½¬ç ï¼Œ åŸæ–‡åœ°å€ [blog.csdn.net](https://blog.csdn.net/qq_52940883/article/details/130372285)

#### æ–‡ç« ç›®å½•

*   [1 Vue åŸºç¡€](#1_Vue__1)
*   *   [1.1 ä»‹ç» Vue](#11__Vue_3)
    *   [1.2 Vue çš„å®‰è£…](#12_Vue__21)
    *   [1.3 Hello å°æ¡ˆä¾‹](#13_Hello__66)
    *   [1.3 Hello æ¡ˆä¾‹åˆ†æ](#13_Hello__99)
    *   [1.4 æ¨¡æ¿è¯­æ³•](#14__167)
    *   [1.5 æ•°æ®ç»‘å®š](#15__213)
    *   [1.6 el å’Œ data ä¸¤ç§å†™æ³•](#16_el__data__243)
    *   [1.7 MVVM æ¨¡å‹](#17_MVVM__316)
    *   [1.8 Object.defineProperty](#18_ObjectdefineProperty_328)
    *   [1.9 æ•°æ®ä»£ç†](#19__379)
    *   [1.10 Vue é‡Œé¢çš„æ•°æ®ä»£ç†](#110_Vue__401)
    *   [1.11 Vue çš„å‘½åè§„èŒƒ](#111_Vue__437)
*   [2 Vue ä¸­çš„äº‹ä»¶](#2_Vue__469)
*   *   [2.1 äº‹ä»¶å¤„ç†](#21__471)
    *   [2.2 äº‹ä»¶ä¿®é¥°ç¬¦](#22__532)
    *   [2.3 é”®ç›˜äº‹ä»¶](#23__605)
    *   [2.4 äº‹ä»¶æ€»ç»“](#24__661)
    *   [2.5 å§“åæ¡ˆä¾‹](#25__668)
    *   [2.6 è®¡ç®—å±æ€§](#26__703)
    *   [2.7 ä¾¦å¬å±æ€§](#27__772)
    *   *   [2.7.1 æ·±åº¦ä¾¦å¬](#271__840)
        *   [2.7.2 ä¾¦å¬çš„ç®€å†™å½¢å¼](#272__892)
        *   [2.7.3 ä¾¦å¬å±æ€§å’Œè®¡ç®—å±æ€§çš„å¯¹æ¯”](#273__922)
*   [3 ç»‘å®šæ ·å¼ä¸æ¸²æŸ“](#3__930)
*   *   [3.1 ç»‘å®š class æ ·å¼](#31__class_932)
    *   [3.2 ç»‘å®š style æ ·å¼](#32__style__1001)
    *   [3.3 æ¡ä»¶æ¸²æŸ“](#33__1033)
    *   [3.4 åˆ—è¡¨æ¸²æŸ“](#34__1077)
    *   *   [3.4.1 key ä½œç”¨ä¸åŸç†](#341_key__1169)
        *   [3.4.2 åˆ—è¡¨è¿‡æ»¤](#342__1247)
        *   [3.4.3 åˆ—è¡¨æ’åº](#343__1303)
    *   [3.5 Vue æ£€æµ‹æ•°æ®å‘ç”Ÿæ”¹å˜çš„åŸç†](#35_Vue__1332)
    *   [3.6 æ”¶é›†è¡¨å•æ•°æ®](#36__1463)
    *   [3.7 è¿‡æ»¤å™¨](#37__1486)
*   [4 å†…ç½®æŒ‡ä»¤å’Œè‡ªå®šä¹‰æŒ‡ä»¤](#4__1583)
*   *   [4.1 v-text](#41_vtext_1585)
    *   [4.2 v-html](#42_vhtml_1623)
    *   [4.3 v-cloak](#43_vcloak_1673)
    *   [4.4 v-once æŒ‡ä»¤](#44_vonce__1706)
    *   [4.5 v-pre](#45_vpre_1736)
    *   [4.6 è‡ªå®šä¹‰æŒ‡ä»¤](#46__1742)
    *   [4.7 è‡ªå®šä¹‰æŒ‡ä»¤è¯¯åŒº](#47__1803)
*   [5 * ç”Ÿå‘½å‘¨æœŸ](#5__1832)
*   *   [5.1 mounted](#51_mounted_1834)
    *   [5.2 æŒ‚è½½æµç¨‹](#52__1876)
    *   [5.3 æ›´æ–°æµç¨‹](#53__1953)
    *   [5.4 é”€æ¯æµç¨‹](#54__1965)
    *   [5.4 ç”Ÿå‘½å‘¨æœŸæ€»ç»“](#54__1977)
*   [6 ç»„ä»¶](#6__2040)
*   *   [6.1 æ¨¡å—ä¸ç»„ä»¶ã€æ¨¡å—åŒ–ä¸ç»„ä»¶åŒ–](#61__2042)
    *   [6.2 éå•æ–‡ä»¶ç»„ä»¶](#62__2064)
    *   [6.3 ç»„ä»¶çš„æ³¨æ„ç‚¹](#63__2175)
    *   [6.4 ç»„ä»¶çš„åµŒå¥—](#64__2203)
    *   [6.5 VueComponent](#65_VueComponent_2286)
    *   [6.6 vm å’Œ vc ä¹‹é—´çš„å…³ç³»](#66_vm__vc__2301)
    *   [6.7 å•æ–‡ä»¶ç»„ä»¶](#67__2315)
*   [7 è„šæ‰‹æ¶](#7__2331)
*   *   [7.1 å®‰è£…è„šæ‰‹æ¶](#71__2347)
    *   [7.2 åˆ†æè„šæ‰‹æ¶](#72__2438)
    *   *   [7.2.1 å°è¯•ç‰›åˆ€ â€”â€” ç»„ä»¶ç»ƒä¹ ](#721____2506)
    *   [7.3 render å‡½æ•°](#73_render__2645)
    *   [7.4 ä¿®æ”¹é»˜è®¤é…ç½®](#74__2728)
    *   [7.5 ref](#75_ref_2794)
    *   [7.6 props é…ç½®](#76_props__2840)
    *   [7.7 mixin æ··å…¥](#77_mixin__3018)
    *   [7.8 æ’ä»¶](#78__3151)
    *   [7.9 scoped æ ·å¼](#79_scoped__3248)
*   [8 TodoList æ¡ˆä¾‹](#8_TodoList__3299)
*   *   [8.1 åˆå§‹åŒ–åˆ—è¡¨](#81__3332)
    *   [8.2 æ·»åŠ åˆ—è¡¨](#82__3401)
    *   [8.3 å‹¾é€‰æ“ä½œ](#83__3526)
    *   [8.4 åˆ é™¤æ“ä½œ](#84__3650)
    *   [8.5 åº•éƒ¨çŠ¶æ€æ äº¤äº’](#85__3662)
    *   [8.6 ä»£ç æ±‡æ€»](#86__3682)
*   [9 æµè§ˆå™¨çš„æœ¬åœ°å­˜å‚¨](#9__4036)
*   *   [9.1 localStorage](#91_localStorage_4058)
    *   [9.2 å°† todoList æ¡ˆä¾‹è®¾ç½®ä¸ºæœ¬åœ°å­˜å‚¨](#92__todoList__4121)
*   [10 ç»„ä»¶è‡ªå®šä¹‰äº‹ä»¶](#10__4143)
*   *   [10.1 ç»‘å®šè‡ªå®šä¹‰äº‹ä»¶](#101__4145)
    *   [10.2 è§£ç»‘è‡ªå®šä¹‰äº‹ä»¶](#102__4217)
    *   *   *   *   [è§£ç»‘å•ä¸ªè‡ªå®šä¹‰äº‹ä»¶](#_4219)
    *   [10.3 è‡ªå®šä¹‰äº‹ä»¶çš„æ€»ç»“](#103__4258)
*   [11 å…¨å±€ç»„ä»¶ä¹‹é—´çš„é€šä¿¡](#11__4267)
*   *   [11.1 * å…¨å±€äº‹ä»¶æ€»çº¿ (GlobalEventBus)](#111_GlobalEventBus_4269)
    *   [11.2 æ¶ˆæ¯è®¢é˜…ä¸å‘å¸ƒ](#112__4382)
*   [12 vue ç‰¹æ•ˆ](#12_vue__4437)
*   *   [12.1 `$nextTick`](#121_nextTick_4439)
    *   [12.2 åŠ¨ç”»æ•ˆæœ](#122__4454)
    *   *   [12.2.1 keyframes å®ç°](#1221_keyframes__4456)
        *   [12.2.2 transition å®ç°](#1222_transition__4556)
        *   [12.2.3 å¤šä¸ªå…ƒç´ è¿‡æ¸¡](#1223__4626)
        *   [12.2.4 é›†æˆç¬¬ä¸‰æ–¹åŠ¨ç”»](#1224__4649)
*   [13 Vue è¿›é˜¶](#13_Vue__4732)
*   *   [13.1 é…ç½®ä»£ç†](#131__4734)
    *   *   [13.1.1 æ–¹å¼ 1](#1311_1_4736)
        *   [13.1.2 æ–¹å¼ 2](#1312_2_4847)
    *   [13.2 github ç”¨æˆ·æœç´¢æ¡ˆä¾‹](#132_github__4911)
    *   [13.3 vue-resource](#133_vueresource_5069)
    *   [13.4 æ’æ§½](#134__5116)
    *   *   [13.4.1 é»˜è®¤æ’æ§½](#1341__5126)
        *   [13.4.2 å…·åæ’æ§½](#1342__5148)
        *   [13.4.3 ä½œç”¨åŸŸæ’æ§½](#1343__5189)
*   [14 Vuex](#14_Vuex_5259)
*   *   [14.1 Vuex ä»‹ç»](#141_Vuex__5261)
    *   [14.2 æ±‚å’Œæ¡ˆä¾‹](#142__5286)
    *   [14.3 Vuex çš„å·¥ä½œåŸç†](#143_Vuex__5348)
    *   [14.4 æ­å»º Vuex çš„å¼€å‘ç¯å¢ƒ](#144__Vuex__5371)
    *   [14.5 æ±‚å’Œæ¡ˆä¾‹çš„ vuex ç‰ˆæœ¬](#145__vuex__5439)
    *   [14.6 Vuex å¼€å‘è€…å·¥å…·çš„ä½¿ç”¨](#146_Vuex__5554)
    *   [14.7 getters é…ç½®é¡¹](#147_getters__5566)
    *   [14.8 mapState å’Œ mapGetters](#148_mapState__mapGetters_5604)
    *   [14.9 mapActions å’Œ mapMutations](#149_mapActions__mapMutations_5694)
    *   [14.10 å¤šç»„ä»¶å…±äº«æ•°æ®](#1410__5821)
    *   [14.11 vuex çš„æ¨¡å—åŒ–ç¼–ç ](#1411_vuex__5827)
*   [15 è·¯ç”±](#15__5833)
*   *   [15.1 è·¯ç”±çš„ç®€ä»‹](#151__5835)
    *   [15.2 è·¯ç”±çš„ç†è§£](#152__5855)
    *   [15.3 è·¯ç”±çš„åŸºæœ¬ä½¿ç”¨](#153__5873)
    *   [15.4 åµŒå¥—è·¯ç”±](#154__6045)
    *   [15.5 è·¯ç”±ä¼ å‚](#155__6087)
    *   [15.6 å‘½åè·¯ç”±](#156__6114)
    *   [15.7 è·¯ç”±çš„ params å‚æ•°](#157__params__6169)
    *   [15.8 è·¯ç”±çš„ props é…ç½®](#158__props__6213)
    *   [15.9 router-link çš„ replace å±æ€§](#159_routerlink__replace__6242)
    *   [15.10 ç¼–ç¨‹å¼è·¯ç”±å¯¼èˆª](#1510__6260)
    *   [15.11 ç¼“å­˜è·¯ç”±ç»„ä»¶](#1511__6310)
    *   [15.12 ä¸¤ä¸ªæ–°çš„ç”Ÿå‘½å‘¨æœŸé’©å­](#1512__6330)
    *   [15.13 è·¯ç”±å®ˆå«](#1513__6341)
    *   *   [15.13.1 å…¨å±€å®ˆå«](#15131__6353)
        *   [15.13.2 ç‹¬äº«è·¯ç”±å®ˆå«](#15132__6428)
        *   [15.13.3 ç»„ä»¶å†…è·¯ç”±å®ˆå«](#15133__6454)
    *   [15.14 history å’Œ hash æ¨¡å¼](#1514_history__hash__6472)
    *   [15.15 é‡å®šå‘](#1515__6603)
*   [16 Vue UI ç»„ä»¶åº“](#16_Vue_UI__6609)
*   *   [16.1 Element å®Œæ•´å¼•å…¥](#161_Element__6641)
    *   [16.2 æŒ‰éœ€å¼•å…¥](#162__6660)
*   [17 Vue3 å¼•å…¥](#17_Vue3__6711)
*   *   [17.1 Vue3 ç®€ä»‹](#171_Vue3_6715)
    *   [17.2 Vue3 å¸¦æ¥äº†ä»€ä¹ˆ](#172_Vue3_6725)
    *   *   [1. æ€§èƒ½çš„æå‡](#1_6727)
        *   [2. æºç çš„å‡çº§](#2_6737)
        *   [3. æ‹¥æŠ± TypeScript](#3TypeScript_6745)
        *   [4. æ–°çš„ç‰¹æ€§](#4_6749)
    *   [17.3 åˆ›å»º Vue3.0 å·¥ç¨‹](#173__Vue30__6771)
    *   *   [17.3.1 ä½¿ç”¨ vue-cli åˆ›å»º](#1731__vuecli__6773)
        *   [17.3.2 ä½¿ç”¨ vite åˆ›å»º](#1732__vite__6795)
    *   [17.4 åˆ†æå·¥ç¨‹ç»“æ„](#174__6846)
    *   [17.5 Vue3 å¼€å‘è€…å·¥å…·çš„å®‰è£…](#175_Vue3__6874)
*   [18 Vue3 å¸¸ç”¨ Composition API](#18_Vue3__Composition_API_6892)
*   *   [18.1 åˆè¯† setup](#181__setup_6896)
    *   [18.2 ref å‡½æ•°](#182_ref__7018)
    *   [18.3 reactive å‡½æ•°](#183_reactive__7094)
    *   [18.4 Vue3 ä¸­çš„å“åº”å¼åŸç†](#184_Vue3__7113)
    *   *   [18.4.1 å›é¡¾ Vue2 çš„å“åº”å¼åŸç†](#1841__Vue2__7115)
        *   [18.4.2 ä»‹ç» Vue3 çš„å“åº”å¼åŸç†](#1842__Vue3__7191)
    *   [18.5 ref å’Œ reactive å¯¹æ¯”](#185_ref__reactive__7307)
    *   [18.6 setup ç›¸å…³æ³¨æ„ç‚¹](#186_setup__7322)
    *   [18.7 è®¡ç®—å±æ€§ä¸ç›‘è§†å±æ€§](#187__7470)
    *   *   [18.7.1 computed å‡½æ•°](#1871_computed__7472)
        *   [18.7.2 watch ç›‘è§†å±æ€§](#1872_watch__7503)
        *   [18.7.3 watchEffect å‡½æ•°](#1873_watchEffect__7680)
    *   [18.8 Vue3 ç”Ÿå‘½å‘¨æœŸ](#188_Vue3_7703)
    *   [18.10 è‡ªå®šä¹‰ hook](#1810__hook_7726)
    *   [18.11 toRef ä¸ toRefs](#1811_toRef__toRefs_7810)
*   [19 Vue3 ä¸­å…¶ä»–çš„ Composition API](#19_Vue3__Composition_API_7908)
*   *   [19.1 shallowReactive ä¸ shallowRef](#191_shallowReactive__shallowRef_7912)
    *   [19.2 readonly å’Œ shalldowReadonly](#192_readonly__shalldowReadonly_7922)
    *   [19.3 toRaw ä¸ markRaw](#193_toRaw__markRaw_7930)
    *   [19.4 customRef](#194_customRef_7943)
    *   [19.5 provide å’Œ inject](#195_provide__inject_7992)
    *   [19.5 å“åº”å¼æ•°æ®çš„åˆ¤æ–­](#195__8030)
*   [20 Composition API çš„ä¼˜åŠ¿](#20_Composition_API__8039)
*   *   [20.1 Options API å­˜åœ¨çš„é—®é¢˜](#201_Options_API__8041)
    *   [20.2 Composition API çš„ä¼˜åŠ¿](#202_Composition_API__8069)
*   [21 æ–°çš„ç»„ä»¶](#21__8093)
*   *   [21.1 Fragment](#211_Fragment_8095)
    *   [21.2 Teleport](#212_Teleport_8103)
    *   [21.3 Suspense](#213_Suspense_8124)
*   [22 Vue3 ä¸­å…¶ä»–çš„æ”¹å˜](#22_Vue3__8130)
*   *   [22.1 å…¨å±€ API çš„è½¬ç§»](#221_API_8132)
    *   [22.2 å…¶ä»–æ”¹å˜](#222__8167)

1 Vue åŸºç¡€
--------

### 1.1 ä»‹ç» Vue

Vue æ˜¯ä¸€ä¸ªæ¸è¿›å¼çš„æ¡†æ¶

**ç‰¹ç‚¹ï¼š**

1.  é‡‡å–**ç»„ä»¶åŒ–**æ¨¡å¼ï¼Œæé«˜ä»£ç å¤ç”¨ç‡ã€ä¸”è®©ä»£ç æ›´å¥½ç»´æŠ¤
    
    ![](https://i-blog.csdnimg.cn/blog_migrate/e59924ffb8b81d0bcb01cd7b2bc2d37d.png)
2.  **å£°æ˜å¼**ç¼–ç ï¼Œè®©ç¼–ç äººå‘˜æ— éœ€ç›´æ¥æ“ä½œ DOM ï¼Œæé«˜å¼€å‘æ•ˆç‡
    
    ![](https://i-blog.csdnimg.cn/blog_migrate/474f2bdf78382a8b1c0d416b6d65404f.png)
3.  é‡‡ç”¨**è™šæ‹Ÿ DOM + ä¼˜ç§€çš„ Diff ç®—æ³•**ï¼Œå°½é‡å¤ç”¨ DOM èŠ‚ç‚¹
    
    ![](https://i-blog.csdnimg.cn/blog_migrate/5a782e1aa6ea041d8bb27138cd9db6e3.png)

### 1.2 Vue çš„å®‰è£…

å®‰è£…æ–¹æ³•ï¼š

1.  CDN å¼•å…¥
    
    ```
    <!-- å¼€å‘ç¯å¢ƒç‰ˆæœ¬ï¼ŒåŒ…å«äº†æœ‰å¸®åŠ©çš„å‘½ä»¤è¡Œè­¦å‘Š -->
    <script src="https://cdn.jsdelivr.net/npm/vue@2/dist/vue.js"></script>
    
    <!-- ç”Ÿäº§ç¯å¢ƒç‰ˆæœ¬ï¼Œä¼˜åŒ–äº†å°ºå¯¸å’Œé€Ÿåº¦ -->
    <script src="https://cdn.jsdelivr.net/npm/vue@2"></script>
    
    ```
    
2.  ä¸‹è½½å’Œå¼•å…¥
    
    *   å¼€å‘ç‰ˆæœ¬ï¼š[ä¼ é€å…¥å£](https://v2.cn.vuejs.org/js/vue.js)
        
    *   ç”Ÿäº§ç‰ˆæœ¬ï¼š[ä¼ é€å…¥å£](https://v2.cn.vuejs.org/js/vue.min.js)
        
3.  npm å®‰è£…
    
    *   åç»­é€šè¿‡ webpack å’Œ CLIï¼ˆå‘½ä»¤è¡Œç•Œé¢ï¼Œcommand-line interfaceï¼‰ï¼Œæˆ‘ä»¬ä½¿ç”¨è¯¥æ–¹å¼

æˆ‘ä»¬åœ¨å®‰è£…å®Œ vue æ¡†æ¶ä¹‹åï¼Œæµè§ˆå™¨ä¼šæ˜¾ç¤ºä»¥ä¸‹æç¤ºä¿¡æ¯ï¼š

![](https://i-blog.csdnimg.cn/blog_migrate/a9baef429f2fe4b7a56d003420a326d0.png)

*   ç¬¬ä¸€æ¡æç¤ºä¿¡æ¯å°±æ˜¯æµè§ˆå™¨æç¤ºæˆ‘ä»¬è¦ä¸‹è½½ä¸€ä¸ª Vue å¼€å‘å·¥å…·æ‰©å±•ä»¥è·å–æ›´å¥½çš„å¼€å‘ä½“éªŒ
*   ç¬¬äºŒæ¡æç¤ºä¿¡æ¯å°±æ˜¯æµè§ˆå™¨æç¤ºæˆ‘ä»¬æ­£åœ¨ä½¿ç”¨çš„æ˜¯å¼€å‘æ¨¡å¼ï¼Œç¡®ä¿åœ¨ç”Ÿäº§æ¨¡å¼ä¸‹ï¼Œä½¿ç”¨ç”Ÿäº§æ¨¡å¼

è§£å†³æ–¹æ³•ï¼š

1.  ç¬¬ä¸€ä¸ªå°±ç›´æ¥é€šè¿‡ä¸‹è½½ Chrome æ’ä»¶ï¼šVue.js.devtools å³å¯ï¼ˆè¯¥å·¥å…·éœ€è¦åœ¨å¼€å‘æ¨¡å¼ä¸‹æ‰å¯ä»¥æ­£å¸¸ä½¿ç”¨ï¼Œç”Ÿäº§æ¨¡å¼ä¸‹æ— æ³•ä½¿ç”¨ï¼Œå¹¶ä¸”éœ€è¦ä½¿ç”¨ live server è¿™ä¸ªæ’ä»¶æ‰“å¼€ï¼‰
    
    ![](https://i-blog.csdnimg.cn/blog_migrate/d3c1df1b30f1fb6e7c1960710278ff79.png)
2.  ç¬¬äºŒä¸ªæˆ‘ä»¬ç›®å‰å¤„äºå­¦ä¹ é˜¶æ®µï¼Œä¸éœ€è¦æ›´æ¢ä¸ºç”Ÿäº§ç‰ˆæœ¬ï¼Œä½†æ˜¯æƒ³è¦å…³é—­è¿™ä¸ªæç¤ºä¿¡æ¯å°±éœ€è¦åˆ° Vue å®˜ç½‘çš„ API æ–‡æ¡£ä»‹ç»ä¸­å»æŸ¥æ‰¾ç›¸å…³é…ç½®ï¼Œ[ä¼ é€å…¥å£](https://v2.cn.vuejs.org/v2/api/#%E5%85%A8%E5%B1%80%E9%85%8D%E7%BD%AE)
    
    *   æˆ‘ä»¬é¦–å…ˆåœ¨è°ƒè¯•å·¥å…·ä¸­è¾“å…¥`Vue.config`æ¥æµ‹è¯•ï¼š
        
        ![](https://i-blog.csdnimg.cn/blog_migrate/9c0802ae9b00f11431408e7a748aae73.png)
    *   æ‰‹åŠ¨åœ¨ä»£ç ä¸­æ·»åŠ `Vue.config.productionTip = false;` å³å¯
        

### 1.3 Hello å°æ¡ˆä¾‹

æˆ‘ä»¬é¦–å…ˆé…ç½®é¡µç­¾å›¾æ ‡ï¼š

å½“æˆ‘ä»¬æŒ‰ä½ Ctrl + F5 æˆ–è€… Shift + F5 æ¥å¼ºåˆ¶åˆ·æ–°æµè§ˆå™¨é¡µé¢ä¹‹åï¼Œå°±ä¼šæ˜¾ç¤ºä¸‹é¢çš„é”™è¯¯è­¦å‘Šï¼š

![](https://i-blog.csdnimg.cn/blog_migrate/5af6db06044ad88c7bee75ee8eb24757.png)

è¯´æˆ‘ä»¬æ²¡æœ‰åœ¨æœ¬åœ° 5500 çš„ç«¯å£å·çš„å·¥ç¨‹æ–‡ä»¶ä¸‹æ‰¾åˆ° favicon.ico è¿™ä¸ªé¡µç­¾å›¾æ ‡æ–‡ä»¶ï¼Œè¿™æ—¶å€™ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥æ‰¾å¼  logo æ”¾å…¥å·¥ç¨‹æ–‡ä»¶çš„æ ¹ç›®å½•ä¸‹å³å¯ï¼Œæ³¨æ„ï¼šlogo ä¸€å®šè¦æ˜¯ ico æ ¼å¼çš„æ–‡ä»¶ï¼Œå¹¶ä¸”æ–‡ä»¶åå¿…é¡»æ˜¯ favicon ï¼ˆä¸­æ–‡åï¼šç½‘ç«™å›¾æ ‡ï¼‰

æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬æ¥å®Œæˆ Hello çš„æ¡ˆä¾‹ï¼š

```
<!-- å‡†å¤‡å¥½å®¹å™¨ -->
<div id="root">
    <h1>Hello {{name}}</h1>
</div>
<script>
    // åˆ›å»º Vue å®ä¾‹
    new Vue({
        el: '#root',    // el ç”¨äºæŒ‡å®šå½“å‰ Vue å®ä¾‹ä¸ºé‚£ä¸ªå®¹å™¨æœåŠ¡
        data: {         // data ç”¨äºå­˜å‚¨æ•°æ®ï¼Œä»¥ä¾› el æŒ‡å®šçš„å®¹å™¨ä½¿ç”¨
            name: 'Vue'
        }
    })
</script>

```

ğŸŒ¿æ€»ç»“ï¼š

1.  æƒ³è®© Vue å·¥ä½œï¼Œå°±å¿…é¡»å…ˆåˆ›å»ºä¸€ä¸ª Vue å®ä¾‹ï¼Œä¸”è¦ä¼ å…¥ä¸€ä¸ªé…ç½®å¯¹è±¡
2.  root å®¹å™¨é‡Œçš„ä»£ç è¢«ç§°ä¸º Vue æ¨¡æ¿

### 1.3 Hello æ¡ˆä¾‹åˆ†æ

```
// demo1
<!-- å‡†å¤‡å¥½å®¹å™¨ -->
<div class="root">
    <h1>Hello {{name}}</h1>
</div>
<div class="root">
    <h1>Hello {{name}}</h1>
</div>
<script>
    // æ¸…é™¤å¼€å‘æ¨¡å¼æç¤ºä¿¡æ¯
    Vue.config.productionTip = false;
    // åˆ›å»º Vue å®ä¾‹
    new Vue({
        el: '.root',    // el ç”¨äºæŒ‡å®šå½“å‰ Vue å®ä¾‹ä¸ºé‚£ä¸ªå®¹å™¨æœåŠ¡
        data: {         // data ç”¨äºå­˜å‚¨æ•°æ®ï¼Œç–æµšå…± el æŒ‡å®šçš„å®¹å™¨ä½¿ç”¨
            name: 'Vue'
        }
    })
</script>

```

æ‰§è¡Œç»“æœå¦‚ä¸‹ï¼š

![](https://i-blog.csdnimg.cn/blog_migrate/3cc260a272ef6a0fa29b4c7aab10dc90.png)

```
<!-- å‡†å¤‡å¥½å®¹å™¨ -->
<div id="root">
    <h1>Hello {{name, address}}</h1>
</div>
<script>
    // æ¸…é™¤å¼€å‘æ¨¡å¼æç¤ºä¿¡æ¯
    Vue.config.productionTip = false;
    // åˆ›å»º Vue å®ä¾‹
    new Vue({
        el: '#root',    // el ç”¨äºæŒ‡å®šå½“å‰ Vue å®ä¾‹ä¸ºå“ªä¸ªå®¹å™¨æœåŠ¡
        data: {         // data ç”¨äºå­˜å‚¨æ•°æ®ï¼Œä»¥ä¾› el æŒ‡å®šçš„å®¹å™¨ä½¿ç”¨
            name: 'Vue'
        }
    })
    // æŒ‡å®šä¸¤ä¸ª Vue å®ä¾‹æŒ‡å‘åŒä¸€ä¸ªå®¹å™¨
    new Vue({
        el: '#root',    // el ç”¨äºæŒ‡å®šå½“å‰ Vue å®ä¾‹ä¸ºé‚£ä¸ªå®¹å™¨æœåŠ¡
        data: {         // data ç”¨äºå­˜å‚¨æ•°æ®ï¼Œä»¥ä¾› el æŒ‡å®šçš„å®¹å™¨ä½¿ç”¨
            address: 'beijing'
        }
    })
</script>

```

æ‰§è¡Œç»“æœå¦‚ä¸‹ï¼š

![](https://i-blog.csdnimg.cn/blog_migrate/ba2ebbb32829d32866f2151e1ad00793.png)

æˆ‘ä»¬å¯ä»¥çœ‹åˆ°å½“æˆ‘ä»¬ä¸ºå®¹å™¨åŒæ—¶ç»‘å®šä¸¤ä¸ª Vue å®ä¾‹æ—¶ï¼Œé»˜è®¤ä½¿ç”¨å‰é¢çš„ Vue å®ä¾‹ï¼Œåé¢çš„åˆ™æ— æ³•ç”Ÿæ•ˆ

æˆ‘ä»¬æ€»ç»“ä¸€ä¸‹ï¼š

1.  Vue ä¸­å®ä¾‹å’Œå®¹å™¨æ˜¯ä¸€ä¸€å¯¹åº”çš„
2.  çœŸå®å¼€å‘ä¸­åªæœ‰ä¸€ä¸ª Vue å®ä¾‹ï¼Œå¹¶ä¸”ä¼šæ­é…ç»„ä»¶ä¸€èµ·ä½¿ç”¨
3.  `{{xxx}}`çš„æ§½ä¸­éœ€è¦å†™ JS è¡¨è¾¾å¼ï¼Œä¸”è¿™ä¸ªè¡¨è¾¾å¼å¯ä»¥è‡ªåŠ¨è¯»å–åˆ° data ä¸­çš„æ‰€æœ‰å±æ€§
4.  ä¸€æ—¦ data ä¸­çš„æ•°æ®å‘ç”Ÿæ”¹å˜ï¼Œé‚£ä¹ˆé¡µé¢ä¸­ç”¨åˆ°è¯¥æ•°æ®çš„åœ°æ–¹ä¹Ÿä¼šè‡ªåŠ¨æ›´æ–°

### 1.4 æ¨¡æ¿è¯­æ³•

HTML ä¸­åŒ…å«äº†ä¸€äº› JS è¯­æ³•ä»£ç ï¼Œè¯­æ³•åˆ†ä¸ºä¸¤ç§ï¼Œåˆ†åˆ«ä¸ºï¼š

1.  æ’å€¼è¯­æ³•ï¼ˆåŒèŠ±æ‹¬å·è¡¨è¾¾å¼ï¼‰
    *   ç”¨äºè§£ææ ‡ç­¾ä½“å†…å®¹
    *   å¯ä»¥ç›´æ¥è¯»å–åˆ° data ä¸­æ‰€æœ‰çš„å±æ€§å€¼
2.  æŒ‡ä»¤ï¼ˆä»¥ v- å¼€å¤´ï¼‰
    *   ç”¨äºè§£ææ ‡ç­¾ï¼ˆåŒ…æ‹¬ï¼šæ ‡ç­¾å±æ€§ã€æ ‡ç­¾ä½“å†…å®¹ã€ç»‘å®šäº‹ä»¶ï¼Œâ€¦ï¼‰
    *   ä¾‹å¦‚ï¼š`v-bind:href="xxx"` æˆ–è€…ç®€å†™ä¸º `:href="xxx"`

**demo**

```
<!-- å‡†å¤‡å¥½å®¹å™¨ -->
<div id="root">
    <h1>Hello {{name, address}}</h1>
    <!-- æ–¹å¼1 -->
    <a v-bind:href="url">ç™¾åº¦</a>
    <!-- æ–¹å¼2 -->
    <a :href="url">ç™¾åº¦</a>
    <a :href="school.url">å­¦æ ¡</a>
</div>
<script>
    // æ¸…é™¤å¼€å‘æ¨¡å¼æç¤ºä¿¡æ¯
    Vue.config.productionTip = false;
    // åˆ›å»º Vue å®ä¾‹
    new Vue({
        el: '#root',    
        data: {        
            name: 'Vue',
            url: 'http://www.baidu.com',
            school: {
                url: 'https://www.jxnu.edu.cn/'
            }
        }
    })
</script>

```

æ•ˆæœå›¾å¦‚ä¸‹ï¼š

![](https://i-blog.csdnimg.cn/blog_migrate/b58cecf3a71541a5f63527323522ae13.png)

### 1.5 æ•°æ®ç»‘å®š

æ•°æ®ç»‘å®šåˆ†ä¸ºä¸¤ç§ï¼Œå³ï¼š

1.  åŒå‘ç»‘å®šï¼ˆ`v-model`ï¼‰ï¼šåœ¨é¡µé¢ä¸­ï¼Œæ•°æ®ä¸ä»…èƒ½ä» data æµå‘é¡µé¢ï¼Œè¿˜å¯ä»¥ä»é¡µé¢æµå‘ data
2.  å•å‘ç»‘å®šï¼ˆ`v-bind`ï¼‰ï¼šæ•°æ®åªèƒ½ä» data æµå‘é¡µé¢

```
<div id="root">
    å•å‘æ•°æ®ç»‘å®š:<input type="text" v-bind:value="name"><br>
    åŒå‘æ•°æ®ç»‘å®š:<input type="text" v-model:value="name">
</div>

<script>
    Vue.config.productionTip = false;
    new Vue({
        el: '#root',
        data: {
            name:'å°šç¡…è°·'
        }   
    })
</script>

```

ğŸ—’å¤‡æ³¨ï¼š

*   åŒå‘ç»‘å®šä¸€èˆ¬éƒ½åº”ç”¨åœ¨è¡¨å•å…ƒç´ ä¸Šï¼ˆå¦‚ï¼šinputã€select ç­‰ï¼‰ï¼Œæ‰€ä»¥`v-model: value` å¯ä»¥ç®€å†™ä¸º `v-model`ï¼Œå› ä¸º `v-model` é»˜è®¤æ”¶é›†çš„å°±æ˜¯ `value` çš„å€¼

### 1.6 el å’Œ data ä¸¤ç§å†™æ³•

åœ¨æ¢ç©¶ä¹‹å‰ï¼Œæˆ‘ä»¬é¦–å…ˆå¯¹ Vue çš„ä»£ç ç‰‡æ®µè¿›è¡Œé…ç½®ï¼Œåšæ³•å¦‚ä¸‹ï¼š

1.  æ‰“å¼€ VS codeï¼Œæ‰¾åˆ°æ–‡ä»¶ â†’ é¦–é€‰é¡¹ â†’ é…ç½®ç”¨æˆ·ä»£ç ç‰‡æ®µ
    
2.  æ–°å»ºå…¨å±€ä»£ç ç‰‡æ®µ
    
    ![](https://i-blog.csdnimg.cn/blog_migrate/2d114d27d05210e7925d2a0a6ad81cb8.png)
3.  æ·»åŠ å¦‚ä¸‹ä»£ç 
    
    ```
    "Print to console": {
    	"prefix": "v1",
    	"body": [
    		"new Vue({",
    		"  el:'#root',",
    		"  data:{",
    		"    ",
    		"  }",
    		"})"
    	],
    	"description": "Create vue template"
    }
    
    ```
    
4.  ä¸‹æ¬¡ä½¿ç”¨çš„æ—¶å€™ï¼Œç›´æ¥ v1 + tab å³å¯å¿«é€Ÿç”Ÿæˆ
    

> *   prefix å†…å†™å¿«æ·è¾“å…¥çš„æŒ‡ä»¤
> *   body å†…å†™å…¥å¿«æ·è¾“å…¥çš„å†…å®¹
> *   description å†™å…³äºè¯¥æŒ‡ä»¤çš„æè¿°
> 
> ç”±äºè‡ªå·±æ‰‹å†™ body è¿‡äºç¹çï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥é€šè¿‡é…ç½®ç”¨æˆ·ä»£ç ç‰‡æ®µç”Ÿæˆç½‘ç«™æ¥è¿›è¡Œè®¾ç½®ï¼Œ[ç½‘å€ä¼ é€é—¨](https://snippet-generator.app/)

é…ç½®å®Œæˆä¹‹åï¼Œæˆ‘ä»¬éœ€è¦è¿›è¡Œæ¢è®¨

æˆ‘ä»¬æŒ‚è½½å®¹å™¨ï¼Œå¤„ç†å¯ä»¥åœ¨ Vue å®ä¾‹ä¸­é…ç½® elï¼Œè¿˜æœ‰ç¬¬äºŒç§å†™æ³•ï¼Œå¦‚ä¸‹ï¼šï¼ˆVue å®ä¾‹ä¸­æœ‰ä¸€ä¸ªç»§æ‰¿è¿‡æ¥çš„æŒ‚è½½æ–¹æ³•ï¼Œå³ $mountï¼‰

```
const v = new Vue({
//   el:'#root',
    data:{
    name:'å°šç¡…è°·'
    }
});
v.$mount('#root');

```

data çš„ç¬¬äºŒç§å†™æ³•ï¼šå‡½æ•°å¼

```
const v = new Vue({
    //   el:'#root',
    data() {
        return {
            name: 'å°šç¡…è°·'
        }
    }
})

```

ğŸ—’æ€»ç»“ï¼š

1.  el æœ‰ä¸¤ç§å†™æ³•ï¼š
    *   new Vue çš„æ—¶å€™é…ç½® el å±æ€§
    *   å…ˆåˆ›å»º Vue å®ä¾‹ï¼Œå†é€šè¿‡ `$mount` æŒ‚è½½
2.  data ä¹Ÿæœ‰ä¸¤ç§å†™æ³•ï¼š
    *   å¯¹è±¡å¼
    *   å‡½æ•°å¼ï¼ˆä¸è¦ä½¿ç”¨ç®­å¤´å‡½æ•°ï¼Œå’Œç»„ä»¶æ­é…ä½¿ç”¨æ—¶åªèƒ½ç”¨å‡½æ•°å¼ï¼‰

### 1.7 MVVM æ¨¡å‹

1.  Mï¼šæ¨¡å‹ Modelï¼Œå¯¹åº” data ä¸­çš„æ•°æ®
2.  Vï¼šè§†å›¾ Viewï¼Œæ¨¡æ¿
3.  VMï¼šè§†å›¾æ¨¡å‹ ViewModelï¼ŒVue å®ä¾‹å¯¹è±¡

![](https://i-blog.csdnimg.cn/blog_migrate/b95c751bee70076e66a1605ca9c2ea13.png)

VM èº«ä¸Šçš„æ‰€æœ‰å±æ€§åŠå…¶ `__proto__` ä¸Šçš„å±æ€§ï¼Œåœ¨ Vue æ¨¡æ¿ä¸­éƒ½å¯ä»¥ç›´æ¥ä½¿ç”¨

### 1.8 Object.[defineProperty](https://so.csdn.net/so/search?q=defineProperty&spm=1001.2101.3001.7020)

å¦‚ä¸‹å›¾ï¼Œæˆ‘ä»¬é€šè¿‡ defineProperty è¿™ä¸ªæ–¹æ³•æ·»åŠ çš„å±æ€§åœ¨ Chrome è°ƒè¯•å·¥å…·ä¸­ï¼Œæ˜¾ç¤ºçš„æ˜¯æµ…ç´«è‰²ï¼š

![](https://i-blog.csdnimg.cn/blog_migrate/69b7ec2016f4a3113a6e2e60d4158678.png)

è¿™æ„å‘³ç€ï¼šè¿™ä¸ªå±æ€§æ˜¯ä¸å¯æšä¸¾çš„

```
Vue.config.productionTip  = false;
let person = {
    name: 'zs',
    age: 18
}
Object.defineProperty(person, 'sex', {
    value: 'male'
})
console.log(Object.keys(person));   // keys æ–¹æ³•å°†å¯éå†çš„å±æ€§æ‹¿å‡ºæ¥æ”¾åˆ°ä¸€ä¸ªæ•°ç»„é‡Œé¢
console.log(person);

```

æ‰§è¡Œç»“æœå¦‚ä¸‹ï¼š

![](https://i-blog.csdnimg.cn/blog_migrate/de4f3934c755953b3b98cfdf6afee621.png)

åœ¨ defineProperty çš„ç¬¬ä¸‰ä¸ªå‚æ•°ä¹Ÿå«åšé…ç½®é¡¹ï¼Œé‡Œé¢å‡ºäº† value å±æ€§ä¹‹å¤–ï¼Œè¿˜æœ‰å…¶ä»–ä¸‰ä¸ªå±æ€§ï¼šenumerableã€writableã€configurable

æˆ‘ä»¬åˆ©ç”¨ defineProperty å¯ä»¥å®ç°æ•°æ®çš„åŠ¨æ€æ›´æ–°

```
Vue.config.productionTip  = false;
let number = 19;
let person = {
    name: 'zs',
    sex: 'male'
}
Object.defineProperty(person, 'age', {
    get() {
        return number;      // å½“æˆ‘ä»¬æ›´æ”¹äº† number çš„å€¼å, age çš„å€¼ä¹Ÿä¼šéšä¹‹å‘ç”Ÿæ”¹å˜
    },
    set(value) {
        number = value; 
    } 
})

```

*   get æ–¹æ³•ï¼šå½“æœ‰äººè¯»å–äº† person çš„ age å±æ€§æ—¶ï¼Œget å‡½æ•°ï¼ˆgetterï¼‰å°±ä¼šè¢«è°ƒç”¨ï¼Œä¸”è¿”å›å€¼å°±æ˜¯ age çš„å€¼
*   set æ–¹æ³•ï¼š å½“æœ‰äººä¿®æ”¹äº† person çš„ age å±æ€§æ—¶ï¼Œ set å‡½æ•°ï¼ˆsetterï¼‰å°±ä¼šè¢«è°ƒç”¨ï¼Œå°† age çš„å€¼ä¿®æ”¹ä¸ºæ›´æ”¹çš„ value å€¼

### 1.9 æ•°æ®ä»£ç†

æ•°æ®ä»£ç†ï¼šé€šè¿‡ä¸€ä¸ªå¯¹è±¡ä»£ç†å¯¹å¦ä¸€å¯¹è±¡ä¸­å±æ€§è¿›è¡Œæ“ä½œï¼ˆåŒ…æ‹¬è¯» / å†™ï¼‰

```
let obj1 = {x: 100};
let obj2 = {y: 200};

Object.defineProperty(obj2, 'x', {
    get() {
        return obj1.x;
    },
    set(value) {
        obj1.x = value;
    }
})

```

æˆ‘ä»¬åˆ©ç”¨æ•°æ®ä»£ç†ï¼Œä½¿å¾—æˆ‘ä»¬å¯ä»¥é€šè¿‡ obj2 å¯¹ obj1 ä¸­çš„å±æ€§è¿›è¡Œæ“ä½œ

### 1.10 Vue é‡Œé¢çš„æ•°æ®ä»£ç†

```
<div id="root">
    <h2>å­¦æ ¡åç§°ï¼š{{name}}</h2>
    <h2>å­¦æ ¡åœ°å€ï¼š{{address}}</h2>
</div>
<script>
    const vm = new Vue({
        el: '#root',
        data: {
            name: 'å°šç¡…è°·',
            address: 'å®ç¦ç§‘æŠ€å›­'
        }
    })
</script>

```

â—ï¸æ³¨æ„ï¼š

1.  vm é‡Œé¢çš„ data ï¼Œå¦‚æœæˆ‘ä»¬éœ€è¦è·å–åˆ™è¦ä½¿ç”¨ `vm._data`ï¼Œè€Œä¸èƒ½é€šè¿‡ `vm.data` æ¥è·å–
2.  ä½†æ˜¯å› ä¸ºæœ‰äº†æ•°æ®ä»£ç†ï¼ŒVue å°† _data ä¸­çš„æ•°æ®åœ¨ Vue å®ä¾‹ä¸­ä¹Ÿæ”¾ç½®äº†ä¸€ä»½ï¼Œæ‰€ä»¥æˆ‘ä»¬ç›´æ¥é€šè¿‡ `{{name}}` æ¥æ”¾ç½®æ•°æ®åœ¨è§†å›¾ä¸­ï¼Œè€Œä¸ç”¨å†™ `{{_data.name}}`

![](https://i-blog.csdnimg.cn/blog_migrate/173ca582a72be2d6b7314714b3b5f2bf.png)

ğŸ—’æ€»ç»“ï¼š

1.  Vue ä¸­çš„æ•°æ®ä»£ç†ï¼šé€šè¿‡ vm å¯¹è±¡æ¥ä»£ç† data å¯¹è±¡ä¸­å±æ€§çš„æ“ä½œ
2.  Vue ä¸­æ•°æ®ä»£ç†çš„å¥½å¤„ï¼šæ›´åŠ æ–¹ä¾¿åœ°æ“ä½œ data ä¸­çš„æ•°æ®
3.  åŸºæœ¬åŸç†ï¼š
    *   é€šè¿‡ `Object.defineProperty()`æŠŠ data å¯¹è±¡ä¸­æ‰€æœ‰çš„å±æ€§éƒ½æ·»åŠ åˆ° vm ä¸Š
    *   ä¸ºæ¯ä¸€ä¸ªæ·»åŠ åˆ° vm ä¸Šçš„å±æ€§ï¼Œéƒ½æŒ‡å®šä¸€ä¸ª getter / setter
    *   åœ¨ getter / setter å†…éƒ¨å»æ“ä½œï¼ˆè¯»æˆ–å†™ï¼‰ data ä¸­çš„å±æ€§

### 1.11 Vue çš„å‘½åè§„èŒƒ

è¿™é‡Œæ’å…¥ä¸€å°èŠ‚ï¼Œä¸ºäº†é¿å…ä»¥åè¿è¡Œåœ¨æœåŠ¡å™¨æ—¶ï¼Œå‡ºç°å„ç§å„æ ·çš„é”™è¯¯ï¼Œè¿™é‡Œéœ€è¦å¯¹å˜é‡ã€ç»„ä»¶åã€å‡½æ•°ã€é…ç½®é¡¹ç­‰åšå‡ºå‘½åè§„èŒƒï¼š

1.  é¡¹ç›®åï¼šé‡‡ç”¨ kebab-case å‘½åè§„èŒƒï¼Œå…¨éƒ¨ç”¨å°å†™å­—æ¯çš„å½¢å¼ï¼Œå¤šä¸ªå•è¯ä¹‹é—´ä»¥çŸ­æ¨ªçº¿åˆ†éš”
2.  ç›®å½•åï¼šé‡‡ç”¨ Snake å‘½åè§„èŒƒï¼Œå…¨éƒ¨ç”¨å°å†™å­—æ¯ï¼Œå¤šä¸ªå•è¯ä¹‹é—´ä½¿ç”¨ä¸‹åˆ’çº¿åˆ†éš”ï¼Œæœ‰å¤æ•°å½¢å¼æ—¶ï¼Œé‡‡ç”¨å¤æ•°å‘½åçš„æ–¹æ³•
3.  HTMLã€å›¾åƒ æ–‡ä»¶ï¼šSnake
4.  CSS ã€JS æ–‡ä»¶ï¼škebab-case
5.  Vue ç»„ä»¶ï¼šUpperCamelCase
6.  å‡½æ•°ã€æ–¹æ³•ï¼šlowerCammelCase

âš ï¸**æ— è®ºæ˜¯ç»„ä»¶çš„å‘½åè¿˜æ˜¯å…¶ä»–æ–‡ä»¶çš„å‘½åï¼Œéƒ½ä¸åº”è¯¥ä½¿ç”¨ HTML å·²æœ‰çš„æ ‡ç­¾æˆ–æ˜¯ JS çš„å…³é”®å­—ã€ä¿ç•™å­—è¿›è¡Œå‘½åï¼Œä¾‹å¦‚ï¼šidã€deleteã€with ç­‰ç­‰**

**Vue ä¸­æ–¹æ³•çš„ä¹¦å†™é¡ºåº**

```
- components
- props
- data
- created
- mounted
- activited
- update
- beforeRouteUpdate
- metods
- filter
- computed
- watch

```

2 Vue ä¸­çš„äº‹ä»¶
----------

### 2.1 äº‹ä»¶å¤„ç†

åœ¨ Vue å®ä¾‹ä¸­ï¼Œæœ‰ä¸€ä¸ªå±æ€§ methods ä¸“é—¨ç”¨æ¥å­˜å‚¨äº‹ä»¶æ–¹æ³•

```
<div id="root">
    <button v-on:click = "showInfo">ç‚¹å‡»æˆ‘ï¼Œå¼¹å‡ºæç¤ºä¿¡æ¯</button>
    <!-- è¿™é‡Œçš„ v-on:click æˆ‘ä»¬å¯ä»¥ç®€å†™ä¸º @click -->
</div>

<script>
    Vue.config.productionTip = false;
    new Vue({
        el:'#root',
        data:{
        
        }, 
        methods: {
        showInfo() {
            alert('åŒå­¦æ‚¨å¥½')
        }
        }
    })
</script>

```

å½“æˆ‘ä»¬ä¸€ç‚¹å‡»æŒ‰é’®ï¼Œå°±ä¼šå¼¹å‡ºå¯¹è¯æ¡†ï¼Œå½“ç„¶è¿™é‡Œçš„ showInfo æ–¹æ³•ä¸­ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥åŠ  event å‚æ•°ï¼Œå’Œ JS è¯­æ³•ä¸­ä¸€æ ·

**å¸¦å‚æ•°çš„æ–¹æ³•**

```
<div id="root">
    <button v-on:click = "showInfo($event, 666)">ç‚¹å‡»æˆ‘ï¼Œå¼¹å‡ºæç¤ºä¿¡æ¯</button>
</div>

<script>
    Vue.config.productionTip = false;
    new Vue({
        el:'#root',
        data:{
        
        }, 
        methods: {
            showInfo(event, number) {
                alert('åŒå­¦æ‚¨å¥½' + number);
                console.log(event);
            }
        }
    })
</script>

```

ğŸ”ºæ³¨æ„ï¼š

1.  å¦‚æœæˆ‘ä»¬æƒ³åŒæ—¶ä¼ å…¥ event äº‹ä»¶å’Œè‡ªå®šä¹‰å‚æ•°ï¼Œé‚£ä¹ˆéœ€è¦åœ¨æ¨¡æ¿ä¸­çš„äº‹ä»¶ä¸Šæ·»åŠ  $event æ¥å¸®åŠ© event äº‹ä»¶å‚æ•°è¿›è¡Œå ä½
2.  **äº‹ä»¶çš„å›è°ƒéœ€è¦é…ç½®åœ¨ methods å¯¹è±¡ä¸­ï¼Œæœ€ç»ˆä¼šç»‘å®šåœ¨ vm ä¸Š**ï¼ˆè™½ç„¶ä¹Ÿå¯ä»¥ç›´æ¥é…ç½®åœ¨ data å¯¹è±¡ä¸­ï¼Œä½†æ˜¯ä¸æ¨èï¼‰
3.  methods ä¸­é…ç½®çš„å‡½æ•°ï¼Œä¸è¦ä½¿ç”¨ç®­å¤´å‡½æ•°ï¼Œå¦åˆ™ this æŒ‡å‘çš„å°±ä¸æ˜¯ vm ï¼ˆæˆ–ç»„ä»¶å®ä¾‹å¯¹è±¡ï¼‰äº†ï¼Œè€Œæ˜¯åˆ°ä¸Šä¸€çº§çš„ä¸Šä¸‹æ–‡ç¯å¢ƒæŸ¥æ‰¾å¯¹è±¡
4.  `@click = "demo"` å’Œ `@click = "demo($event)"` æ•ˆæœä¸€è‡´ï¼Œåè€…åªæ˜¯å¤šä¼ å…¥äº†ä¸€ä¸ª event çš„å¯¹è±¡

### 2.2 äº‹ä»¶ä¿®é¥°ç¬¦

Vue ä¸­çš„äº‹ä»¶ä¿®é¥°ç¬¦ï¼ˆå¸¸è§ï¼‰ï¼š

1.  preventï¼šé˜»æ­¢é»˜è®¤äº‹ä»¶
2.  stopï¼šé˜»æ­¢äº‹ä»¶å†’æ³¡ï¼ˆæ”¾åœ¨å­çº§å…ƒç´ èº«ä¸Šï¼‰
3.  onceï¼šäº‹ä»¶åªè§¦å‘ä¸€æ¬¡
4.  captureï¼šä½¿ç”¨äº‹ä»¶çš„æ•è·æ¨¡å¼ï¼ˆæ”¾åœ¨çˆ¶çº§å…ƒç´ èº«ä¸Šï¼‰
5.  selfï¼šåªæœ‰ event.target æ˜¯å½“å‰æ“ä½œçš„å…ƒç´ æ‰è§¦å‘äº‹ä»¶
6.  passiveï¼šäº‹ä»¶çš„é»˜è®¤è¡Œä¸ºç«‹å³æ‰§è¡Œï¼Œæ— éœ€ç­‰å¾…äº‹ä»¶å›è°ƒæ‰§è¡Œå®Œæ¯•
    *   è¿™é‡Œå°šç¡…è°·çš„è€å¸ˆä½¿ç”¨ sroll å’Œ wheel äº‹ä»¶åšäº†æ¼”ç¤ºï¼Œä½†æ˜¯è¿™ä¸ªäº‹ä»¶ä¿®é¥°ç¬¦å¹¶ä¸å¸¸ç”¨
        *   sroll æ˜¯æ»šåŠ¨æ¡çš„äº‹ä»¶ï¼Œè€Œ wheel æ˜¯æ»šè½®çš„äº‹ä»¶

```
<!-- css æ ·å¼ -->
<style>
    #root>div {
        width: 500px;
        height: 50px;
        margin: 20px auto;
        background-color: pink;
    }
</style>

```

```
<div id="root">
    <!-- é˜»æ­¢é»˜è®¤äº‹ä»¶ï¼š.prevent ç›¸å½“äº e.preventDefualt -->
    <div>
        <a href="http://www.baidu.com" @click.prevent ="showInfo" class="box1">ç™¾åº¦</a>
    </div>
    <!-- é˜»æ­¢äº‹ä»¶å†’æ³¡ï¼Œ.stop ç›¸å½“äº e.stopPropagation -->
    <div @click = "showInfo">
        <button @click.stop = "showInfo">ç‚¹å‡»</button>
    </div>
    <!-- äº‹ä»¶åªè§¦å‘ä¸€æ¬¡ -->
    <div>
        <button @click.once = "showInfo">ç‚¹å‡»</button>
    </div>
    <!-- å°†é»˜è®¤äº‹ä»¶ä¿®æ”¹ä¸ºæ•è·äº‹ä»¶ï¼Œå½“æˆ‘ä»¬ç‚¹å‡» button ä¹‹åï¼Œé¦–å…ˆæ‰§è¡Œ showInfo ä¹‹åå†æ‰§è¡Œ showMsg -->
    <div @click.capture = "showInfo">
        <button @click = "showMsg">ç‚¹å‡»</button>
    </div>
    <!-- self åªæœ‰è§¦å‘çš„å½“å‰çš„çš„å…ƒç´ æ—¶ï¼Œå³ e.target ä¸ºå½“å‰å…ƒç´ æ‰è§¦å‘äº‹ä»¶ -->
    <!-- åœ¨è¿™é‡Œè¡¨ç°ä¸ºå½“æˆ‘ä»¬ç‚¹å‡» button ä¹‹ååªä¼šæ‰§è¡Œ showMsg ,è€Œä¸ä¼šæ‰§è¡Œ showInfo -->
    <div @click.self = "showInfo">
        <button @click.stop = "showMsg">ç‚¹å‡»</button>
    </div>
</div>
<script>
    const vm = new Vue({
        el: '#root',
        data: {
            name: 'å¼ ä¸‰',

        },
        methods: {
            showInfo(e) {
                // e.preventDefault();
                alert('Vue å¾ˆæœ‰è¶£ï¼ï¼')
            },
            showMsg(e) {
                alert('æ‰€ä»¥ï¼ŒåŒå­¦å¿«æ¥å­¦ Vue')
            }
        }
    })
</script>

```

> å…·ä½“æ•ˆæœéœ€è¦è‡ªå·±å»æ‰§è¡Œå’Œè§‚å¯Ÿ

### 2.3 é”®ç›˜äº‹ä»¶

Vue ä¸­ç»™å¸¸ç”¨çš„æŒ‰é’®èµ·äº†åˆ«åï¼š

1.  å›è½¦ => enter
2.  åˆ é™¤ => delete(æ•è· â€œåˆ é™¤â€ å’Œ â€œé€€æ ¼â€)
3.  é€€å‡º => esc
4.  æ¢è¡Œ => tab
5.  ä¸Š => up
6.  ä¸‹ => down
7.  å·¦ => left
8.  å³ => right

> è¿™é‡Œçš„ tab é”®æ¯”è¾ƒç‰¹æ®Šï¼Œå› ä¸º tab çš„ä¸»è¦ä½œç”¨å°±æ˜¯ç”¨æ¥åˆ‡æ¢ç„¦ç‚¹çš„ï¼Œæ‰€ä»¥å½“æˆ‘ä»¬æ­é… keyup æ—¶ï¼ŒæŒ‰é’®ä¼šå¤±æ•ˆï¼Œåªèƒ½æ­é… keydown è¿›è¡Œè§¦å‘

```
<!-- demo -->
<div id="root">
    <input type="text" placeholder="æŒ‰ä¸‹å›è½¦è§¦å‘äº‹ä»¶" @keyup.enter = "showInfo">
</div>
<script>
    // å®šä¹‰åˆ«åæŒ‰é”®
    // Vue.config.keyCodes.huiche = 13;
    const vm = new Vue({
        el:'#root',
        methods: {
            showInfo(e) {
                // console.log(e.key,e.keyCode)
                // if(e.keyCode == 13) {
                    console.log(e.target.value);
                // }
            }
        }
    })
</script>

```

> ğŸ”ºæ³¨æ„ï¼šé”®ç›˜ä¸Šçš„æ¯ä¸€ä¸ªæŒ‰é”®å…¶å®éƒ½æœ‰è‡ªå·±çš„åç§°å’Œç¼–ç ï¼Œä¾‹å¦‚ å›è½¦é”® {åç§°ï¼šEnter; ç¼–ç ï¼š 13}

é”®ç›˜äº‹ä»¶çš„å…¶ä»–å®šä¹‰æ–¹å¼ï¼š

1.  Vue æœªæä¾›åˆ«åçš„æŒ‰é”®ï¼Œå¯ä»¥ä½¿ç”¨æŒ‰é’®åŸå§‹çš„ key å€¼å»ç»‘å®šï¼Œä½†æ˜¯æ³¨æ„è¦è½¬åŒ–ä¸º kebab-case(çŸ­æ¨ªçº¿å‘½å)ï¼Œä¾‹å¦‚å›è½¦é”®ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ Enterï¼Œå¤§å°å†™åˆ‡æ¢é”® CapsLock å¯ä»¥ä½¿ç”¨ capS-lock
    
2.  ç³»ç»Ÿä¿®é¥°ç¬¦ï¼ˆç”¨æ³•ç‰¹æ®Šï¼‰ï¼šctrlã€altã€shiftã€meta(å³ windows ç³»ç»Ÿä¸­çš„å¾½æ ‡é”®ï¼Œmac ç³»ç»Ÿä¸­çš„ command é”®)
    
    *   é…åˆ keyup ä½¿ç”¨ï¼šæŒ‰ä¸‹ä¿®é¥°ç¬¦çš„åŒæ—¶ï¼Œå†æŒ‰ä¸‹å…¶ä»–é”®ï¼Œéšåé‡Šæ”¾å…¶ä»–é”®ï¼Œäº‹ä»¶æ‰èƒ½è§¦å‘
    *   é…åˆ keydown ä½¿ç”¨ï¼šæ­£å¸¸è§¦å‘äº‹ä»¶
3.  ä¹Ÿå¯ä»¥ä½¿ç”¨ keycode æ¥æŒ‡å®šå…·ä½“çš„æŒ‰é’®ï¼ˆä¸æ¨èï¼‰
    
4.  Vue.config.keyCodes. è‡ªå®šä¹‰é”®å = é”®ç ï¼ˆåŒæ ·å› ä¸ºä½¿ç”¨åˆ° keycode ï¼Œä¸æ¨èï¼‰
    
    ![](https://i-blog.csdnimg.cn/blog_migrate/809d95fca97befb6435b0f4908d18d53.png)

### 2.4 äº‹ä»¶æ€»ç»“

*   äº‹ä»¶å¯ä»¥é‡‡ç”¨é“¾å¼ç¼–ç¨‹åŸç†ï¼Œå³å¦‚æœæˆ‘ä»¬æ—¢éœ€è¦é˜»æ­¢å†’æ³¡äº‹ä»¶ï¼Œåˆéœ€è¦é˜»æ­¢é»˜è®¤äº‹ä»¶ï¼Œå¯ä»¥ä½¿ç”¨`.prevent.stop`
*   ç³»ç»Ÿä¿®é¥°ç¬¦å¯ä»¥ä½¿ç”¨ç»„åˆæŒ‰é”®ï¼Œä¾‹å¦‚ï¼šæƒ³è¦åŒæ—¶åŒæ—¶æŒ‰ä¸‹ Ctrl + Y è§¦å‘äº‹ä»¶ï¼Œå¯ä»¥ä½¿ç”¨ `.ctrl.y`

### 2.5 å§“åæ¡ˆä¾‹

è¿™é‡Œæˆ‘ä»¬ä½¿ç”¨ methods æ¥å®ç°å§“åæ¡ˆä¾‹ï¼š

```
<div id="root">
    å§“ï¼š<input type="text" v-model="lastName"><br>
    åï¼š<input type="text" v-model="firstName"><br>
    å§“åï¼š<span>{{fullName()}}</span>
</div>
<script>
    Vue.config.productionTip = false;
    new Vue({
        el: '#root',
        data: {
            lastName: 'å¼ ',
            firstName: 'ä¸‰'
        },
        methods: {
            fullName() {
                return this.lastName + '-' + this.firstName;
            }
        }
    })
</script>

```

æ•ˆæœå›¾å¦‚ä¸‹ï¼š

![](https://i-blog.csdnimg.cn/blog_migrate/21b171aae24684441c79b211add2bf42.png)

> æ³¨æ„ï¼šæ¯å½“ data ä¸­çš„æ•°æ®å‘ç”Ÿå˜åŒ–ï¼ŒVue ä¼šé‡æ–°è§£ææ¨¡æ¿

### 2.6 è®¡ç®—å±æ€§

Vue ä¸­åœ¨ **computed** å†…çš„å±æ€§è¢«ç§°ä¸ºè®¡ç®—å±æ€§

```
<div id="root">
    å§“ï¼š<input type="text" v-model="lastName"><br>
    åï¼š<input type="text" v-model="firstName"><br>
    å§“åï¼š<span>{{fullName}}</span>
</div>
<script>
    Vue.config.productionTip = false;
    const vm = new Vue({
        el: '#root',
        data: {
            lastName: 'å¼ ',
            firstName: 'ä¸‰'
        },
        computed: {
            fullName: {
                get() {
                    return this.lastName + '-' + this.firstName;
                },
                set(value) {
                    const arr = value.split('-');
                    this.lastName = arr[0];
                    this.firstName = arr[1];
                }
            }
        }
    })
</script>

```

æ•ˆæœå›¾å¦‚ä¸‹ï¼š

![](https://i-blog.csdnimg.cn/blog_migrate/2d3905c26330c690671bde846a45511f.png)

ğŸ””è®¡ç®—å±æ€§

*   å®šä¹‰ï¼šåŠ¨æ€çš„ã€è¦é€šè¿‡å·²æœ‰çš„å±æ€§è¿›è¡Œè®¡ç®—è€Œå¾—æ¥çš„å±æ€§
    
*   åŸç†ï¼šåº•å±‚å€ŸåŠ©äº† Object.defineproperty æ–¹æ³•æä¾›çš„ getter å’Œ setter
    
*   get å‡½æ•°æ‰§è¡Œçš„æ—¶æœºï¼š
    
    1.  åˆæ¬¡è¯»å–çš„æ—¶å€™ä¼šæ‰§è¡Œä¸€æ¬¡
    2.  å½“ä¾èµ–çš„æ•°æ®å‘ç”Ÿæ”¹å˜æ—¶ä¼šè¢«å†æ¬¡è°ƒç”¨
*   ä¼˜åŠ¿ï¼šä¸ methods å®ç°ç›¸æ¯”è¾ƒï¼Œå†…éƒ¨å­˜åœ¨ç¼“å­˜æœºåˆ¶ï¼ˆå¤ç”¨ï¼‰ï¼Œæ•ˆç‡æ›´é«˜ï¼Œè°ƒç”¨æ›´åŠ æ–¹ä¾¿
    
*   å¤‡æ³¨ï¼š
    
    *   è®¡ç®—å±æ€§æœ€ç»ˆä¼šè½åˆ° vm ä¸Šï¼Œç›´æ¥è¯»å–ä½¿ç”¨å³å¯
    *   å¦‚æœè®¡ç®—å±æ€§è¦ä¿®æ”¹ï¼Œå¿…é¡»å†™åˆ° set å‡½æ•°å»å“åº”ä¿®æ”¹ï¼Œä¸” set ä¸­è¦å¼•èµ·è®¡ç®—æ—¶ä¾èµ–çš„æ•°æ®æ”¹å˜

**è®¡ç®—å±æ€§ç®€å†™**

æˆ‘ä»¬å¦‚æœçœç•¥äº† set æ–¹æ³•ï¼Œé‚£ä¹ˆå¯ä»¥å°†åŸæ¥çš„ get æ–¹æ³•ç®€å†™ä¸ºï¼š

```
fullName(){
	return this.lastName + '-' + this.firstName;
}

```

è¿™ä¸ªè®¡ç®—å±æ€§ç›´æ¥å†™æˆ "æ–¹æ³•"ï¼Œå¹¶ä¸”è¡¨ç¤ºçš„å°±æ˜¯ get æ–¹æ³•

> å½“ç„¶ï¼Œè¿™æ ·å†™è¡¨ç¤ºå°† get æ–¹æ³•ç»‘å®šåˆ° fullName å±æ€§ä¸Šï¼Œè€Œä¸æ˜¯ fullName å°±æ˜¯ä¸€ä¸ªæ–¹æ³•ï¼Œå…¶æœ¬è´¨ä¸Šè¿˜åªæ˜¯ä¸€ä¸ªè®¡ç®—å±æ€§

### 2.7 ä¾¦å¬å±æ€§

Vue ä¸­å†™åœ¨ **watch** å†…çš„å±æ€§å³ä¸ºä¾¦å¬å±æ€§

ä¾¦å¬å±æ€§çš„ç‰¹ç‚¹

1.  å½“ä¾¦å¬çš„å±æ€§å‘ç”Ÿå˜åŒ–æ—¶ï¼Œå›è°ƒå‡½æ•°è‡ªåŠ¨è°ƒç”¨ï¼Œè¿›è¡Œç›¸å…³æ“ä½œ
2.  ä¾¦å¬çš„å±æ€§å¿…é¡»å­˜åœ¨ï¼Œæ‰èƒ½è¿›è¡Œä¾¦å¬
3.  ä¾¦å¬å±æ€§çš„ä¸¤ç§å†™æ³•ï¼š
    *   new Vueï¼ˆå³ Vue å®ä¾‹ï¼‰ä¸­ä¼ å…¥ watch é…ç½®
    *   åœ¨ Vue å®ä¾‹å¤–ï¼Œé€šè¿‡ vm.$watch æ¥è¿›è¡Œé…ç½®
4.  åœ¨ä¾¦å¬å±æ€§å†…éƒ¨å¯ä»¥é€šè¿‡æ·»åŠ å‚æ•° immediate æ¥è¡¨ç¤ºæ˜¯å¦è¦åœ¨åˆå§‹åŒ–æ—¶è°ƒç”¨ä¸€æ¬¡ handler

**demo**

```
<div id="root">
    <h2>ä»Šå¤©å¤©æ°”å¾ˆ{{info}}</h2>
    <button @click="changeWeather">åˆ‡æ¢å¤©æ°”</button>
</div>
<script>    
    const vm = new Vue({
        el: '#root',
        data: {
            ishot: true,
        },
        methods: {
            changeWeather() {
                this.ishot = !this.ishot;
            }             
        },
        computed: {
            info(){
                return this.ishot ? 'å‡‰çˆ½' : 'ç‚çƒ­';
            }  
        }, 
        watch: {
            ishot: {
                immediate: true,        //åˆå§‹åŒ–æ—¶è®©handlerè°ƒç”¨ä¸€ä¸‹
                handler(newValue, oldValue) {
                    console.log('ishot change!');
                    console.log(newValue, oldValue);
                }
            }
        }
    })
</script>

```

æ•ˆæœå›¾å¦‚ä¸‹ï¼š

![](https://i-blog.csdnimg.cn/blog_migrate/266f06485b320b4da839b8f757d1f36a.png)

å…¶ä¸­çš„ ishot ä¾¦å¬å±æ€§ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥æ”¹ä¸ºå¦‚ä¸‹å†™æ³•ï¼š

```
vm.$watch('ishot', {
    immediate: true,        // åˆå§‹åŒ–æ—¶è®©handlerè°ƒç”¨ä¸€ä¸‹
    handler(newValue, oldValue) {
            console.log('ishot change!');
            console.log(newValue, oldValue);
        }
    }
)

```

è¿™ç§å†™æ³•é€‚åˆäºä¸€å¼€å§‹å¹¶ä¸æ¸…æ¥šè‡ªå·±è¦ä¾¦å¬çš„å±æ€§ï¼ˆåŒ…æ‹¬äº†è®¡ç®—å±æ€§ï¼‰

#### 2.7.1 æ·±åº¦ä¾¦å¬

å¦‚æœä¾¦å¬çš„å±æ€§å†…éƒ¨è¿˜æœ‰å…¶ä»–å±æ€§ï¼Œé‚£ä¹ˆæˆ‘ä»¬å¦‚æœæƒ³è¦ç»§ç»­ä¾¦å¬å†…éƒ¨çš„å±æ€§å°±éœ€è¦ç”¨åˆ°å‚æ•° **deep**ï¼Œå°†å…¶è®¾ç½®ä¸º true

```
<div id="root">
    <h1>a çš„å€¼ä¸º{{numbers.a}}</h1>
    <button @click="numbers.a++">ç‚¹å‡» a çš„å€¼å‘ç”Ÿæ”¹å˜</button>
    <h2>b çš„å€¼ä¸º{{numbers.b}}</h2>
    <button @click="numbers.b++">ç‚¹å‡» b çš„å€¼å‘ç”Ÿæ”¹å˜</button>
</div>
<script>
    const vm = new Vue({
        el:'#root',
        data:{
            numbers:{
                a: 1,
                b: 10
            }
        },
        watch:{
            // åªæƒ³ä¾¦å¬ number é‡Œé¢çš„ a,æ³¨æ„åœ¨å±æ€§å¤–é¢ç”¨å¼•å·åŒ…è£¹
            'numbers.a':{
                handler() {
                    console.log('a çš„å€¼å‘ç”Ÿæ”¹å˜');
                }
            },
            // å¦‚æœæƒ³è¦ä¾¦å¬ number æ•´ä½“ï¼Œéœ€è¦ä½¿ç”¨ deep å‚æ•°
            numbers:{
                deep: true, // æ·±åº¦ä¾¦å¬
                handler() {
                    console.log('number é‡Œé¢å‘ç”Ÿæ”¹å˜');
                }
            }
        }
    })
</script>

```

æ•ˆæœå›¾å¦‚ä¸‹ï¼š

![](https://i-blog.csdnimg.cn/blog_migrate/39c6e931275862b8df26ff6bd08708e4.png)

ğŸ“**æ€»ç»“ï¼š**

1.  Vue ä¸­çš„ watch é»˜è®¤ä¸ç›‘æµ‹å¯¹è±¡å†…éƒ¨å€¼çš„æ”¹å˜
2.  å¦‚æœæƒ³è¦è®© Vue ä¸­çš„ watch å¯ä»¥ç›‘æµ‹åˆ°å¯¹è±¡å†…éƒ¨å€¼çš„æ”¹å˜ï¼Œéœ€è¦è®¾ç½®`deep: true`

> æ³¨æ„ï¼šVue è‡ªèº«å¯ä»¥ç›‘æµ‹åˆ°å¯¹è±¡å†…éƒ¨å€¼çš„æ”¹å˜ï¼Œä½†æ˜¯ Vue æä¾›çš„ watch é»˜è®¤æ˜¯ç›‘æµ‹ä¸åˆ°çš„

#### 2.7.2 ä¾¦å¬çš„ç®€å†™å½¢å¼

å½“æˆ‘ä»¬ä¸éœ€è¦ä¸ºä¾¦å¬å±æ€§æ·»åŠ è¯¸å¦‚ immediateã€deep ç­‰å‚æ•°ï¼Œå¹¶ä¸”å†…éƒ¨åªæœ‰ä¸€ä¸ª handler å¤„ç†ç¨‹åºæ—¶ï¼Œæˆ‘ä»¬å¯ä»¥åƒè®¡ç®—å±æ€§çš„ç®€å†™å½¢å¼ç±»ä¼¼ï¼Œä»£ç å¦‚ä¸‹ï¼š

```
numbers(newValue, oldValue) {
    console.log('numbers çš„å€¼è¢«ä¿®æ”¹äº†', newValue, oldValue);
}

```

ç­‰æ•ˆäºï¼š

```
numbers: {
    handler(newValue, oldValue) {
        console.log('numbers çš„å€¼è¢«ä¿®æ”¹äº†', newValue, oldValue);
    }
}

```

æˆ‘ä»¬ä¹Ÿå¯ä»¥ä½¿ç”¨ `vm.$watch` çš„å½¢å¼:

```
vm.$watch('numbers',function(newValue, oldValue) {
    console.log('numbers çš„å€¼è¢«ä¿®æ”¹äº†', newValue, oldValue);
})

```

#### 2.7.3 ä¾¦å¬å±æ€§å’Œè®¡ç®—å±æ€§çš„å¯¹æ¯”

1.  computed èƒ½å®Œæˆçš„åŠŸèƒ½ï¼Œwatch éƒ½èƒ½å®Œæˆï¼Œåè¿‡æ¥ï¼Œwatch èƒ½å®Œæˆçš„äº‹æƒ…ï¼Œcomputed ä¸ä¸€å®šå°±èƒ½å®Œæˆ
    *   computed æ‰€åŒ…å«çš„è®¡ç®—å±æ€§çš„å€¼é€šè¿‡ return è¿”å›ï¼Œå°±æ— æ³•æ‰§è¡Œå¼‚æ­¥ä»»åŠ¡ï¼Œä¾‹å¦‚è®¾ç½®ä¸€ä¸ªå®šæ—¶å™¨ setTimeoutï¼Œè€Œ watch å°±å¯ä»¥è¿›è¡Œå¼‚æ­¥ä»»åŠ¡
2.  é‡è¦æé†’ï¼š
    *   è¢« Vue ç®¡ç†çš„å‡½æ•°ï¼Œæœ€å¥½å†™æˆæ™®é€šå‡½æ•°ï¼Œè¿™æ · this çš„æŒ‡å‘æ‰ä¼šæ˜¯ vm æˆ–ç»„ä»¶å®ä¾‹å¯¹è±¡
    *   ä¸è¢« Vue ç®¡ç†çš„å‡½æ•°ï¼ˆå®šæ—¶å™¨çš„å›è°ƒå‡½æ•°ï¼Œajax çš„å›è°ƒå‡½æ•°ç­‰ï¼‰ï¼Œæœ€å¥½å†™æˆç®­å¤´å‡½æ•°ï¼Œè¿™æ · this çš„æŒ‡å‘æ‰ä¼šæ˜¯ vm æˆ–ç»„ä»¶å®ä¾‹å¯¹è±¡

3 ç»‘å®šæ ·å¼ä¸æ¸²æŸ“
---------

### 3.1 ç»‘å®š class æ ·å¼

```
<!-- å›ºå®šæ ·å¼ä½¿ç”¨ class,ä¸å›ºå®šæ ·å¼ä½¿ç”¨ v-bind è¿½åŠ å…ƒç´  -->
<div class="test" :class="bgc"></div>

```

```
const vm = new Vue({
    el:'#root',
    data:{
        bgc: 'red'		// é€šè¿‡ä¸º bgc æ·»åŠ å€¼æ¥å®ç°è¿½åŠ 
    }
})

```

**å˜å¼ 1ï¼šåˆ›å»ºç‚¹å‡»æŒ‰é’®ï¼Œå¯ä»¥éšæœºåˆ‡æ¢æ ·å¼**

```
<div class="test" :class="bgc"></div>
<button @click="changeColor">ç‚¹å‡»æˆ‘æ”¹å˜èƒŒæ™¯é¢œè‰²</button>

```

```
const vm = new Vue({
    el:'#root',
    data:{
        bgc: 'red'
    },
    methods:{
        changeColor() {
            const color = ['red', 'green', 'blue'];
            let index = Math.floor(Math.random()*3);
            this.bgc = color[index];
            console.log(color[index]);
        }
    }
})

```

æ•ˆæœå›¾å¦‚ä¸‹ ï¼š

![](https://i-blog.csdnimg.cn/blog_migrate/fa50ad233ff6a23469c94cf409fa9392.png)

**å˜å¼ 2ï¼šç»‘å®š class æ ·å¼çš„å¯¹è±¡å†™æ³•ï¼Œå¯ä»¥ç”¨æ¥æŒ‡å®šå“ªäº›æ ·å¼æ˜¾ç¤ºå’Œä¸æ˜¾ç¤º**

```
data:{
    form: {
        addHeight: true,
        addWidth: true
    }
}

```

**å˜å¼ 3ï¼šç»‘å®š class æ ·å¼çš„æ•°ç»„å†™æ³•ï¼Œå¯ä»¥å åŠ å¤šä¸ªæ ·å¼**

```
data:{
    classArr: ['style1', 'style2']
}

```

ğŸ“æ€»ç»“ï¼š

1.  å­—ç¬¦ä¸²å†™æ³•ï¼Œé€‚ç”¨äºï¼šæ ·å¼çš„ç±»åä¸ç¡®å®šï¼Œéœ€è¦åŠ¨æ€æŒ‡å®š
2.  æ•°ç»„å†™æ³•ï¼Œé€‚ç”¨äºï¼šéœ€è¦å åŠ å¤šä¸ªæ ·å¼å±æ€§
3.  å¯¹è±¡å†™æ³•ï¼Œé€‚ç”¨äºï¼šè¦ç»‘å®šçš„å…ƒç´ ä¸ªæ•°ç¡®å®šï¼Œä½†æ˜¯éœ€è¦åŠ¨æ€æŒ‡å®šéœ€è¦ä¸éœ€è¦ä½¿ç”¨

### 3.2 ç»‘å®š style æ ·å¼

**å†™æ³•ä¸€**

```
<div class="test" :style="{fontSize:fsize + 'px'}">Alice</div>

```

```
data:{
    fsize: 40
}

```

**å†™æ³•äºŒ**

```
<div class="test" :style="styleObj">Alice</div>

```

```
data:{
    styleObj: {
        fontSize: '40px'
    }
}

```

**å†™æ³•ä¸‰**

å¯ä»¥ç›´æ¥åœ¨ style ä¸­ä½¿ç”¨æ•°ç»„ï¼Œæ•°ç»„é‡Œé¢å­˜æ”¾è‹¥å¹²ä¸ªå¯¹è±¡

### 3.3 æ¡ä»¶æ¸²æŸ“

`v-show` æŒ‡ä»¤ç”¨æ¥è¿›è¡Œæ¸²æŸ“é¡µé¢å…ƒç´ çš„æ˜¾ç¤ºä¸éšè—ï¼Œæ•ˆæœç±»ä¼¼äº `display:none;` å’Œ `display:block;`

```
v-show:true			// ç­‰æ•ˆäºdisplay:block

```

```
v-show:false		// ç­‰æ•ˆäºdisplay:none

```

`v-if`æŒ‡ä»¤ç”¨æ¥æ¸²æŸ“é¡µé¢å…ƒç´ çš„å­˜åœ¨ä¸æ¶ˆå¤±

```
v-if:true			

```

```
v-if:false			// ä¼šå°†é¡µé¢çš„å…ƒç´ èŠ‚ç‚¹ç›´æ¥åˆ é™¤

```

> v-if å’Œ v-show åœ¨æ˜¾ç¤ºçš„æ•ˆæœä¸Šè¡¨ç°æ˜¯ç›¸åŒçš„ï¼Œä½†æ˜¯ä¸¤è€…ä¹Ÿæ˜¯æœ‰ç»†å¾®çš„å·®åˆ«çš„ï¼Œå¦‚æœæˆ‘ä»¬çš„æ˜¾ç¤ºå’Œéšè—äº¤äº’å¾ˆé¢‘ç¹ï¼Œé‚£ä¹ˆæ¨èä½¿ç”¨ v-showï¼Œå› ä¸º v-show å¹¶ä¸ä¼šè¿›è¡Œåˆ é™¤èŠ‚ç‚¹å’Œæ·»åŠ èŠ‚ç‚¹çš„æ“ä½œï¼Œæ•ˆç‡ç›¸å¯¹æ›´é«˜

é™¤æ­¤ä¹‹å¤–ï¼Œè¿˜æœ‰`v-else-if`å’ŒæŒ‡ä»¤æ­é…`v-else`æŒ‡ä»¤ï¼Œå®ƒä»¬æ˜¯ç”¨æ¥æ­é…`v-if`æŒ‡ä»¤çš„ï¼Œå’Œæ¡ä»¶åˆ¤æ–­çš„ if-else è¯­å¥çš„æ•ˆæœä¸€è‡´ï¼Œ**æˆ‘ä»¬ä½¿ç”¨è¿™äº›è¯­å¥æ—¶ï¼Œä¸­é—´ä¸èƒ½å¤Ÿè¢«æ‰“æ–­**

âœ¨`v-if`çš„å¦™ç”¨

`v-if`å¯ä»¥æ­é… template ä¸€èµ·ä½¿ç”¨ï¼Œä½¿å¾—å¤šä¸ªæ ‡ç­¾ä½¿ç”¨åŒä¸€æ¸²æŸ“

```
// demo
<template v-if="1 > 3">
    <h1>æ—©ä¸Šå¥½</h1>
    <h1>ä¸­åˆå¥½</h1>
    <h1>ä¸‹åˆå¥½</h1>
</template>
<h1>æ™šä¸Šå¥½</h1>

```

æ•ˆæœå›¾å¦‚ä¸‹ï¼š

![](https://i-blog.csdnimg.cn/blog_migrate/818c3cc181e058dd4c5ff02ff1e272f6.png)

### 3.4 åˆ—è¡¨æ¸²æŸ“

åœ¨åˆ—è¡¨æ¸²æŸ“ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ `v-for` æŒ‡ä»¤æ¥å¯¹åˆ—è¡¨è¿›è¡Œæ¸²æŸ“ï¼Œå…·ä½“è¯­æ³•å¦‚ä¸‹ï¼š

```
v-for = "(item, index) in xxx" :key="yyy"

```

> `v-for`å¯éå†çš„åŒ…æ‹¬äº†æ•°ç»„ã€å¯¹è±¡ã€å­—ç¬¦ä¸²ï¼ˆè¾ƒå°‘ï¼‰ï¼ŒæŒ‡å®šæ¬¡æ•°ï¼ˆè¾ƒå°‘ï¼‰

**éå†æ•°ç»„**

```
<ul>
    <li v-for="(value, key) in persons" :key="key">
        {{value.name}} - {{value.age}} - {{key}}
    </li>
</ul>

```

```
persons:[
    {id:'001', name:'å¼ ä¸‰','age':18},
    {id:'002', name:'æå››','age':19},
    {id:'002', name:'æå››','age':19}
]

```

æ•ˆæœå¦‚ä¸‹ï¼š

![](https://i-blog.csdnimg.cn/blog_migrate/d43a366d3bbd8812473ea2047fe1a6f4.png)

**éå†å¯¹è±¡**

```
<ul>
    <li v-for="(value, key) in cars" :key="key">
        {{value}} - {{key}}
    </li>
</ul>

```

```
cars:{
    name:'å¥¥è¿ª',
    color:'white',
    price:'7000000'
}

```

æ•ˆæœå¦‚ä¸‹ï¼š

![](https://i-blog.csdnimg.cn/blog_migrate/b34cea19ef14d803bee84476e411968b.png)

**éå†å­—ç¬¦ä¸²**

```
<ul>
    <li v-for="(value, key) in str" :key="key">
        {{value}} - {{key}}
    </li>
</ul>

```

```
str: "Hello"

```

æ•ˆæœå¦‚ä¸‹ï¼š

![](https://i-blog.csdnimg.cn/blog_migrate/42b6d3a297d13b21bbcebbabba182f56.png)

**éå†æ¬¡æ•°**

```
<ul>
    <li v-for="(value, key) in 4" :key="key">
        {{value}} - {{key}}
    </li>
</ul>

```

æ•ˆæœå›¾å¦‚ä¸‹ï¼š

![](https://i-blog.csdnimg.cn/blog_migrate/dced337f5d5c323ea318e3b5542a53e5.png)

éå†æ•°å­—ï¼Œå‰é¢æ˜¯è®¡æ•°å™¨ï¼ˆä» 1 å¼€å§‹ï¼‰ï¼Œåé¢æ˜¯ç´¢å¼•ï¼ˆä» 0 å¼€å§‹ï¼‰

> æ³¨æ„ï¼šè¿™é‡Œä¸ JS çš„è¯­æ³•åŸºæœ¬ç±»ä¼¼ï¼Œæˆ‘ä»¬é™¤äº†å¯ä»¥ä½¿ç”¨ forâ€¦inï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ forâ€¦ofï¼Œæ•ˆæœç›¸åŒ

#### 3.4.1 key ä½œç”¨ä¸åŸç†

æˆ‘ä»¬é¦–å…ˆå‡†å¤‡å¥½æµ‹è¯•æ‰€éœ€æ•°æ®

```
<!-- index ä½œä¸º key ï¼Œä»¥ç¤ºæ ‡è¯†-->
<div id="root">
    <ul>
        <li v-for="(p, index) in persons" :key="index">
            {{p.name}} - {{p.age}}
            <input type="text">
        </li>
    </ul>
    <button @click.once="add">æ·»åŠ æ•°ç»„å…ƒç´ </button>
</div>
<script>
    const vm = new Vue({
        el: '#root',
        data: {
            persons: [
                { id: '001', name: 'å¼ ä¸‰', age: 18 },
                { id: '002', name: 'æå››', age: 19 },
                { id: '003', name: 'ç‹äº”', age: 20 }
            ]
        },
        methods:{
            add() {
                const p = {id: '004', name: 'åˆ˜å…­', age: 20};
                this.persons.unshift(p);
            }
        }
    })
</script>

```

æ•ˆæœå›¾å¦‚ä¸‹ï¼š

![](https://i-blog.csdnimg.cn/blog_migrate/947a5162093ba4fd3c4d06c96811441b.png)

æˆ‘ä»¬åœ¨å…¶è¾“å…¥æ¡†ä¸­å¡«å…¥å¯¹åº”å†…å®¹ï¼š

![](https://i-blog.csdnimg.cn/blog_migrate/bce9921ead36035658ff75d1b074122e.png)

æ·»åŠ æ•°ç»„å…ƒç´ ä¹‹åï¼Œæ•ˆæœå›¾å¦‚ä¸‹ï¼š

![](https://i-blog.csdnimg.cn/blog_migrate/77fb3efad8ac440a8be94ad36b6c8b8b.png)

è¿™æ—¶å€™ï¼Œæˆ‘ä»¬ä¼šæƒŠè®¶å¾—å‘ç°ï¼Œæ•°æ®å‘ç”Ÿé”™ä½ï¼ŒåŸç†å¦‚ä¸‹ï¼š

![](https://i-blog.csdnimg.cn/blog_migrate/3cd611d9be204e64ab28205a0050bd20.png)

```
	ä»ä¸Šå›¾ï¼Œæˆ‘ä»¬å¯ä»¥å¾ˆæ¸…æ™°åœ°äº†è§£äº§ç”Ÿè¿™ç§é”™ä½çš„åŸå› ï¼Œé¦–å…ˆ Vue ä¼šæ ¹æ®åˆå§‹æ•°æ®ç”Ÿæˆä¸€ä¸ªè™šæ‹Ÿ DOM ï¼Œè¿™ä¸ªè™šæ‹Ÿ DOM ä¼šè‡ªåŠ¨è®¾ç½®å¥½ key å€¼ï¼ˆä¹Ÿå°±æ˜¯ç´¢å¼•å·ï¼‰ï¼Œå½“æˆ‘ä»¬ä¿®æ”¹æ•°æ®åï¼Œ Vue åˆä¼šæ ¹æ®æ–°æ•°æ®ç”Ÿæˆä¸€ä¸ªè™šæ‹Ÿ DOM ï¼Œè¿™ä¸ªæ–°çš„è™šæ‹Ÿ DOM ä¼šä¸æ—§çš„è™šæ‹Ÿ DOM è¿›è¡Œå¯¹æ¯”ï¼Œæ ¹æ® key å€¼ç›¸åŒçš„æ•°æ®é¡¹è¿›è¡Œé€ä¸ªå¯¹æ¯”ï¼Œä¸åŒçš„æ•°æ®ä¼šäº§ç”Ÿè¦†ç›–ï¼Œå¦‚ä¸Šå›¾çš„ ã€è€åˆ˜-30ã€‘å°±ä¼šæ›¿æ¢åˆ°åŸæ¥çš„ã€å¼ ä¸‰-18ã€‘ï¼Œä½†æ˜¯ input å…ƒç´ èŠ‚ç‚¹ç›¸åŒï¼ˆå¿½ç•¥é‡Œé¢çš„æ–‡æœ¬ï¼‰ï¼Œ å°±ç›´æ¥ä¿ç•™åŸæ¥çš„ input å…ƒç´ èŠ‚ç‚¹ï¼ŒåŒæ—¶é‡Œé¢æ®‹å­˜çš„æ–‡æœ¬ä¸ä¼šå‘ç”Ÿæ”¹å˜ï¼Œå…¶ä»–çš„ä¾æ¬¡æŒ‰è¿™ç§æ–¹å¼æ¯”è¾ƒï¼Œç¢°åˆ° key=3 æ—¶å°±ç›´æ¥åŠ å…¥ï¼Œä¸å¿…è¿›è¡Œåˆ¤æ–­ï¼Œæ‰€ä»¥å°±ä¼šå½¢æˆé”™ä½ï¼ŒåŒæ—¶è¿™ç§å†™æ³•è¿˜å­˜åœ¨ä¸€ä¸ªä¸¥é‡çš„é—®é¢˜ï¼šæ•ˆç‡ä½ä¸‹ï¼ˆä¸èƒ½ç›´æ¥æ²¿ç”¨ä¹‹å‰çš„å…ƒç´ ï¼‰

```

å¦‚æœæˆ‘ä»¬ä½¿ç”¨ `p.id` ä½œä¸ºå”¯ä¸€æ ‡è¯†æ—¶ï¼Œåˆ™ä¸å­˜åœ¨ä¸Šå›¾å‡ºç°çš„è¿™ä¸ªé—®é¢˜ï¼ŒåŸç†å›¾å¦‚ä¸‹ï¼š

![](https://i-blog.csdnimg.cn/blog_migrate/0b91dc776a4d10d06375d7e5cf153fcb.png)

ğŸ“æ€»ç»“ï¼š

1.  è™šæ‹Ÿ DOM ä¸­ key çš„ä½œç”¨ï¼š
    
    *   key æ˜¯è™šæ‹Ÿ DOM å¯¹è±¡çš„æ ‡è¯†ï¼Œå½“æ•°æ®å‘ç”Ÿæ”¹å˜æ—¶ï¼ŒVue ä¼šæ ¹æ®ã€æ–°æ•°æ®ã€‘ç”Ÿæˆã€æ–°çš„è™šæ‹Ÿ DOMã€‘
    *   éšå Vue ä¼šå¯¹ã€æ–°è™šæ‹Ÿ DOMã€‘å’Œã€æ—§è™šæ‹Ÿ DOMã€‘è¿›è¡Œå·®å¼‚æ¯”è¾ƒ
2.  æ¯”è¾ƒè§„åˆ™å¦‚ä¸‹ï¼š
    
    *   æ—§è™šæ‹Ÿ DOM ä¸­æ‰¾åˆ°äº†ä¸æ–°è™šæ‹Ÿ DOM ç›¸åŒçš„ key:
        *   è‹¥è™šæ‹Ÿ DOM ä¸­å†…å®¹æ²¡å˜ï¼Œç›´æ¥ä½¿ç”¨ä¹‹å‰çš„çœŸå® DOM
        *   è‹¥è™šæ‹Ÿ DOM ä¸­å†…å®¹æ”¹å˜ï¼Œåˆ™ç”Ÿæˆæ–°çš„çœŸå® DOMï¼Œæ›¿æ¢æ‰åŸæ¥é¡µé¢ä¸­çœŸå®çš„ DOM
3.  ç”¨ index ä½œä¸º key å¯èƒ½å¼•å‘çš„é—®é¢˜ï¼š
    
    *   è‹¥å¯¹æ•°æ®è¿›è¡Œ**é€†åºæ·»åŠ ã€é€†åºåˆ é™¤**ç­‰ç ´åé¡ºåºæ“ä½œæ—¶ï¼Œä¼šäº§ç”Ÿæ²¡æœ‰å¿…è¦çš„ DOM æ›´æ–° ==> ç•Œé¢æ•ˆæœæ²¡é—®é¢˜ï¼Œä½†æ•ˆç‡ä½
    *   è‹¥ç»“æ„ä¸­è¿˜åŒ…å«äº†è¾“å…¥ç±» DOM ==> äº§ç”Ÿé”™è¯¯çš„ DOM æ›´æ–°ï¼Œç•Œé¢å‡ºç°é—®é¢˜
4.  å¼€å‘ä¸­å¦‚ä½•é€‰æ‹© keyï¼Ÿ
    
    *   æœ€å¥½ä½¿ç”¨æ¯æ¡æ•°æ®çš„å”¯ä¸€æ ‡è¯†ï¼ˆå³ä¸»å±æ€§ï¼‰ä½œä¸º key

#### 3.4.2 åˆ—è¡¨è¿‡æ»¤

```
<div id="root">
    <h2>äººå‘˜åˆ—è¡¨</h2>
    <input type="text" placeholder="è¯·è¾“å…¥æŸ¥æ‰¾å…³é”®å­—" v-model="keywords">
    <ul>
        <li v-for="(p,index) in filpersons" :key="index">
            {{p.name}} - {{p.age}} - {{p.sex}}
        </li>
    </ul>
</div>
<script>
    const vm = new Vue({
        el: '#root',
        data: {
            keywords: '',
            persons: [
                { id: '001', name: 'é©¬å†¬æ¢…', age: 19, sex: 'å¥³' },
                { id: '002', name: 'å‘¨å†¬é›¨', age: 20, sex: 'å¥³' },
                { id: '003', name: 'å‘¨æ°ä¼¦', age: 21, sex: 'ç”·' },
                { id: '004', name: 'æ¸©å…†ä¼¦', age: 22, sex: 'ç”·' }
            ],
            filpersons:[]
        },
        watch:{
            keywords:{
                // è¿™é‡Œå­˜åœ¨ä¸€ä¸ªå°æŠ€å·§å°±æ˜¯ä»»ä½•å­—ç¬¦ä¸²éƒ½åŒ…å«ç©ºå­—ç¬¦ï¼Œä¸ºäº†ä½¿å¾—è¿‡æ»¤æ•°ç»„å‰èƒ½å¤Ÿå°†æ‰€æœ‰çš„æ•°æ®æ˜¾ç¤ºåœ¨é¡µé¢ä¸­æˆ‘ä»¬éœ€è¦æ·»åŠ å‚æ•° immediate
                immediate:true,   
                handler(val) {
                    this.filpersons = this.persons.filter((p) => {
                        return p.name.indexOf(val) != -1;
                    })
                }
            }
        }
    })
</script>

```

æ•ˆæœå›¾å¦‚ä¸‹ï¼š

![](https://i-blog.csdnimg.cn/blog_migrate/0d8def70aee32c1898d90ccb8df41ffc.png)

å½“ç„¶ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥ä½¿ç”¨ è®¡ç®—å±æ€§ æ¥å®Œæˆè¿™ä¸€æ•ˆæœï¼š

```
computed:{
    filpersons() {
        return this.persons.filter((p) => {
            return p.name.indexOf(this.keywords) != -1;
        })
    }
}

```

#### 3.4.3 åˆ—è¡¨æ’åº

é’ˆå¯¹åˆ—è¡¨æ’åºï¼Œæˆ‘ä»¬å¯ä»¥è¿›è¡Œå¦‚ä¸‹æ“ä½œï¼š

é¦–å…ˆå¯¹æ’åºçŠ¶æ€è®¾ç½®æ ‡è¯†ï¼š

*   0 - åˆå§‹çŠ¶æ€
*   1 - é™åºçŠ¶æ€
*   2 - å‡åºçŠ¶æ€

ä¹‹ååœ¨è®¡ç®—å±æ€§çš„ filpersons ä¸­è¿›è¡Œåˆ¤æ–­ï¼š

```
filPerons(){
	const arr = this.persons.filter((p)=>{
		return p.name.indexOf(this.keyWord) !== -1
	})
	//åˆ¤æ–­ä¸€ä¸‹æ˜¯å¦éœ€è¦æ’åº
	if(this.sortType){
		arr.sort((p1,p2)=>{
			return this.sortType === 1 ? p2.age-p1.age : p1.age-p2.age
		})
	}
	return arr
}

```

### 3.5 Vue æ£€æµ‹æ•°æ®å‘ç”Ÿæ”¹å˜çš„åŸç†

1.  Vue ä¼šç›‘è§† data ä¸­**æ‰€æœ‰å±‚æ•°çš„æ•°æ®**
    
2.  å¦‚ä½•ç›‘æµ‹**å¯¹è±¡**ä¸­çš„æ•°æ®ï¼Ÿ
    
    *   ä¸»è¦æ˜¯é€šè¿‡ setter å®ç°ç›‘è§†ï¼Œå¹¶ä¸”è¦åœ¨ new Vue çš„æ—¶å€™å°±è¦ä¼ å…¥è¦ç›‘æµ‹çš„æ•°æ®
        1.  å¯¹è±¡ä¸­åè¿½åŠ çš„å±æ€§ï¼ŒVue é»˜è®¤æ˜¯ä¸åšå“åº”å¼å¤„ç†çš„
        2.  å¦‚éœ€ç»™åæ·»åŠ çš„å±æ€§åšå“åº”å¼ï¼Œå¯ä»¥ä½¿ç”¨å¦‚ä¸‹çš„ APIï¼š
            *   Vue.set(target, propertyName/index, value)
            *   vm.$set(target, propertyName/index, value)
3.  å¦‚ä½•ç›‘æµ‹**æ•°ç»„**ä¸­çš„æ•°æ®ï¼Ÿ
    
    é€šè¿‡åŒ…è£¹æ•°ç»„æ›´æ–°å…ƒç´ çš„æ–¹æ³•å®ç°ï¼Œæœ¬è´¨å°±å®Œæˆä»¥ä¸‹ä¸¤ä»¶äº‹ï¼š
    
    1.  è°ƒç”¨åŸç”Ÿå¯¹åº”çš„æ–¹æ³•å¯¹æ•°ç»„è¿›è¡Œæ›´æ–°
    2.  é‡æ–°è§£ææ¨¡æ¿ï¼Œè¿›è€Œæ›´æ–°é¡µé¢
4.  åœ¨ Vue ä¸­ä¿®æ”¹æ•°ç»„ä¸­çš„æŸä¸ªå…ƒç´ è¦ä½¿ç”¨å¦‚ä¸‹æ–¹æ³•ï¼š
    
    1.  ä½¿ç”¨å¦‚ä¸‹çš„ APIï¼špushã€popã€unshiftã€spliceã€sortã€reverse
    2.  `Vue.set()` æˆ– `vm.$set()`
    
    > âš ï¸`Vue.set()` æˆ– `vm.$set()`è¿™ä¸¤ä¸ªæ–¹æ³•ä¸èƒ½ç»™ vm æˆ– vm çš„æ ¹æ•°æ®å¯¹è±¡æ·»åŠ å±æ€§
    

**demo**

**æå‰æ­å»ºå¥½ç»“æ„**

```
<div id="root">
    <h1>å­¦ç”Ÿä¿¡æ¯</h1>
    <h2>å­¦ç”Ÿå§“å: {{student.name}}</h2>
    <h2>å­¦ç”Ÿå¹´é¾„:{{student.age}}</h2>
    <h2>å­¦ç”Ÿæ€§åˆ«:{{student.gender}}</h2>
    <h2>å­¦ç”Ÿçˆ±å¥½:</h2>
    <ul>
        <li v-for="(h, index) in student.hobby">
            {{h}}
        </li>
    </ul>
    <h2>å­¦ç”Ÿå¥½å‹:</h2>
    <ul>
        <li v-for="(f, index) in student.friends">
            {{f.name}} - {{f.age}}
        </li>
    </ul>
</div>
<script>
    const vm = new Vue({
        el: '#root',
        data: {
            student: {
                name: 'å¼ ä¸‰',
                age: 18,
                hobby: ['æŠ½çƒŸ', 'å–é…’', 'çƒ«å¤´'],
                friends: [
                    { name: 'jerry', age: 35 },
                    { name: 'tony', age: 36 }
                ]
            }
        }
    });
</script>

```

å±•ç¤ºä¿¡æ¯å¦‚ä¸‹ï¼š

![](https://i-blog.csdnimg.cn/blog_migrate/490de2ff1175dee89ce95f4d9ac7a401.png)

æ¥ä¸‹æ¥ï¼Œä¸ºäº†æ–¹ä¾¿æ¼”ç¤ºï¼Œæˆ‘ä»¬ç›´æ¥æ¥åˆ°æ§åˆ¶å°è¿›è¡Œæ“ä½œï¼š

1.  ç›´æ¥ä¿®æ”¹ student ä¸­ name å€¼ï¼Œè§‚å¯Ÿæ˜¯å¦ä¼šå¼•èµ·å“åº”
    
    ```
    vm.student.name = 'æå››'
    // æˆ–è€…
    vm._data.student.name = 'æå››'
    
    ```
    
    ç»“è®ºï¼šæ•°æ®å‘ç”Ÿå“åº”ï¼Œé¡µé¢å†…å®¹å‘ç”Ÿå˜åŒ–ï¼Œè¯´æ˜å¯¹äºå¯¹è±¡ï¼Œåˆå§‹åŒ–æ—¶å°±æ·»åŠ çš„å±æ€§ï¼ŒVue ä¼šä¸ºå…¶åšå“åº”å¼ï¼Œå³æ·»åŠ  getter å’Œ setter
    
2.  åˆ›å»º stuednt ä¸­åŸæœ¬ä¸å­˜åœ¨çš„å±æ€§å€¼ gender
    
    ```
    vm.student.gender = 'ç”·'
    
    ```
    
    è™½ç„¶å®é™…å€¼å‘ç”Ÿæ”¹å˜ï¼Œä½†é¡µé¢ä¸ºå¾—åˆ°å“åº”ï¼Œåæ·»åŠ çš„å±æ€§ï¼ŒVue ä¸åšå“åº”
    
3.  è§£å†³ gender æœªå¾—åˆ°å“åº”çš„è§£å†³æ–¹æ³•
    
    ```
    // å†™æ³•1
    vm.$set(vm.student, 'gender', 'ç”·')
    // å†™æ³•2
    Vue.set(vm.student, 'gender', 'ç”·')
    
    ```
    
    > âš ï¸`Vue.set()` æ–¹æ³•ä¸èƒ½ç»™ vm æˆ– vm çš„æ ¹å±æ€§æ·»åŠ å“åº”å¼å±æ€§ï¼Œå¦åˆ™å°±ä¼šæŠ¥é”™ï¼š
    > 
    > ![](https://i-blog.csdnimg.cn/blog_migrate/5fca5ecdaee8d466f4d69860c0d200f8.png)
    
4.  ä¿®æ”¹ student.hobby é‡Œé¢çš„æ•°ç»„å…ƒç´  hobby[0]
    
    ```
    vm.student.hobby[0] = 'å­¦ä¹ '
    
    ```
    
    æœªå¾—åˆ°å“åº”ï¼Œå› ä¸ºæ•°ç»„ä¸­å¿…é¡»é€šè¿‡ Vue åŒ…è£…çš„æ–¹æ³•è¿›è¡Œä¿®æ”¹
    
5.  ä¿®æ”¹ hobby[0] è°ƒæ•´æ–¹å¼
    
    ```
    vm.student.hobby.splice(0,1,'å­¦ä¹ ') // å°† splice(start, deleteLength, replace_val)
    // åˆ é™¤ç¬¬ä¸€ä¸ªå°±æ˜¯ç”¨ unshiftï¼Œåˆ é™¤æœ€åä¸€ä¸ªä½¿ç”¨ pop,è¿½åŠ ä½¿ç”¨ pushï¼Œæ›¿æ¢å°±ä½¿ç”¨ splice
    
    ```
    
6.  å¦‚æœæˆ‘ä»¬æƒ³è¦æ›¿æ¢æ•°ç»„ï¼ŒåŒæ—¶æ­é…æœªè¢«ä¾¦å¬çš„æ•°ç»„æ–¹æ³•ï¼Œä¾‹å¦‚`filter()`ã€`concat()` å’Œ `slice()`ï¼Œä»–ä»¬**ä¸ä¼šå˜æ›´åŸå§‹æ•°ç»„ï¼Œè€Œæ˜¯æ›¿æ¢åŸå§‹æ•°ç»„**ï¼Œå¯ä»¥ä½¿ç”¨å¦‚ä¸‹æ–¹æ³•ï¼š
    
    ```
    example1.items = example1.items.filter(function (item) {
      return item.message.match(/Foo/)
    })
    
    ```
    
7.  å¦‚æœæ•°ç»„ä¸­çš„å…ƒç´ æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼ŒVue ä¹Ÿä¼šç»™æ•°ç»„ä¸­çš„å¯¹è±¡å®æ–½ç›‘è§†
    

### 3.6 æ”¶é›†è¡¨å•æ•°æ®

1.  type = â€œtextâ€ï¼Œåˆ™ v-model æ”¶é›†çš„æ˜¯ value å€¼
    
2.  type = â€œradioâ€ï¼Œåˆ™ v-model æ”¶é›†çš„æ˜¯ value å€¼ï¼Œå¹¶ä¸”æˆ‘ä»¬è¦ç»™æ ‡ç­¾é…ç½® value å€¼ï¼Œå¦åˆ™æ— è®ºé€‰æ‹©é‚£ä¸ªå•é€‰æ¡†ï¼Œå¾—åˆ°çš„ value å€¼éƒ½æ˜¯ null
    
3.  type = â€œcheckboxâ€ï¼Œè¿™ä¸ªæœ‰æ¯”è¾ƒå¤šçš„è®²ç©¶
    
    *   æ²¡æœ‰é…ç½® value
        *   é‚£ä¹ˆæ”¶é›†çš„å°±æ˜¯ checkedï¼ˆtrue or falseï¼‰
    *   é…ç½® value
        *   v-model (å³ value) çš„åˆå§‹å€¼æ˜¯éæ•°ç»„ï¼ˆä¾‹å¦‚ç©ºå­—ç¬¦ï¼‰ï¼Œé‚£ä¹ˆæ”¶é›†çš„å°±æ˜¯ checked(ï¼ˆå¸ƒå°”å€¼ï¼‰ï¼Œç‚¹å‡»ä»»æ„ä¸€ä¸ªå¤é€‰æ¡†ï¼Œå…¶ä»–å¤é€‰æ¡†ä¹Ÿä¼šå“åº”ï¼Œå¤„äºé€‰ä¸­çŠ¶æ€
        *   v-model çš„åˆå§‹å€¼ä¸ºæ•°ç»„ï¼Œé‚£ä¹ˆæ”¶é›†çš„å°±æ˜¯ value ç»„æˆçš„æ•°ç»„ï¼ˆè¿™ç§æ–¹æ³•å¯ä»¥å®ç°éœ€æ±‚ï¼‰
4.  å¯¹äºå…¶ä»–çš„è¡¨å•å…ƒç´ ï¼Œä¾‹å¦‚ selectâ€¦option å’Œ textareaï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥ä¸ºå…¶é…ç½® v-modelï¼Œv-model æ”¶é›†çš„å°±æ˜¯ value çš„å€¼
    
5.  v-model çš„ä¸‰ä¸ªä¿®é¥°ç¬¦ï¼š
    
    1.  lazyï¼šå¤±å»ç„¦ç‚¹å†æ”¶é›†æ•°æ®ï¼Œä½¿ç”¨åœºæ™¯ï¼šåœ¨ textarea ä¸­è¾“å…¥çš„æ–‡æœ¬ä¼—å¤šï¼ŒVue ä¸­å“åº”æ•æ„Ÿï¼Œæ¯ä¸€æ¬¡å¢åˆ æ”¹éƒ½ä¼šå¼•èµ·å“åº”ï¼Œå½±å“æ€§èƒ½ï¼Œä½¿ç”¨ lazy ä¿®é¥°ç¬¦å¯ä»¥å‡å°‘å“åº”æ¬¡æ•°ï¼Œæé«˜æ€§èƒ½
    2.  numberï¼šè¾“å…¥çš„å­—ç¬¦ä¸²è½¬ä¸ºæœ‰æ•ˆçš„æ•°å­—ï¼Œå¸¸å’Œ input é‡Œé¢çš„ type=â€œnumberâ€ æ­é…ä½¿ç”¨ï¼ˆtype = â€œnumberâ€ ç”¨äºé™åˆ¶è¾“å…¥çš„å­—ç¬¦å°¾æ•°å­—ç±»å‹ï¼Œv-model.number ç”¨äºå°†å­—ç¬¦ä¸²è½¬æ¢ä¸ºæ•°å­—ï¼‰
    3.  trimï¼šé¦–å°¾ç©ºæ ¼è¿‡æ»¤ï¼Œè¯¥ä¿®é¥°ç¬¦æ¯”è¾ƒä½¿ç”¨ï¼Œå°¤å…¶æ˜¯åœ¨æœç´¢æ¡†ä¸­æœç´¢å…³é”®å­—ä¸­ä½¿ç”¨è¾ƒå¤š

### 3.7 è¿‡æ»¤å™¨

å®šä¹‰ï¼šè¿‡æ»¤å™¨æ˜¯å¯¹è¦æ˜¾ç¤ºçš„æ•°æ®è¿›è¡Œæ ¼å¼åŒ–åå†æ˜¾ç¤ºï¼ˆé€‚ç”¨äºä¸€äº›ç®€å•é€»è¾‘çš„å¤„ç†ï¼‰

è¯­æ³•æ ¼å¼å¦‚ä¸‹ï¼š

```
// 1. æ³¨å†Œè¿‡æ»¤å™¨
Vue.filter(name, callback)
// æˆ–è€…
new Vue(filter: {})

// 2. ä½¿ç”¨è¿‡æ»¤å™¨
{{ xxx | è¿‡æ»¤å™¨å}}
// æˆ–è€…
v-bind:å±æ€§ = 'xxx | è¿‡æ»¤å™¨å'

```

**æ¡ˆä¾‹ï¼šæ ¼å¼åŒ–æ—¶é—´**

ä¸ºäº†æ›´å¥½åœ°è¿›è¡Œæ¼”ç¤ºï¼Œæˆ‘ä»¬æ¥ä¸‹æ¥éœ€è¦å» [BootCDN](https://www.bootcdn.cn/) å»ä¸‹è½½ç›¸å…³æ–¹æ³•çš„åŒ…ï¼Œæœç´¢ã€dayjsã€‘è¿›è¡Œä¸‹è½½å¹¶å¯¼å…¥ï¼š

![](https://i-blog.csdnimg.cn/blog_migrate/43958264ac570ba1dc583ccf261b92b7.png)

ä»£ç å¦‚ä¸‹ï¼š

```
<div id="root">
    <h1>ç°åœ¨æ—¶é—´æ˜¯ï¼š{{time | getFmtTime}}</h1>
</div>
<script>
    const vm = new Vue({
        el:'#root',
        data:{
            time:Date.now()
        },
        filters:{
            getFmtTime(value) { // value æ˜¯è¢«è¿‡æ»¤å‡ºæ¥çš„æ•°æ®
                return dayjs(value).format('YYYYå¹´MMæœˆDDæ—¥ HH:mm:ss');
            }
        }
    })
</script>

```

æ˜¾ç¤ºç»“æœå¦‚ä¸‹ï¼š

![](https://i-blog.csdnimg.cn/blog_migrate/ffcc1ac82dd615b3656a86983f40e23c.png)

ğŸ””æ‰©å±• 1ï¼š**è¿‡æ»¤å™¨ä¸­è¿˜å¯ä»¥ä¼ å…¥å¤šä¸ªå‚æ•°**

```
<h1>ç°åœ¨æ—¶é—´æ˜¯ï¼š{{time | getFmtTime('YYYYå¹´MMæœˆDDæ—¥ HH:mm:ss')}}</h1>

```

```
getFmtTime(value, str) { 
    return dayjs(value).format(str);
}

```

> è¿™é‡Œç¬¬ä¸€ä¸ªå‚æ•°ä¸ºè¿‡æ»¤å‡ºæ¥ä¼ å…¥çš„æ•°æ®ï¼Œç¬¬äºŒä¸ªå‚æ•°åˆ™ä¸ºè¿‡æ»¤å™¨ä¸­çš„ä¼ å…¥çš„å‚æ•°

ğŸ””æ‰©å±• 2ï¼š**è®¾ç½®å¤šä¸ªè¿‡æ»¤å™¨**

```
<h1>ç°åœ¨æ—¶é—´æ˜¯ï¼š{{time | getFmtTime('YYYYå¹´MMæœˆDDæ—¥ HH:mm:ss') | mySlice}}</h1>

```

```
filters:{
    getFmtTime(value, str) { 
        return dayjs(value).format(str);
    },
    mySlice(value) { 
        return value.slice(0,4)
}

```

æ•ˆæœå¦‚ä¸‹ï¼š

![](https://i-blog.csdnimg.cn/blog_migrate/a8a36ea7d98d29586cfca604dcfa6120.png)

ğŸ””æ‰©å±• 3ï¼š**è®¾ç½®å…¨å±€è¿‡æ»¤å™¨**

ä¹‹å‰æˆ‘ä»¬è®¾ç½®çš„è¿‡æ»¤å™¨éƒ½æ˜¯åœ¨ Vue å®ä¾‹å¯¹è±¡çš„ filters ä¸Šï¼Œè¿™æ ·è®¾ç½®çš„è¿‡æ»¤å™¨æ˜¯å±€éƒ¨è¿‡æ»¤å™¨ä¸­ç”Ÿæ•ˆï¼Œåœ¨å…¶ä»– vm ä¸­ä¸èµ·æ•ˆæœï¼Œå¦‚æœæˆ‘ä»¬æƒ³è¦è®¾ç½®å…¨å±€è¿‡æ»¤å™¨ï¼Œå¯ä»¥å¦‚ä¸‹è®¾ç½®ï¼š

```
Vue.filter('mySlice', (value) => {
    return value.slice(0, 4)
})

```

4 å†…ç½®æŒ‡ä»¤å’Œè‡ªå®šä¹‰æŒ‡ä»¤
------------

### 4.1 v-text

`v-text`æŒ‡ä»¤çš„ä½œç”¨æ˜¯ç”¨æ¥å‘å…¶æ‰€åœ¨çš„èŠ‚ç‚¹ä¸­æ¸²æŸ“æ–‡æœ¬å†…å®¹

ğŸŒ¿`v-text` å’Œ æ’å€¼è¯­æ³•çš„åŒºåˆ«åœ¨äºï¼š`v-text` ä¼šæ›¿æ¢æ‰èŠ‚ç‚¹ä¸­çš„æ–‡æœ¬å†…å®¹ï¼Œè€Œæ’å€¼è¯­æ³•ä¸ä¼š

```
<h2 v-text="name">æˆ‘ä¸å¥½</h2>

```

```
data:{
    name:'ä½ å¥½å‘€'
}

```

**æ•ˆæœå›¾å¦‚ä¸‹ï¼š**

![](https://i-blog.csdnimg.cn/blog_migrate/a15147afb1a3cd33e10dc66392fd2fd0.png)

æˆ‘ä»¬å°±æ’å€¼è¯­æ³•æ˜¾å¾—æ›´åŠ çµæ´»ï¼Œå› ä¸ºä½¿ç”¨æ’å€¼è¯­æ³•å¯ä»¥å®ç°é¢„ç½®æ–‡æœ¬å’Œæ¸²æŸ“æ–‡æœ¬åŒæ—¶æ˜¾ç¤º

```
<h2>{{name}},æˆ‘ä¸å¥½</h2>

```

âš ï¸æ³¨æ„ï¼š`v-text`çš„å€¼åªèƒ½åœ¨ä» vm è°ƒç”¨è¿‡æ¥ä½¿ç”¨ï¼Œä¸èƒ½ç›´æ¥åœ¨é¡µé¢ä¸­æ¸²æŸ“ä½¿ç”¨ï¼Œä¾‹å¦‚ï¼š

```
<h2 v-text="ä½ å¥½å‘€">æˆ‘ä¸å¥½</h2>

```

**æŠ¥é”™å¦‚ä¸‹ï¼š**

![](https://i-blog.csdnimg.cn/blog_migrate/f0596c7805e8f1d0fd55ba43fd93d7c3.png)

### 4.2 v-html

`v-html`æŒ‡ä»¤çš„ä½œç”¨ï¼šå‘æŒ‡å®šèŠ‚ç‚¹ä¸­æ¸²æŸ“åŒ…å« html ç»“æ„çš„å†…å®¹

ä¸æ’å€¼è¯­æ³•å’Œ`v-text`çš„åŒºåˆ«ï¼š

1.  `v-html`ä¼šæ›¿æ¢æ‰èŠ‚ç‚¹ä¸­æ‰€æœ‰çš„å†…å®¹ï¼Œè€Œæ’å€¼è¯­æ³•å’Œ`v-text`ä¸ä¼š
2.  `v-html`å¯ä»¥è¯†åˆ« html ç»“æ„

âš ï¸æ³¨æ„ï¼š

1.  åœ¨ç½‘ç«™ä¸ŠåŠ¨æ€æ¸²æŸ“ä»»æ„çš„ HTML æ˜¯éå¸¸å±é™©çš„è¡Œä¸ºï¼Œå®¹æ˜“å¯¼è‡´ XXS æ”»å‡»ï¼ˆCross Site Scriptingï¼‰
2.  ä¸€å®šè¦åœ¨å¯ä¿¡çš„å†…å®¹ä¸Šä½¿ç”¨ `v-html`ï¼Œæ°¸è¿œä¸è¦ç”¨åœ¨ç”¨æˆ·æäº¤çš„å†…å®¹ä¸Š

åœ¨è¯´æ˜å­˜åœ¨ä»€ä¹ˆå®‰å…¨éšæ‚£ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆéœ€è¦äº†è§£ cookie çš„è¿è¡ŒåŸç†ï¼ŒåŸç†å›¾å¦‚ä¸‹ï¼š

![](https://i-blog.csdnimg.cn/blog_migrate/cd8d27622447dea2a2a5b57acc7e1c39.png)

åŒæ—¶ï¼Œcookie æ˜¯ä¸èƒ½è·¨æµè§ˆå™¨ä½¿ç”¨çš„

![](https://i-blog.csdnimg.cn/blog_migrate/ab13fb6633aeda9f354afcab9f418545.png)

æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å‡è®¾ç™¾åº¦ï¼ˆhttps://www.baidu.comï¼‰æ˜¯æˆ‘ä»¬æƒ³è¦æ”¶é›†å…¶ä»–äºº cookie çš„æ‰€å‡†å¤‡çš„æœåŠ¡å™¨ï¼Œæ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å¯ä»¥åˆ©ç”¨å¦‚ä¸‹ä»£ç å»å°†ä»–ä»¬æµè§ˆå™¨ä¸­çš„ cookie å‘é€åˆ°è‡ªå·±çš„æœåŠ¡å™¨ä¸­è¿›è¡Œçªƒå–ç”¨æˆ·ä¿¡æ¯ï¼š

åœ¨å‡†å¤‡ä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦åˆ©ç”¨ Cookie Editor æ’ä»¶æ¥åˆ é™¤æµ‹è¯•é¡µé¢çš„ cookieï¼Œå¹¶æ·»åŠ è‡ªå®šä¹‰çš„æ— æ„ä¹‰çš„ cookie

```
<div id="root">
    <div v-html="str"></div>
</div>
<script>
    new Vue({
        el: '#root',
        data: {
            str: `<a href="javascript:location.href ='http://www.baidu.com?cookie='+document.cookie">å…„å¼Ÿï¼Œè¿™é‡Œæœ‰ä½ æƒ³è¦çš„èµ„æº</a>`
        }
    })
</script>

```

æ•ˆæœå¦‚ä¸‹ï¼š

![](https://i-blog.csdnimg.cn/blog_migrate/7b99472cfb1d6bf18bb5543f5e5ede3b.png)

å½“æˆ‘ä»¬ä¸€ç‚¹å‡»ï¼Œå°±ä¼šå°†å½“å‰ç½‘é¡µçš„ cookie ä¼ å…¥åˆ°è®¾å®šå¥½çš„æœåŠ¡å™¨ä¸­ï¼š

![](https://i-blog.csdnimg.cn/blog_migrate/d35240dca108d331db2decedfba0fe38.png)

ä½†æ˜¯ï¼Œæµè§ˆå™¨ä¹Ÿè€ƒè™‘åˆ° document.cookie è·å– cookie è¿™äº›æ•æ„Ÿä¿¡æ¯å­˜åœ¨å®‰å…¨éšæ‚£ï¼Œæ‰€ä»¥å¯¹äºæŸäº› cookie ï¼Œæ·»åŠ äº† `HttpOnly:true`è¿™ä¸ªå±æ€§ï¼Œæˆ‘ä»¬é€šè¿‡ä¸€èˆ¬çš„ JS åè®®ï¼Œæ— æ³•è·å–è®¾ç½®äº†è¿™ä¸ªå‚æ•°çš„ cookie

### 4.3 v-cloak

`v-cloak`æŒ‡ä»¤æœ¬è´¨æ˜¯ä¸€ä¸ªç‰¹æ®Šå±æ€§ï¼ŒVue å®ä¾‹åˆ›å»ºå®Œæ¯•ä¹‹åå¹¶æ¥ç®¡å®¹å™¨ååˆ é™¤ `v-cloak`å±æ€§

ä½¿ç”¨æ–¹æ³•ï¼šæ­é… CSS è§£å†³ç½‘é€Ÿè¿‡æ…¢ï¼ŒVue å®ä¾‹ä¸èƒ½åŠæ—¶æ¸²æŸ“çš„é—®é¢˜

**demo**

```
/* css æ ·å¼ */
[v-cloak] {
    display: none;		/* åŒ¹é… v-cloak å±æ€§ï¼Œä½¿å…¶ä¸æ˜¾ç¤º*/
}

```

```
<div id="root">
    <div v-cloak>{{name}}</div>
</div>
<script>
    new Vue({
        el:'#root',
        data:{
            name:'å°šç¡…è°·'
        }
    })
</script>

```

å¦‚æœ Vue å®ä¾‹å†…å®¹è¿‡å¤šï¼ŒDOM ç»“æ„æ— æ³•å¾—åˆ°åŠæ—¶æ¸²æŸ“ï¼Œä¼šå‘ˆç°åŸå§‹å½¢å¼ï¼Œä¾‹å¦‚ â€œ{{name}}â€ è¿™ç§é”™è¯¯å½¢å¼ï¼Œä¸ºäº†é¿å…è¿™ç§æƒ…å†µï¼Œéœ€è¦åœ¨æœªåŠ è½½å®Œæˆä¹‹å‰å°±ä¸æ˜¾ç¤ºè¿™ç§é”™è¯¯å½¢å¼ï¼Œå¯ä»¥ä¸ºå…¶æ·»åŠ  `v-cloak` å±æ€§ï¼Œæ­é…ä¸Š CSS ä¸­çš„`display:none;`å°±å¯ä»¥å®ç°è¿™ç§éœ€æ±‚ï¼Œå¹¶ä¸”åœ¨ Vue åŠ è½½å®Œæˆä¹‹åï¼Œå›æ”¶ `v-cloak` ï¼Œåˆå¯ä»¥é‡æ–°æ˜¾ç¤ºå‡ºæ¥

### 4.4 v-once æŒ‡ä»¤

`v-once`æŒ‡ä»¤ä¼šä½¿å¾—èŠ‚ç‚¹åœ¨åˆæ¬¡åŠ¨æ€æ¸²æŸ“ä¹‹åï¼Œå°±è§†ä¸ºé™æ€å†…å®¹ï¼Œä»¥åæ•°æ®çš„æ”¹å˜ä¸ä¼šå¼•èµ·`v-once`æ‰€åœ¨ç»“æ„çš„æ›´æ–°ï¼Œå¯ä»¥ç”¨äºä¼˜åŒ–æ€§èƒ½

```
<div id="root">
    <h2 v-once>åˆå§‹åŒ–çš„å€¼ä¸ºï¼š{{n}}</h2>
    <h2>å½“å‰çš„å€¼ä¸ºï¼š{{n}}</h2>
    <button @click="n++">ç‚¹å‡»n+1</button>
</div>
<script>
    const vm = new Vue({
        el:'#root',
        data:{
            n:1
        },
    })
</script>

```

æ•ˆæœå›¾å¦‚ä¸‹ï¼š

![](https://i-blog.csdnimg.cn/blog_migrate/28b5b212a7a73a205816c1b7a731b328.png)

æ— è®ºæˆ‘ä»¬å¦‚ä½•ç‚¹å‡»ï¼Œåˆå§‹çš„å€¼å§‹ç»ˆä¸å˜

![](https://i-blog.csdnimg.cn/blog_migrate/b4de641ad6b69a602792d27058b18b74.png)

### 4.5 v-pre

`v-pre`æŒ‡ä»¤ç”¨äºè·³è¿‡å…¶æ‰€åœ¨èŠ‚ç‚¹çš„ç¼–è¯‘è¿‡ç¨‹ï¼Œå¯ä»¥åˆ©ç”¨å®ƒè·³è¿‡æ²¡æœ‰ä½¿ç”¨æŒ‡ä»¤è¯­æ³•å’Œæ’å€¼è¯­æ³•çš„èŠ‚ç‚¹ï¼Œå¯ä»¥åŠ å¿«ç¼–è¯‘é€Ÿåº¦

### 4.6 è‡ªå®šä¹‰æŒ‡ä»¤

æ¥ä¸‹æ¥æˆ‘ä»¬ç”¨ä¸¤ä¸ªéœ€æ±‚æ¥æ¨åŠ¨è‡ªå®šä¹‰æŒ‡ä»¤çš„ä½¿ç”¨

*   éœ€æ±‚ 1ï¼šå®šä¹‰ä¸€ä¸ª`v-big` çš„æŒ‡ä»¤ï¼ŒåŠŸèƒ½å’Œ`v-text`åŠŸèƒ½ç±»ä¼¼ï¼Œä½†ä¼šæŠŠç»‘å®šçš„æ•°å€¼æ”¾å¤§ 18 å€
*   éœ€æ±‚ 2ï¼šå®šä¹‰ä¸€ä¸ª`v-fbind`çš„æŒ‡ä»¤ï¼Œä½†æ˜¯å¯ä»¥è®©å…¶æ‰€ç»‘å®šçš„ input å…ƒç´ é»˜è®¤è·å–ç„¦ç‚¹ï¼ˆä¸€ä¸Šæ¥å°±å¯ä»¥è·å¾—ç„¦ç‚¹ï¼‰

```
<h2>å½“å‰çš„nå€¼æ˜¯ï¼š<span v-text="n"></span> </h2>
<h2>æ”¾å¤§10å€åçš„nå€¼æ˜¯ï¼š<span v-big="n"></span> </h2>

```

è¿™é‡Œå°±è¦ç”¨åˆ° directives è¿™ä¸ªé…ç½®é¡¹

```
// å‡½æ•°å¼
big(element, binding) {
    element.innerText = binding.value * 10;
    // element æŒ‡çš„æ˜¯ç»‘å®šå…ƒç´ çš„æ ‡ç­¾(åœ¨è¿™é‡Œä¸ºspan), binding ä¸ºç»‘å®šçš„å…ƒç´ ï¼Œbinding.value åœ¨è¿™é‡ŒæŒ‡çš„å°±æ˜¯ n
}

```

```
// å¯¹è±¡å¼
fbind:{
    // æŒ‡ä»¤ä¸å…ƒç´ æˆåŠŸç»‘å®šæ—¶ï¼Œè¿™æ—¶å€™åªæ˜¯ç”Ÿæˆè™šæ‹Ÿ DOM ï¼Œé¡µé¢ä¸­çš„çœŸå® DOM è¿˜æ²¡æœ‰æ¸²æŸ“å‡ºæ¥
    bind(element, binding) {
        element.value = binding.value;
    }, 
    // æŒ‡ä»¤æ‰€åœ¨å…ƒç´ è¢«æ’å…¥é¡µé¢æ—¶ï¼Œå…ƒç´ è·å–ç„¦ç‚¹
    inserted(element, binding) {
        element.focus();
    }, 
    // æŒ‡ä»¤æ‰€åœ¨æ¨¡æ¿è¢«é‡æ–°è§£æ
    update(element, binding) {
        element.value = binding.value;
    }
}

```

ğŸ“æ€»ç»“ï¼š

*   å‡½æ•°å¼è‡ªå®šä¹‰æŒ‡ä»¤ï¼šæŒ‡ä»¤å‡½æ•°è¢«è°ƒç”¨çš„æ—¶æœºåŒ…æ‹¬
    
    *   æŒ‡ä»¤ä¸å…ƒç´ æˆåŠŸç»‘å®šæ—¶
    *   æŒ‡ä»¤æ‰€åœ¨çš„æ¨¡æ¿è¢«é‡æ–°è§£ææ—¶
*   å¯¹è±¡å¼è‡ªå®šä¹‰æŒ‡ä»¤ï¼šé‡Œé¢çš„æ¯ä¸€æ¡æŒ‡ä»¤å‡½æ•°ä»£è¡¨è¢«è°ƒç”¨çš„æ—¶æœº
    
    *   `bind`å‡½æ•°ï¼šæŒ‡ä»¤ä¸å…ƒç´ æˆåŠŸç»‘å®šæ—¶
        
    *   `inserted`å‡½æ•°ï¼šæŒ‡ä»¤æ‰€åœ¨å…ƒç´ è¢«æ’å…¥é¡µé¢æ—¶
        
    *   `update`å‡½æ•°ï¼šæŒ‡ä»¤æ‰€åœ¨æ¨¡æ¿è¢«é‡æ–°è§£æ
        
*   å‡½æ•°å¼æŒ‡ä»¤å’Œå¯¹è±¡å¼æŒ‡ä»¤ç›¸è¾ƒèµ·æ¥ï¼Œå¯¹è±¡å¼æŒ‡ä»¤æ›´åŠ ç»†åŒ–ï¼Œå‡½æ•°å¼æŒ‡ä»¤åªæ˜¯`bind`å‡½æ•°å’Œ`update`å‡½æ•°çš„é›†åˆ
    

è¿™é‡Œå¯¹äºè·å–ç„¦ç‚¹çš„è¡Œä¸ºï¼Œæˆ‘ä»¬ä¸ºä»€ä¹ˆä¸ä½¿ç”¨å‡½æ•°å¼ï¼Œå°±æ˜¯å› ä¸ºå‡½æ•°å¼æ— æ³•ç»†åŒ–åˆ°ã€insertedã€‘è¿™ä¸ªæ—¶æœºï¼Œæˆ‘ä»¬ä¸€å¼€å§‹è¿˜æ²¡æœ‰å°†çœŸå®çš„ input æ¸²æŸ“åˆ° DOM ç»“æ„ä¸­ï¼Œå°±æ˜¯ç”¨ focus å‡½æ•°ï¼Œè·å¾—ç„¦ç‚¹çš„è¡Œä¸ºå°±æ— æ³•å¥æ•ˆ

### 4.7 è‡ªå®šä¹‰æŒ‡ä»¤è¯¯åŒº

1.  å‘½åé—®é¢˜ï¼š
    
    *   æŒ‡ä»¤å®šä¹‰æ—¶ä¸åŠ `v-`ï¼Œä½†æ˜¯åœ¨ä½¿ç”¨æ—¶éœ€è¦åŠ `v-`
    *   æŒ‡ä»¤åå¦‚æœæ˜¯ç”±å¤šä¸ªå•è¯ç»„æˆï¼Œéœ€è¦ä½¿ç”¨ kebab-caseï¼ˆçŸ­æ¨ªçº¿å¼å‘½åï¼‰çš„æ–¹å¼ï¼Œä¸è¦ä½¿ç”¨ camelCaseï¼ˆé©¼å³°å‘½åï¼‰çš„æ–¹æ³•
2.  æŒ‡ä»¤ä¸­é…ç½®é¡¹ï¼ˆé…ç½®å‡½æ•°ï¼‰çš„ this æŒ‡å‘é—®é¢˜
    
    *   æŒ‡ä»¤å‡½æ•°ä¸­ this æŒ‡å‘çš„ä¸æ˜¯ vmï¼Œè€Œæ˜¯ window é¡¶çº§å¯¹è±¡
3.  å…¨å±€æŒ‡ä»¤å’Œå±€éƒ¨æŒ‡ä»¤
    
    *   å±€éƒ¨æŒ‡ä»¤ï¼š
        
        ```
        new Vue({
        	directives:{æŒ‡ä»¤åï¼šé…ç½®å¯¹è±¡}
        })
        
        ```
        
    *   å…¨å±€æŒ‡ä»¤
        
        ```
        Vue.directive(æŒ‡ä»¤å, é…ç½®å¯¹è±¡ | å›è°ƒå‡½æ•°)
        
        ```
        

5 * ç”Ÿå‘½å‘¨æœŸ
--------

### 5.1 mounted

`mounted`çš„ç”¨æ³•ï¼šåœ¨ Vue å®Œæˆæ¨¡æ¿çš„è§£æå¹¶æŠŠåˆå§‹çš„çœŸå®çš„ DOM å…ƒç´ æ”¾å…¥é¡µé¢ä¹‹åï¼ˆæŒ‚è½½å®Œæ¯•ï¼‰è°ƒç”¨ `mounted`

ç¤ºä¾‹åº”ç”¨å¦‚ä¸‹ï¼š**ä¸ºæ–‡å­—è®¾ç½®ä¸€ä¸ªæ¸å˜çš„é€æ˜åº¦ä¸æ–­å˜åŒ–çš„å®šæ—¶å™¨**

```
<div id="root">
    <!-- å¯¹è±¡çš„ç®€å†™å½¢å¼ï¼Œopacity:opacity å¯ä»¥ç®€å†™ä¸º opacity -->
    <h1 :style="{opacity}">æ‚¨å¥½ï¼Œæ¬¢è¿æ‚¨</h1>    
</div>
<script>
    new Vue({
        el:'#root',
        data:{
            opacity:1
        },
        mounted(){
            setInterval(() => {
                this.opacity -= 0.01;
                if(this.opacity <= 0) this.opacity = 1;
            },16)
        }
    })
</script>

```

æ•ˆæœå›¾å¦‚ä¸‹ï¼š

![](https://i-blog.csdnimg.cn/blog_migrate/504affcf9b6d1d7e528f39084f7ec1e8.gif)

è¿™ä¸ª mounted å‡½æ•°å³ä¸ºç”Ÿå‘½å‘¨æœŸå‡½æ•°ï¼ˆæˆ–ç”Ÿå‘½å›è°ƒå‡½æ•°ã€é’©å­å‡½æ•°ï¼‰ï¼Œç”¨äºåœ¨ Vue ç‰¹æ®Šæ—¶æœŸå¸®åŠ©æˆ‘ä»¬æ‰§è¡Œä¸€äº›ç‰¹æ®Šçš„å‡½æ•°ï¼Œç”Ÿå‘½å‘¨æœŸå‡½æ•°çš„ç‰¹ç‚¹ï¼š

1.  ç”Ÿå‘½å‘¨æœŸå‡½æ•°çš„åå­—ä¸å¯æ›´æ”¹ï¼Œä½†æ˜¯å‡½æ•°çš„å…·ä½“å†…å®¹æ˜¯ç¨‹åºå‘˜æ ¹æ®éœ€æ±‚ç¼–å†™çš„
2.  ç”Ÿå‘½å‘¨æœŸå‡½æ•°ä¸­çš„ this æŒ‡å‘çš„æ˜¯ vm æˆ– ç»„ä»¶å®ä¾‹å¯¹è±¡

åœ¨å®˜ç½‘ï¼Œå¯¹ç”Ÿå‘½å‘¨æœŸå‡½æ•°æœ‰ä¸€ä¸ªå®Œæ•´çš„æµç¨‹å›¾ï¼Œå¦‚ä¸‹ï¼š

![](https://i-blog.csdnimg.cn/blog_migrate/09b3a14d49c6536e177d9b061147fd67.png)

### 5.2 æŒ‚è½½æµç¨‹

**`beforeCreate` å‡½æ•°**

```
beforeCreate() {
    console.log('beforeCreate');
    console.log(this);
    debugger;			// è®¾ç½®æ–­ç‚¹
}

```

é€šè¿‡è§‚å¯Ÿï¼Œæ‰“å°å‡ºæ¥çš„ vm èº«ä¸Šæ²¡æœ‰ data ä¸­æ•°æ®å’Œ methods ä¸­æ–¹æ³•

**`created`å‡½æ•°**

```
created() {
    console.log('created');
    console.log(this);
    debugger;			// è®¾ç½®æ–­ç‚¹
}

```

**innerHTML å’Œ outerHTML**

![](https://i-blog.csdnimg.cn/blog_migrate/1b5aef10bf721f17fec0250d3349088e.png)

Vue åœ¨ç¼–è¯‘è§£æé˜¶æ®µï¼Œç¼–è¯‘çš„æ˜¯ outerHTML

**`beforeMount` å‡½æ•°**

```
beforeMount() {
    console.log('beforeMount');
    console.log(this);
    debugger;
}

```

æ­¤é˜¶æ®µï¼Œä»…ä»…ç”Ÿæˆäº†è™šæ‹Ÿ DOM ï¼Œä½†æ˜¯é¡µé¢å‘ˆç°çš„æ˜¯æœªç»ç¼–è¯‘çš„ DOM

![](https://i-blog.csdnimg.cn/blog_migrate/a0936833df845332e042bd38b0d610fe.png)

**`mounted`å‡½æ•°**

å½“ Vue å°†å†…å­˜ä¸­çš„è™šæ‹Ÿ DOM è½¬æ¢ä¸ºçœŸå® DOM å¹¶æ’å…¥åˆ°é¡µé¢ä¹‹åï¼Œè¿™ä¸ª `mounted` å¼€å§‹ç”Ÿæ•ˆï¼Œåœ¨æ­¤é˜¶æ®µæ‰§è¡Œçš„ DOM æ“ä½œæœ‰æ•ˆ

åœ¨ `mounted` å‡½æ•°ä¹‹å‰çš„è§£ææ¨¡æ¿é˜¶æ®µè¿˜æœ‰ä¸¤æ¡åˆ†æ”¯çº¿ï¼Œå¦‚ä¸‹

![](https://i-blog.csdnimg.cn/blog_migrate/68dc3ecc22bfa8470002a988ba9e4baf.png)

*   å‰é¢ä¸€æ¡åˆ†æ”¯ï¼šå¦‚æœæˆ‘ä»¬åœ¨ vm å®ä¾‹ä¸­æœªå£°æ˜ el ç»‘å®šçš„å…·ä½“ DOMï¼Œé‚£ä¹ˆ Vue å°±ä¼šåˆ¤æ–­æˆ‘ä»¬æœ‰æ²¡æœ‰è®¾ç½® `vm.$mount(el)`ï¼Œå¦‚æœæœ‰åˆ™ç»§ç»­å¾€ä¸‹æ‰§è¡Œ
    
*   åé¢ä¸€æ¡åˆ†æ”¯ï¼šä½¿ç”¨ template è§£ææ¨¡æ¿å­—ç¬¦ä¸²
    
    ```
    template: `
    <div>
        <h1>ç”Ÿå‘½å‘¨æœŸ</h1>
        <h2>å½“å‰å€¼ä¸º:{{n}}</h2>
    </div>`
    
    ```
    
    > ğŸ”ºæ³¨æ„ï¼šä½¿ç”¨ template ï¼Œé‡Œé¢æ¨¡æ¿å­—ç¬¦ä¸²åªèƒ½æœ‰ä¸€ä¸ªæ ¹èŠ‚ç‚¹ï¼Œå¹¶ä¸”ä¼šå°†åŸæ¥çš„æ¨¡æ¿å­—ç¬¦ä¸²ç»™æ›¿æ¢æ‰
    

**é™„ï¼š**

1.  ç”±äº template æ˜¯ä¸€ä¸ªä¸æ˜¾ç¤ºæ ‡ç­¾ï¼Œæ‰€ä»¥ï¼Œæˆ‘ä»¬åœ¨ template æ¨¡æ¿å±æ€§ä¸­ä¸èƒ½ä½¿ç”¨ template ä½œä¸ºæ ¹èŠ‚ç‚¹
2.  è™šæ‹Ÿ DOM è½¬åŒ–ä¸ºçœŸå® DOM è¿‡ç¨‹ä¸­ï¼Œä¼šå°† DOM å¤åˆ¶ä¸€ä»½åœ¨ `vm.$el`ä¸­ï¼Œä»¥ä¾¿ä½¿ç”¨ Diff ç®—æ³•è¿›è¡Œå¤ç”¨

### 5.3 æ›´æ–°æµç¨‹

**`beforeUpdate`**

åœ¨æ­¤é˜¶æ®µï¼Œæ•°æ®æ˜¯æ–°çš„ï¼Œä½†æ˜¯é¡µé¢ä»ç„¶æ˜¯æ—§çš„ï¼Œä¹Ÿå°±æ˜¯é¡µé¢å°šæœªå’Œæ•°æ®ä¿æŒä¸€è‡´

**`updated`**

åœ¨æ­¤é˜¶æ®µï¼Œæ•°æ®æ˜¯æ–°çš„ï¼Œé¡µé¢ä¹Ÿæ˜¯æ–°çš„

### 5.4 é”€æ¯æµç¨‹

å½“ `vm.$destroy()`è¢«è°ƒç”¨ä¹‹åï¼Œç”Ÿå‘½å‘¨æœŸå°±è¿›è¡Œäº†é”€æ¯é˜¶æ®µ

> è¿™ä¼šå®Œå…¨é”€æ¯ä¸€ä¸ªå®ä¾‹ï¼Œæ¸…ç†å®ƒä¸å…¶å®ƒå®ä¾‹çš„è¿æ¥ï¼Œè§£ç»‘å®ƒçš„å…¨éƒ¨æŒ‡ä»¤åŠäº‹ä»¶ç›‘å¬å™¨ï¼ˆè¿™é‡Œçš„äº‹ä»¶ç›‘å¬å™¨æŒ‡çš„æ˜¯è‡ªå®šä¹‰äº‹ä»¶ï¼Œä¸åŒ…æ‹¬åŸç”Ÿ JS äº‹ä»¶ï¼‰

é”€æ¯æµç¨‹ä¹ŸåŒ…ä¸¤ä¸ªé˜¶æ®µï¼š`beforeDestroy` å’Œ `destroyed`

åœ¨ `beforeDestroy` é˜¶æ®µï¼Œæˆ‘ä»¬å¯ä»¥è·å– dataã€methodsã€æŒ‡ä»¤ç­‰ç­‰ï¼Œä½†æ˜¯**å¯¹å…¶åšå‡ºçš„ä»»ä½•ä¿®æ”¹éƒ½ä¸ä¼šå¼•èµ·å“åº”**ï¼Œåœ¨è¿™ä¹‹åä¼šé”€æ¯æ‰€æœ‰çš„ç›‘è§†å±æ€§ã€ç»„ä»¶å’Œäº‹ä»¶ç›‘å¬å™¨ç­‰ç­‰ï¼Œæœ€ååˆ°è¾¾ `destroyed` é”€æ¯å®Œæˆé˜¶æ®µ

### 5.4 ç”Ÿå‘½å‘¨æœŸæ€»ç»“

ç”Ÿå‘½å‘¨æœŸå‡½æ•°ï¼ˆä¹Ÿå³é’©å­å‡½æ•°ï¼‰ä¸€å…±æœ‰ 11 ä¸ªï¼Œå…¶ä¸­ 3 ä¸ªéœ€è¦åœ¨ç‰¹æ®Šæƒ…å†µä¸‹æ‰ä¼šè§¦å‘ï¼Œå¦å¤– 8 ä¸ªæ„æˆ 4 å¯¹

å››å¯¹é’©å­å‡½æ•° åˆ›å»º æŒ‚è½½ æ›´æ–° é”€æ¯ å°†è¦åˆ›å»º: beforeCreate åˆ›å»ºå®Œæˆ: created å°†è¦æŒ‚è½½: beforeMount æŒ‚è½½å®Œæˆ: mounted å°†è¦æ›´æ–°: beforeUpdate æ›´æ–°å®Œæˆ: updated å°†è¦é”€æ¯: beforeDestroy é”€æ¯å®Œæˆ: destroyed

**ç¤ºä¾‹ï¼šé€šè¿‡é’©å­å‡½æ•°å®Œæˆå¯¹å®šæ—¶å™¨çš„é”€æ¯**

```
<div id="root">
    <h1 :style="{opacity}">ç”Ÿå‘½å‘¨æœŸ</h1>
    <button @click="stop">åœæ­¢æ”¹å˜é€æ˜åº¦</button>
</div>
<script>
    const vm = new Vue({
        el:'#root',
        data:{
            opacity: 1,
        },
        mounted() {
            this.timer = setInterval(() => {
                this.opacity -= 0.01;
                if (this.opacity <= 0) this.opacity = 1;  
                console.log(111);
            }, 20)
        },
        methods:{
            stop(){
                // clearInter(this.timer)
                this.$destroy();
            }    
        },
        beforeDestroy() {
            clearInterval(this.timer);
        },
    })
</script>

```

æ•ˆæœå›¾å¦‚ä¸‹ï¼š

![](https://i-blog.csdnimg.cn/blog_migrate/ade61a6069ca0742e7b0622da6d4693d.gif)

6 ç»„ä»¶
----

### 6.1 æ¨¡å—ä¸ç»„ä»¶ã€æ¨¡å—åŒ–ä¸[ç»„ä»¶åŒ–](https://so.csdn.net/so/search?q=%E7%BB%84%E4%BB%B6%E5%8C%96&spm=1001.2101.3001.7020)

**ä¼ ç»Ÿæ–¹å¼ç¼–å†™åº”ç”¨å­˜åœ¨çš„ç¼ºç‚¹**

![](https://i-blog.csdnimg.cn/blog_migrate/c85fd22c3700e32f15a7ae59aa463c3c.png)

1.  ä¾èµ–å…³ç³»æ··ä¹±ï¼Œä¸å¥½ç»´æŠ¤
2.  ä»£ç å¤ç”¨ç‡ä½

**ä½¿ç”¨ç»„ä»¶æ–¹å¼ç¼–å†™åº”ç”¨**

![](https://i-blog.csdnimg.cn/blog_migrate/70315a864375a341aa9925022cfff148.png)

ç»„ä»¶çš„å®šä¹‰ï¼šå®ç°åº”ç”¨ä¸­**å±€éƒ¨**åŠŸèƒ½**ä»£ç **å’Œ**èµ„æº**çš„**é›†åˆ**

![](https://i-blog.csdnimg.cn/blog_migrate/07063d5cefd8db7f5473f656be131491.png)

*   æ¨¡å—åŒ–ï¼šå½“åº”ç”¨ä¸­ JS éƒ½ä»¥æ¨¡å—æ¥ç¼–å†™çš„ï¼Œé‚£ä¹ˆè¿™ä¸ªåº”ç”¨å°±æ˜¯ä¸€ä¸ªæ¨¡å—åŒ–çš„åº”ç”¨
*   ç»„ä»¶åŒ–ï¼šå½“åº”ç”¨ä¸­çš„ JS éƒ½ä»¥ç»„ä»¶æ¥ç¼–å†™çš„ï¼Œé‚£ä¹ˆè¿™ä¸ªåº”ç”¨å°±æ˜¯ä¸€ä¸ªç»„ä»¶åŒ–çš„åº”ç”¨

### 6.2 éå•æ–‡ä»¶ç»„ä»¶

*   éå•æ–‡ä»¶ç»„ä»¶ï¼šä¸€ä¸ªæ–‡ä»¶ä¸­åŒ…å«æœ‰ n ä¸ªç»„ä»¶
*   å•æ–‡ä»¶ç»„ä»¶ï¼šä¸€ä¸ªæ–‡ä»¶ä¸­åªåŒ…å« 1 ä¸ªç»„ä»¶

æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬ä»‹ç»éå•æ–‡ä»¶ç»„ä»¶ï¼Œä½†æˆ‘ä»¬è¦çŸ¥é“ï¼Œå®é™…å¼€å‘è¿‡ç¨‹ä¸­ï¼Œå•æ–‡ä»¶ç»„ä»¶ç”¨çš„å¤š

Vue ä¸­ä½¿ç”¨ç»„ä»¶çš„ä¸‰å¤§æ­¥éª¤ï¼š

1.  å®šä¹‰ç»„ä»¶
2.  æ³¨å†Œç»„ä»¶
3.  ä½¿ç”¨ç»„ä»¶

**å®šä¹‰ç»„ä»¶**

ä½¿ç”¨ Vue.extend(options) åˆ›å»ºï¼Œå…¶ä¸­ options å’Œä½¿ç”¨ new Vue(options) çš„ options åŸºæœ¬ä¸€æ ·ï¼Œä½†æ˜¯æœ‰å¦‚ä¸‹åŒºåˆ«ï¼š

1.  æ²¡æœ‰ç»‘å®šå®¹å™¨ï¼Œå³æ—  el â€”â€” æœ€ç»ˆæ‰€æœ‰çš„ç»„ä»¶éƒ½è¦ç»è¿‡ä¸€ä¸ª vm çš„ç®¡ç†ï¼Œç”± vm ä¸­çš„ el å†³å®šä½¿ç”¨é‚£ä¸ªå®¹å™¨
2.  data å¿…é¡»å†™æˆå‡½æ•° â€”â€” é¿å…ç»„ä»¶å¤ç”¨æ—¶ï¼Œæ•°æ®å­˜åœ¨å¼•ç”¨å…³ç³»

> å¤‡æ³¨ï¼šä½¿ç”¨ template å¯ä»¥é…ç½®ç»„ä»¶ç»“æ„

**æ³¨å†Œç»„ä»¶**

1.  å±€éƒ¨æ³¨å†Œï¼šåœ¨ vm ä¸­ä¼ å…¥ components é€‰é¡¹
2.  å…¨å±€æ³¨å†Œï¼šä½¿ç”¨`Vue.component('ç»„ä»¶å', ç»„ä»¶)`

**ä½¿ç”¨ç»„ä»¶**

ç›´æ¥åœ¨ HTML ç»“æ„ä¸­ï¼Œä½¿ç”¨ç»„ä»¶æ ‡ç­¾

**å±€éƒ¨ç»„ä»¶**

```
<div id="root">
    <!-- ä½¿ç”¨ç»„ä»¶ -->
    <school></school>
</div>
<script>
    // 1. åˆ›å»ºç»„ä»¶
    const school = Vue.extend({
        template:`
        <div>
            <h2>å­¦æ ¡åç§°ï¼š{{schoolName}}</h2>
            <h2>å­¦æ ¡åœ°å€ï¼š{{address}}</h2>
        </div>
        `,
        data() {
            return {
                schoolName:'å°šç¡…è°·',
                address:'åŒ—äº¬æ˜Œå¹³'
            }
        }
    })

    // 2. æ³¨å†Œç»„ä»¶
    new Vue({
        el:'#root',
        // å±€éƒ¨æ³¨å†Œ
        components:{
            // ä¸¤ç§å½¢å¼ï¼šä¸€ç§æ˜¯é”®å€¼å¯¹ï¼Œå¦ä¸€ç§å¯ä»¥ç›´æ¥å†™ç»„ä»¶å
            // myschool:school
            school
        }
    })
</script>

```

æ•ˆæœå›¾å¦‚ä¸‹ï¼š

![](https://i-blog.csdnimg.cn/blog_migrate/70cb5c620fdd0c57c2f650cf8dec8a31.png)

**å…¨å±€ç»„ä»¶**

```
// 1. åˆ›å»ºç»„ä»¶
const hello = Vue.extend({
    template: `
    <div>
        <h2>ä½ å¥½å‘€ï¼Œ{{name}}</h2>
    </div>
    `,
    data() {
        return {
            name:'Tom',
        }
    }
})

// 2. æ³¨å†Œå…¨å±€ç»„ä»¶
Vue.component('hello', hello);

```

æ•ˆæœå›¾å¦‚ä¸‹ï¼š

![](https://i-blog.csdnimg.cn/blog_migrate/4d13351eea67bca2331eea2828847a32.png)

> âš ï¸æ‰€æœ‰çš„ç»„ä»¶å¿…é¡»éƒ½è¦æ”¾åœ¨ vm ä¹‹å‰ï¼Œæ‰€æœ‰çš„æ³¨å†Œç»„ä»¶è¡Œä¸ºå¿…é¡»æ”¾åœ¨æ³¨å†Œç»„ä»¶ä¹‹åï¼Œå¦åˆ™ä¼šå‡ºç°å¦‚ä¸‹é”™è¯¯ï¼š
> 
> ![](https://i-blog.csdnimg.cn/blog_migrate/837cb7dc4833a395505165d40ad583e6.png)

### 6.3 ç»„ä»¶çš„æ³¨æ„ç‚¹

1.  å…³äºç»„ä»¶å
    
    *   ç”±ä¸€ä¸ªå•è¯ç»„æˆï¼š
        1.  ç¬¬ä¸€ç§å†™æ³•ï¼šé¦–å­—æ¯å°å†™ï¼šschoolï¼ˆåœ¨ Vue å¼€å‘è€…å·¥å…·æ˜¾ç¤ºæ—¶è¿˜æ˜¯é¦–å­—æ¯å¤§å†™ï¼‰
        2.  ç¬¬äºŒç§å†™æ³•ï¼šé¦–å­—æ¯å¤§å†™ï¼šSchool
    *   ç”±å¤šä¸ªå•è¯ç»„æˆï¼š
        1.  ç¬¬ä¸€ç§å†™æ³•ï¼šKebab-case å‘½åï¼Œmy-school
        2.  ç¬¬äºŒç§å†™æ³•ï¼šCamelCase å‘½åï¼ŒMySchoolï¼ˆéœ€è¦ Vue è„šæ‰‹æ¶æ”¯æŒï¼‰
    *   å¤‡æ³¨ï¼š
        1.  ç»„ä»¶åå°½å¯èƒ½å›é¿ HTML ä¸­å·²æœ‰çš„å…ƒç´ åç§°ï¼Œä¾‹å¦‚: h2ã€H2
        2.  å¯ä»¥ä½¿ç”¨ **name é…ç½®é¡¹æŒ‡å®šç»„ä»¶åœ¨å¼€å‘è€…å·¥å…·ä¸­å‘ˆç°çš„åå­—**
2.  å…³äºç»„ä»¶æ ‡ç­¾
    
    1.  ç¬¬ä¸€ç§å†™æ³•ï¼š`<school></school>`
        
    2.  ç¬¬äºŒç§å†™æ³•ï¼š`</school>`
        
        > âš ï¸æ³¨æ„ï¼šè‡ªé—­åˆè¿™ç§å†™æ³•åœ¨éè„šæ‰‹æ¶ä¸­ä¼šäº§ç”Ÿé—®é¢˜ï¼Œå°±æ˜¯**è‡ªé—­åˆç»„ä»¶åé¢çš„ç»„ä»¶éƒ½ä¼šå¤±æ•ˆ**
        
3.  ä¸€ä¸ªç®€å†™æ–¹å¼
    
    *   `const school = Vue.extend(options)` å¯ç®€å†™ä¸ºï¼š`const school = options`

### 6.4 ç»„ä»¶çš„åµŒå¥—

**demo**

```
<div id="root">

</div>
<script>
    // å®šä¹‰ä¸€ä¸ª student ç»„ä»¶
    const student = Vue.extend({
        template: `
        <div>
            <h2>ä½ å¥½,æˆ‘æ˜¯ {{name}}!!!</h2>    
        </div>
        `,
        data() {
            return {
                name: 'student',
            }
        }
    })
    // å®šä¹‰ä¸€ä¸ª school ç»„ä»¶ï¼Œé‡Œé¢åµŒå¥— student
    const school = Vue.extend({
        template: `
        <div>
            <h2>ä½ å¥½ï¼Œæˆ‘æ˜¯{{name}}</h2>
            <my-student></my-student>
        </div>
        `,
        data() {
            return {
                name: 'school',
            }
        },
        components: {
            'my-student': student
        }
    })
    // å®šä¹‰ä¸ª hello ç»„ä»¶
    const hello = Vue.extend({
        template: `
        <div>
            <h2>Hello Vue!</h2>    
        </div>
        `
    })
    // å®šä¹‰ä¸€ä¸ª app ç»„ä»¶ï¼Œè¿™ä¸ªç»„ä»¶ç®¡ç† Vue ä¸­æ‰€æœ‰ç»„ä»¶
    const app = Vue.extend({
        template: `
        <div>
            <hello></hello>
            <school></school>                
        </div>
        `,
        components: {
            school,
            hello
        }
    })
    // åˆ›å»º vm
    const vm = new Vue({
        template: `
        <app></app>
        `,
        el: '#root',
        components: {
            app
        }
    })
</script>

```

æ•ˆæœå›¾å¦‚ä¸‹ï¼š

![](https://i-blog.csdnimg.cn/blog_migrate/6baca923eaedaaf92fbd812512698ad7.png)

åµŒå¥—å…³ç³»å¦‚ä¸‹ï¼š

![](https://i-blog.csdnimg.cn/blog_migrate/059164c1a2f595923c89c6758268de9c.png)

### 6.5 VueComponent

1.  ç»„ä»¶æœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ªåä¸º VueComponent çš„æ„é€ å‡½æ•°ï¼Œæ˜¯é€šè¿‡ `Vue.extend` ç”Ÿæˆçš„
    
2.  æˆ‘ä»¬æ¯æ¬¡ä½¿ç”¨ç»„ä»¶ï¼Œä¹Ÿå°±æ˜¯ä½¿ç”¨ç»„ä»¶æ ‡ç­¾æ—¶ï¼ŒVue è§£æéƒ½ä¼šå¸®åŠ©æˆ‘ä»¬ç”Ÿæˆä¸€ä¸ªç»„ä»¶çš„å®ä¾‹å¯¹è±¡ï¼ˆvcï¼‰
    
    > â„¹ï¸æ¯æ¬¡è°ƒç”¨ Vue.extend ï¼Œè¿”å›çš„éƒ½æ˜¯ä¸€ä¸ªæ–°çš„å®ä¾‹å¯¹è±¡
    
3.  å…³äº this çš„æŒ‡å‘ï¼š
    
    *   ç»„ä»¶é…ç½®ä¸­ï¼šdata å‡½æ•°ã€methods å‡½æ•°ã€watch å‡½æ•°ã€computed å‡½æ•°ï¼Œå®ƒä»¬çš„ this æŒ‡å‘çš„éƒ½æ˜¯ VueComponent å®ä¾‹å¯¹è±¡ï¼Œç®€ç§°ä¸º vcï¼ˆç»„ä»¶å®ä¾‹å¯¹è±¡ï¼‰
    *   `new Vue(options)` é…ç½®ä¸­çš„ï¼šdata å‡½æ•°ã€methods å‡½æ•°ã€watch å‡½æ•°ã€computed å‡½æ•°ï¼Œå®ƒä»¬çš„ this æŒ‡å‘å‡æ˜¯ Vue å®ä¾‹å¯¹è±¡ï¼Œç®€ç§°ä¸º vm

### 6.6 vm å’Œ vc ä¹‹é—´çš„å…³ç³»

![](https://i-blog.csdnimg.cn/blog_migrate/62fdc09d89b1619c26f90de3171ea423.png)

è¿™é‡Œæœ‰ä¸€ä¸ªé‡è¦çš„å†…ç½®å…³ç³»ï¼š

```
VueComponent.prototype.__proto__ === Vue.prototype

```

> è¦å­˜åœ¨è¿™ä¸ªå…³ç³»çš„åŸå› ï¼šè®©ç»„ä»¶å®ä¾‹å¯¹è±¡ï¼ˆvcï¼‰å¯ä»¥è®¿é—®åˆ° Vue åŸå‹ä¸Šçš„å±æ€§å’Œæ–¹æ³•

### 6.7 å•æ–‡ä»¶ç»„ä»¶

åŸºæœ¬ç»“æ„ï¼š

*   å­ç»„ä»¶ï¼šå…¶ä¸­åŒ…æ‹¬ template æ¨¡æ¿å­—ç¬¦ä¸²ã€script è„šæœ¬ å’Œ CSS æ ·å¼æ–‡ä»¶ï¼Œé€šè¿‡ `export defualt vc` æš´éœ²ç»™å¤–éƒ¨ç»„ä»¶ï¼Œä¾‹å¦‚ï¼šStudent.vueã€School.vueï¼ˆåœ¨ VS code ä¸­å¯ä»¥é€šè¿‡ `<v + tab`å®ç°å¿«é€Ÿå†™å…¥æ¨¡æ¿ï¼‰
    
    > æ³¨æ„ï¼šè¿™ä¸ªå¿«é”®é”®çš„å‰ææˆ‘ä»¬åœ¨ VS code ä¸­å®‰è£…äº† Vue 3 Snippets æ’ä»¶
    
*   æ€»ç»„ä»¶ï¼šä»¥ App.vue å‘½åï¼Œé¦–å…ˆé€šè¿‡ `import xxx from url` å¯¼å…¥å­ç»„ä»¶ï¼Œå†é€šè¿‡ `export defualt vc` æš´éœ²ç»™ main.js æ–‡ä»¶
    
*   main.js æ–‡ä»¶ä¸­ä½¿ç”¨ new Vue åˆ›å»º vm,ï¼Œæœ€åå¼•å…¥åˆ° index.html ä¸­ä½¿ç”¨
    

âš ï¸è¿™æ ·å†™æ³•æ˜¯ä¸å®Œå–„çš„ï¼Œéœ€è¦è„šæ‰‹æ¶çš„æ”¯æŒ

7 è„šæ‰‹æ¶
-----

Vue è„šæ‰‹æ¶æ˜¯ Vue å®˜æ–¹æä¾›çš„æ ‡å‡†åŒ–å¼€å‘å·¥å…·ï¼ˆå¼€å‘å¹³å°ï¼‰ï¼Œè‹±æ–‡åå«åš Vue CLI

> CLI çš„è‹±æ–‡å…¨ç§°ä¸º â€œCommand Line Interfaceâ€

å®˜æ–¹æ–‡æ¡£ï¼š[ä¼ é€å…¥å£](https://cli.vuejs.org/zh/)

æˆªæ­¢åˆ° 2022-11-23ï¼Œ Vue CLI çš„æœ€æ–°ç‰ˆæœ¬ä¸º 5.xï¼Œè€Œ Vue çš„æœ€æ–°ç‰ˆæœ¬ä¸º 3.x

![](https://i-blog.csdnimg.cn/blog_migrate/33a082883ce38be4b4992f2cae10b621.png)

### 7.1 å®‰è£…è„šæ‰‹æ¶

1.  å…¨å±€å®‰è£… @vue/cli ï¼ˆ**ä»…ç¬¬ä¸€æ¬¡æ‰§è¡Œ**ï¼‰
    
    ```
    npm install -g @vue/cli
    
    ```
    
    > å¦‚æœå…¨å±€å®‰è£…å¤±è´¥ï¼Œå¯ä»¥å°† node å®‰è£…ç›®å½•çš„ç”¨æˆ·æƒé™ä¿®æ”¹ä¸º â€œå®Œå…¨æ§åˆ¶â€
    
2.  **åˆ‡æ¢åˆ°è¦åˆ›å»ºé¡¹ç›®çš„ç›®å½•**ï¼Œç„¶åä½¿ç”¨å‘½ä»¤åˆ›å»ºé¡¹ç›®
    
    ```
    vue create xxx
    // ä¾‹å¦‚: vue create vue-test
    
    ```
    
    > âš ï¸æ³¨æ„ï¼š**åˆ›å»ºçš„å·¥ç¨‹åå¿…é¡»å…¨éƒ¨å°å†™**ï¼Œä¸èƒ½ä½¿ç”¨å¤§å†™å­—æ¯
    > 
    > ![](https://i-blog.csdnimg.cn/blog_migrate/00180f95ae435671b322f6dfdd543524.png)
    
    ![](https://i-blog.csdnimg.cn/blog_migrate/d46aba484693e5fb395f8d6be3a84ec1.png)
    
    è¿™é‡Œæˆ‘ä»¬é€‰æ‹©ä½¿ç”¨åˆ›å»ºä¸€ä¸ª Vue 2 çš„é¡¹ç›®ï¼Œç­‰åé¢è®²è§£äº† Vue 3 åå†è¿›è¡Œåˆ›å»º Vue 3 çš„é¡¹ç›®ã€‚é™¤æ­¤ä¹‹å¤–ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°å¤šäº†ä¸¤ä¸ª js è§£é‡Šå™¨ï¼š
    
    *   babelï¼šå°† ES6 è¯­æ³•è½¬åŒ–ä¸º ES5 è¯­æ³•
    *   eslintï¼šè¿›è¡Œè¯­æ³•æ£€æŸ¥
3.  è¿›å…¥åˆ›å»ºå‡ºæ¥çš„å·¥ä½œç›®å½•ï¼Œå¹¶ä½¿ç”¨å¦‚ä¸‹å‘½ä»¤å¯åŠ¨é¡¹ç›®
    
    ```
    npm run serve
    
    ```
    
    ![](https://i-blog.csdnimg.cn/blog_migrate/60cab3bf15b9f84bd81615c2f034e459.png)
    
    å½“æˆ‘ä»¬ä½¿ç”¨ npm run serve åä¸ä»…ä¼šè¿›è¡Œç¼–è¯‘å¹¶è¿è¡Œé¡¹ç›®ï¼Œnode.js è¿˜ä¼šå¸®åŠ©æˆ‘ä»¬å¼€å¯ä¸€ä¸ªæœ¬åœ°æœåŠ¡å™¨å’Œä¸€ä¸ªç½‘ç»œæœåŠ¡å™¨ï¼Œé»˜è®¤ç«¯å£å·ï¼š8080
    
    ![](https://i-blog.csdnimg.cn/blog_migrate/6fab7e7c8a92e06deccb278c9db83477.png)
    
    *   æœ¬åœ°ç”¨æˆ·ä¸Šä¸‹ä¸¤ä¸ªæœåŠ¡å™¨éƒ½å¯ä»¥ä½¿ç”¨
    *   åŒºåŸŸç½‘ä¸­çš„å…¶ä»–ç”¨æˆ·åªèƒ½ä½¿ç”¨ä¸‹é¢çš„ Network æœåŠ¡å™¨
    
    > ä½¿ç”¨ Ctrl + C å¯ä»¥å…³é—­æœåŠ¡å™¨
    

â„¹ï¸å¤‡æ³¨ï¼š

1.  ä½¿ç”¨ npm ï¼ˆåŒ…ç®¡ç†å·¥å…·ï¼‰çš„å‰ææ˜¯è¦å®‰è£… node.js
    
2.  å¦‚æœå‡ºç°ä¸‹è½½ç¼“æ…¢çš„æƒ…å†µåˆ™éœ€è¦é…ç½® npm é•œåƒï¼Œå¦‚æœé…ç½®æˆæ·˜å®çš„é•œåƒ
    
    ```
    npm config set registry https://registry.npm.taobao.org
    
    ```
    
    > æˆ‘ä»¬ä¹Ÿå¯ä»¥é€šè¿‡ `npm config get registry` æ¥æŸ¥çœ‹å½“å‰æ‰€ä½¿ç”¨çš„çš„é•œåƒæº
    
3.  Vue è„šæ‰‹æ¶éšè—äº†æ‰€æœ‰çš„ webpack ç›¸å…³é…ç½®ï¼Œè‹¥æƒ³æŸ¥çœ‹å…·ä½“çš„ webpack é…ç½®ï¼Œæ‰§è¡Œå¦‚ä¸‹å‘½ä»¤ï¼š
    
    ```
    vue inspect > output.js
    
    ```
    

å½“æˆ‘ä»¬ä¸€åˆ‡æ“ä½œæ‰§è¡Œå®Œæ¯•ä¹‹åï¼Œä½¿ç”¨ Vue å¼€å‘è€…å·¥å…·ï¼Œå¯ä»¥çœ‹åˆ° Hello World

![](https://i-blog.csdnimg.cn/blog_migrate/52a2480364d6339805ca2b772eae7fed.png)

æˆ‘ä»¬åœ¨åˆ›å»ºå®Œæˆä¸€ä¸ªé¡¹ç›®åï¼Œä½¿ç”¨ `npm run serve` å‘½ä»¤è¿è¡Œé¡¹ç›®å¯èƒ½ä¼šå‡ºç°å¦‚ä¸‹æŠ¥é”™ä¿¡æ¯ï¼š

![](https://i-blog.csdnimg.cn/blog_migrate/e2547f00803df7da0db70dd00e837b0a.png)

**è¯¦ç»†è§£é‡Šï¼š**

```
There are multiple modules with names that only differ in casing.
æœ‰å¤šä¸ªæ¨¡å—åŒåä»…å¤§å°å†™ä¸åŒ
This can lead to unexpected behavior when compiling on a filesystem with other case-semantic.
è¿™å¯èƒ½å¯¼è‡´åœ¨ä¸€äº›æ–‡ä»¶ç³»ç»Ÿä¸­äº§ç”Ÿä¸æ˜¯é¢„æœŸçš„è¡Œä¸º
Use equal casing.
ä½¿ç”¨å”¯ä¸€çš„å†™æ³•

```

**å‡ºç°åŸå› **ï¼š**é¡¹ç›®å·¥ç¨‹å‘½ä»¤ä¸è§„èŒƒï¼Œæˆ–ä½¿ç”¨äº†é©¼å³°å‘½å**

**è§£å†³æ–¹æ¡ˆï¼š**

1.  ä½¿ç”¨ä¸‹åˆ’çº¿å‘½ä»¤æ³•
2.  ä½¿ç”¨ kebab-caseï¼ˆçŸ­æ¨ªçº¿å‘½åæ³•ï¼‰

### 7.2 åˆ†æè„šæ‰‹æ¶

å½“æˆ‘ä»¬è¿›å…¥åˆ›å»ºå¥½çš„å·¥ä½œç›®å½•ä¹‹åï¼Œä¼šå‡ºç°å¦‚ä¸‹æ–‡ä»¶å’Œæ–‡ä»¶å¤¹

![](https://i-blog.csdnimg.cn/blog_migrate/e3596a0ef3bb74a91ae52b6508adf680.png)

*   .gitignore æ˜¯ git çš„å¿½ç•¥è¦ä¸Šä¼ æ–‡ä»¶çš„é…ç½®æ–‡ä»¶
    
*   babel.config.js æ˜¯ babel çš„æ§åˆ¶æ–‡ä»¶ï¼Œç”¨äºå°† ES6 è½¬æ¢ä¸º ES5
    
*   package.json å’Œ package-lock.json æ–‡ä»¶æ˜¯ npm çš„ç®¡ç†æ–‡ä»¶ï¼Œå‰ä¸€ä¸ªæ–‡ä»¶æ˜¯åŒ…çš„è¯´æ˜ä¹¦ï¼Œåä¸€ä¸ªæ–‡ä»¶æ˜¯åŒ…çš„ç‰ˆæœ¬æ§åˆ¶æ–‡ä»¶
    
    > å½“æˆ‘ä»¬å‘ç°è‡ªå·±çš„ node_modules è¢«ç ´ååï¼Œåªè¦è¿™ä¸¤ä¸ªæ–‡ä»¶å­˜åœ¨ï¼Œå°±å¯ä»¥é€šè¿‡ `npm install vue` æ¥è¿›è¡Œé‡æ„
    
*   src ä¸­çš„ main.js æ˜¯æ•´ä¸ªé¡¹ç›®çš„å…¥å£æ–‡ä»¶
    
*   public ä¸­çš„ index.html æ–‡ä»¶å³ä¸ºä¸»é¡µ
    

```
â”œâ”€â”€ node_modules 
â”œâ”€â”€ public
â”‚   â”œâ”€â”€ favicon.ico: é¡µç­¾å›¾æ ‡
â”‚   â””â”€â”€ index.html: ä¸»é¡µé¢
â”œâ”€â”€ src
â”‚   â”œâ”€â”€ assets: å­˜æ”¾é™æ€èµ„æº
â”‚   â”‚   â””â”€â”€ logo.png
â”‚   â”‚â”€â”€ component: å­˜æ”¾ç»„ä»¶
â”‚   â”‚   â””â”€â”€ HelloWorld.vue
â”‚   â”‚â”€â”€ App.vue: æ±‡æ€»æ‰€æœ‰ç»„ä»¶
â”‚   â”‚â”€â”€ main.js: å…¥å£æ–‡ä»¶
â”œâ”€â”€ .gitignore: gitç‰ˆæœ¬ç®¡åˆ¶å¿½ç•¥çš„é…ç½®
â”œâ”€â”€ babel.config.js: babelçš„é…ç½®æ–‡ä»¶
â”œâ”€â”€ package.json: åº”ç”¨åŒ…é…ç½®æ–‡ä»¶ 
â”œâ”€â”€ README.md: åº”ç”¨æè¿°æ–‡ä»¶
â”œâ”€â”€ package-lock.jsonï¼šåŒ…ç‰ˆæœ¬æ§åˆ¶æ–‡ä»¶

```

åœ¨ package.json æ–‡ä»¶ä¸­å¯ä»¥çœ‹åˆ°ä»¥ä¸‹å‘½ä»¤ï¼š

![](https://i-blog.csdnimg.cn/blog_migrate/dfb502aacbb53fb2924dafc5b9fbba8d.png)

è¿™äº›å‘½ä»¤å…¶å®å°±æ˜¯æˆ‘ä»¬ä¹‹å‰ `npm run serve` å’Œ `npm run build` ç­‰å‘½ä»¤çš„å…¨ç§°å½¢å¼ï¼š

*   `npm run serve`ï¼šåœ¨æœ¬åœ°ç¯å¢ƒä¸­è¿è¡Œï¼Œä¼šä½¿ç”¨ node.js ç”Ÿæˆä¸€ä¸ª web æœåŠ¡è€Œè®¿é—®é¡µé¢
*   `npm run build`ï¼šæ‰“åŒ…ç”Ÿæˆé™æ€æ–‡ä»¶ï¼ˆå°† Vue æ–‡ä»¶è½¬æˆ htmlã€cssã€js æ–‡ä»¶ï¼‰ã€‚é€šå¸¸æˆ‘ä»¬å°†é™æ€æ–‡ä»¶ä¸Šä¼ åˆ°æœåŠ¡å™¨åé€šè¿‡ nginx æˆ–è€… tomcat å¯åŠ¨ä¸€ä¸ªåå°æœåŠ¡å™¨çš„ web æœåŠ¡ç„¶åé€šè¿‡é…ç½®è®©è¯¥æœåŠ¡æŒ‡å‘é™æ€æ–‡ä»¶è¾¾åˆ°è®¿é—®é¡µé¢çš„ç›®çš„

âš ï¸**æˆ‘ä»¬åœ¨ä½¿ç”¨è„šæ‰‹æ¶æµ‹è¯•çš„æ—¶å€™å¦‚æœå‡ºç°å¦‚ä¸‹é”™è¯¯æç¤ºï¼š**

![](https://i-blog.csdnimg.cn/blog_migrate/f45fa2cda5babfdc865cbe801a23d6f4.png)

é”™è¯¯æç¤ºç¿»è¯‘è¿‡æ¥çš„æ„æ€ï¼šè®©æˆ‘ä»¬ä½¿ç”¨ kebab-case ï¼ˆçŸ­æ¨ªçº¿ï¼‰çš„å‘½åçš„æ–¹æ³•æ¥å‘½åç»„ä»¶åï¼Œä½†æ˜¯å…¶å®å•ä¸ªå•è¯ä¹Ÿå¯ä»¥ï¼Œè¿™é‡Œå…¶å®æ˜¯**è¯­æ³•æ£€æŸ¥çš„æ—¶å€™æŠŠä¸è§„èŒƒçš„ä»£ç å½“æˆäº†é”™è¯¯å¯¼è‡´ç¼–è¯‘å¤±è´¥**

ä¿®æ”¹æ–¹æ¡ˆï¼š

1.  ä½¿ç”¨è§„èŒƒçš„å‘½åï¼Œä¾‹å¦‚ï¼šstudent-name æˆ– StudentName
    
2.  ä¿®æ”¹é…ç½®é¡¹ï¼Œå…³é—­è¯­æ³•æ£€æŸ¥ï¼Œåœ¨æ ¹ç›®å½•ä¸‹æ‰¾åˆ° vue.config.js æ–‡ä»¶ï¼Œè®¾ç½®å¦‚ä¸‹ï¼š
    
    ```
    const { defineConfig } = require('@vue/cli-service')
    module.exports = defineConfig({
      transpileDependencies: true,
      lintOnSave:false /*å…³é—­è¯­æ³•æ£€æŸ¥*/
    })
    
    ```
    

#### 7.2.1 å°è¯•ç‰›åˆ€ â€”â€” ç»„ä»¶ç»ƒä¹ 

ğŸ“components æ–‡ä»¶å¤¹

```
// School.vue æ–‡ä»¶
<template>
  <div>
    <h2>å­¦æ ¡åç§°: {{name}}</h2>
    <h2>å­¦æ ¡åœ°å€: {{address}}</h2>
    <button @click='showName'>ç‚¹æˆ‘å¼¹å‡ºå­¦æ ¡å</button>
  </div>
</template>

<script>
export default {
    name:'School',
    data() {
        return {
            name:'æ±Ÿè¥¿å¸ˆèŒƒå¤§å­¦',
            address: 'æ±Ÿè¥¿å—æ˜Œ'
        }
    },
    methods: {
        showName() {
            alert(this.name);
        }
    }
}
</script>

<style scoped>
    h2 {
        background-color: pink;
    }
</style>

```

```
// Student.vue
<template>
  <div>
    <h2>å­¦ç”Ÿå§“å:{{ name }}</h2>
    <h2>å­¦ç”Ÿå¹´é¾„:{{ age }}</h2>
  </div>
</template>

<script>
export default {
    name:'Student', // æŒ‡å®šç»„ä»¶å
    data() {
        return {
            name:'å¼ ä¸‰',
            age:18
        }
    }
};
</script>

```

ğŸ—’App.vue æ–‡ä»¶

```
<template>
  <div id="app">
    <img alt="Vue logo" src="./assets/logo.png">
    <School></School>
    <Student></Student>
  </div>
</template>

<script>
  // å¼•å…¥ç»„ä»¶
  import School from './components/School'
  import Student from './components/Student'
export default {
  name: 'App',
  components: {
    School,
    Student
  }
}
</script>

<style>
#app {
  font-family: Avenir, Helvetica, Arial, sans-serif;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  text-align: center;
  color: #2c3e50;
  margin-top: 60px;
}
</style>

```

è¿™é‡Œï¼Œæˆ‘ä»¬å¯¹ public æ–‡ä»¶å¤¹ä¸‹çš„ index.html æ–‡ä»¶è¿›è¡Œåˆ†æï¼š

```
<!DOCTYPE html>
<html lang="">
  <head>
    <meta charset="utf-8">
    <!-- é’ˆå¯¹ IE æµè§ˆå™¨çš„ä¸€ä¸ªç‰¹æ®Šé…ç½®ï¼Œå«ä¹‰æ˜¯è®© IE æµè§ˆå™¨ä»¥æœ€é«˜çš„æ¸²æŸ“çº§åˆ«æ¸²æŸ“ -->
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <!-- å¼€å¯ç§»åŠ¨ç«¯çš„ç†æƒ³è§†å£ -->
    <meta >
    <!-- BASE_URL æŒ‡çš„æ˜¯ public çš„æ–‡ä»¶å¤¹çš„è·¯å¾„ï¼Œç”¨äºé…ç½®é¡µç­¾å›¾æ ‡ -->
    <link rel="icon" href="<%= BASE_URL %>favicon.ico">
    <!-- é…ç½®ç½‘é¡µæ ‡é¢˜ï¼Œåˆ° package.json é‡Œé¢çš„ name è¿›è¡Œé…ç½®æ ‡é¢˜ -->
    <title><%= htmlWebpackPlugin.options.title %></title>
  </head>
  <body>
    <!-- å½“æµè§ˆå™¨ä¸æ”¯æŒJSæ—¶ï¼Œnoscriptä¸­çš„å…ƒç´ å°±ä¼šè¢«æ¸²æŸ“ -->
    <!-- å¦‚æœæ˜¯ Chrome æµè§ˆå™¨ï¼Œæˆ‘ä»¬å¯ä»¥åˆ°ã€è®¾ç½®ã€‘==> ã€éšç§è®¾ç½®å’Œå®‰å…¨æ€§ã€‘ ==> ã€ç½‘ç«™è®¾ç½®ã€‘ ==> ã€å†…å®¹ã€‘ ==> ã€å…³é—­æ”¯æŒ JSã€‘ è®°æ€§æµ‹è¯• -->
    <noscript>
      <strong>We're sorry but <%= htmlWebpackPlugin.options.title %> doesn't work properly without JavaScript enabled. Please enable it to continue.</strong>
    </noscript>
    <!-- å®¹å™¨ -->
    <div id="app"></div>
    <!-- built files will be auto injected -->
  </body>
</html>

```

åœ¨ Vue ä¸­çš„æ–‡ä»¶æ‰§è¡Œé¡ºåºå¦‚ä¸‹ï¼š

```
main.js ==> App.vue ==> compoents/School.vueã€components/Student.vueï¼Œæœ€åå°† main.js åˆ›å»ºçš„ Vue å®ä¾‹å¯¹è±¡æ”¾å…¥ index.html ä¸­çš„ div å®¹å™¨

```

æœ€ç»ˆæ˜¾ç¤ºæ•ˆæœå¦‚ä¸‹å›¾ï¼š

![](https://i-blog.csdnimg.cn/blog_migrate/a72aab083e0b659b10d77a42c2003027.png)

### 7.3 render å‡½æ•°

æˆ‘ä»¬ä¹‹å‰å¯¹ main.js æ–‡ä»¶ä¸­æ¯è¡Œä»£ç éƒ½è¿›è¡Œäº†åˆ†æï¼Œä½†æ˜¯æœ‰ä¸€è¡Œæˆ‘ä»¬å´é—æ¼äº†ï¼Œå°±æ˜¯ `render: h => h(App)` è¿™è¡Œä»£ç  ï¼Œå…¶å®å¦‚æœæˆ‘ä»¬æŒ‰ç…§ä»¥å‰çš„å†™æ³•åº”è¯¥å¦‚ä¸‹å†™ï¼š

```
new Vue({
  templates: `<App></App>`,
  components:{
    App
  }
}).$mount('#app')

```

ä½¿ç”¨ `npm run serve` å‘½ä»¤è¿è¡Œä¹‹åå‘ç°æŠ¥é”™å¦‚ä¸‹ï¼š

![](https://i-blog.csdnimg.cn/blog_migrate/42e82958aaeb941649eade7b6a46b965.png)

> æŠ¥é”™ä¿¡æ¯å¤§è‡´æ„æ€å¦‚ä¸‹ï¼š
> 
> ```
> ä½ æ­£åœ¨ä½¿ç”¨çš„çš„æ˜¯æ˜¯è¿è¡Œæ—¶ç‰ˆæœ¬çš„ Vueï¼Œæœªæä¾›æ¨¡æ¿ç¼–è¯‘å™¨ï¼Œè§£å†³æ–¹æ¡ˆå°±æ˜¯ä½¿ç”¨åŒ…å«æ¨¡æ¿ç¼–è¯‘å™¨ç‰ˆæœ¬çš„ Vueï¼ˆå°†å¯¼å…¥ Vue çš„è·¯å¾„è¿›è¡Œä¿®æ”¹ï¼Œä¿®æ”¹ä¸º'vue/dist/vue'ï¼‰æˆ–è€…ä½¿ç”¨ render å‡½æ•°å¯¹æ¨¡æ¿è¿›è¡Œé¢„ç¼–è¯‘
> 
> ```

æˆ‘ä»¬æ ¹æ®å¼•å…¥çš„ vue æ¥æŸ¥çœ‹å¯¼å…¥çš„ç©¶ç«Ÿæ˜¯é‚£ä¸ªç‰ˆæœ¬çš„ Vue

![](https://i-blog.csdnimg.cn/blog_migrate/84d0acec8abb9e672f8b7fc03993910a.png)

å†è¿›å…¥ dist æ–‡ä»¶å¤¹ä¸‹æŸ¥çœ‹æœ‰å“ªäº›ç‰ˆæœ¬çš„ Vue

![](https://i-blog.csdnimg.cn/blog_migrate/fc350ad7f43de3f544319f7ad90bf7a4.png)

å…³äºä¸åŒç‰ˆæœ¬çš„ Vueï¼š

1.  Vue.js å’Œ Vue.runtime.xxx.js çš„åŒºåˆ«ï¼š
    
    æˆ‘ä»¬å¯ä»¥åˆ° ã€node_modules â†’ vue â†’ distã€‘ ä¸­æŸ¥çœ‹ä¸åŒç‰ˆæœ¬çš„ Vue
    
    ![](https://i-blog.csdnimg.cn/blog_migrate/72309dac368e0321cf74cfc922a764e3.png)
    
    å…¶ä¸­ï¼š
    
    *   vue.js æ˜¯å®Œæ•´ç‰ˆçš„ Vueï¼ŒåŒ…å«ã€æ ¸å¿ƒåŠŸèƒ½ + æ¨¡æ¿è§£æå™¨ã€‘ï¼Œæ”¯æŒ template
    *   vue.runtime.xxx.js æ˜¯è¿è¡Œç‰ˆçš„ Vueï¼ŒåªåŒ…å«ï¼šã€æ ¸å¿ƒåŠŸèƒ½ã€‘ï¼Œç¼ºå°‘æ¨¡æ¿è§£æå™¨ï¼Œä¸æ”¯æŒ template
2.  å› ä¸º vue.runtime.xxx.js æ²¡æœ‰æ¨¡æ¿è§£æå™¨ï¼Œæ‰€æœ‰ä¸èƒ½ä½¿ç”¨ template é…ç½®é¡¹ï¼Œéœ€è¦ä½¿ç”¨ render å‡½æ•°æ¥æ”¶åˆ°çš„ createElement å‡½æ•°å»æŒ‡å®šå…·ä½“å†…å®¹
    

> â„¹ï¸æˆ‘ä»¬åœ¨ Vue æ–‡ä»¶ä¸­æ˜¯å¯ä»¥ç›´æ¥ä½¿ç”¨ template çš„ï¼ŒåŸå› å°±åœ¨äº Vue è„šæ‰‹æ¶ä¸ºæˆ‘ä»¬æä¾›äº†æ¨¡æ¿è§£æå™¨è¿™ä¸ªåŒ…
> 
> ![](https://i-blog.csdnimg.cn/blog_migrate/a48322af842b9a4cd41a93ba7dd45949.png)

åœ¨ vue ä¸­ï¼Œrender æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œé‡Œé¢çš„å‚æ•°æ˜¯ createElementï¼Œä»£è¡¨åˆ›å»ºå…ƒç´ ï¼Œè¯­æ³•å¦‚ä¸‹ï¼š

```
render(createElement) {
	return createElement('h2', 'ä½ å¥½å•Š');
    // åˆ›å»º<h2>ä½ å¥½å•Š</h2>çš„èŠ‚ç‚¹å…ƒç´ 
}

```

å¦‚æœæ˜¯åˆ›å»ºèŠ‚ç‚¹å…ƒç´ ï¼Œä¾‹å¦‚ `<App></App>`ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨

```
render(createElement) {
	return createElement(App)
}

```

ç²¾ç®€å†™æ³•ï¼š

```
render:h => h(App)

```

å¯¹äº vue ç»„ä»¶ä¸­çš„ template æ ‡ç­¾ä¹‹æ‰€ä»¥å¯ä»¥ä½¿ç”¨ï¼Œæ˜¯ç”±äºå¼•å…¥æ¨¡æ¿è§£æå™¨ç›¸å…³çš„åŒ…

![](https://i-blog.csdnimg.cn/blog_migrate/840cf516e56fc0a999e93b253d11a131.png)

ä½†æ˜¯ vm å®ä¾‹ä¸­æ˜¯ä¸èƒ½ä½¿ç”¨ template ç›¸å…³çš„æ ‡ç­¾çš„

### 7.4 ä¿®æ”¹é»˜è®¤é…ç½®

æˆ‘ä»¬çŸ¥é“ï¼Œåœ¨ Vue ä¸­ï¼Œmain.js æ˜¯é»˜è®¤çš„å…¥å£æ–‡ä»¶ï¼Œæˆ‘ä»¬æ˜¯ä¸èƒ½è¿›è¡Œä¿®æ”¹çš„ï¼ˆåŒ…æ‹¬æ–‡ä»¶åå’Œæ–‡ä»¶ä½ç½®ï¼‰ï¼Œå¦‚æœæˆ‘ä»¬æƒ³è¦ä¿®æ”¹ï¼Œéœ€è¦è¿›å…¥åˆ° ç‰¹å®šçš„é…ç½®æ–‡ä»¶ä¸­è¿›è¡Œä¿®æ”¹ï¼›

åœ¨ webpack ä¸­æœ‰ä¸“é—¨çš„é…ç½®æ–‡ä»¶ webpack.config.jsï¼Œ åŒæ—¶ Vue è„šæ‰‹æ¶ä¹Ÿæœ‰è‡ªå·±çš„é…ç½®æ–‡ä»¶ï¼ˆé»˜è®¤æ˜¯éšè—çš„ï¼‰ï¼Œæˆ‘ä»¬å¦‚æœéœ€è¦æŸ¥çœ‹ï¼Œéœ€è¦ä½¿ç”¨å¦‚ä¸‹å‘½ä»¤å¯¼å‡ºé…ç½®æ–‡ä»¶ï¼š

```
vue inspect > output.js

```

å¦‚ä¸‹å›¾ï¼š

![](https://i-blog.csdnimg.cn/blog_migrate/b79442ae1ad431c18581a1eaad0e0a9e.png)

> æˆ‘ä»¬å¯ä»¥çœ‹åˆ°é‡Œé¢æŠ¥é”™äº†ï¼Œæ˜¯å› ä¸ºå¯¼å‡ºçš„æ–‡ä»¶ä¸­çš„å†…å®¹æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œå¦‚æœæƒ³è¦è§£å†³è¿™ä¸€é—®é¢˜ï¼Œéœ€è¦ç”¨äºä¸€ä¸ªå‚æ•°å»æ¥å—ï¼Œæˆ–è€…ä½¿ç”¨ `export default` è¿›è¡Œé»˜è®¤æš´éœ²

ä½†æ˜¯å¯¼å‡ºçš„åªæ˜¯å‚è€ƒæ–‡æ¡£ï¼Œä¿®æ”¹é‡Œé¢çš„å†…å®¹æ— æ„ä¹‰

æ¥ä¸‹æ¥æˆ‘ä»¬å…ˆè®²è¿°ä¸€ä¸‹ï¼Œå¦‚æœæˆ‘ä»¬ä¸ä¿®æ”¹é»˜è®¤é…ç½®ï¼Œé‚£ä¹ˆå“ªäº›é…ç½®æ˜¯ä¸èƒ½ä¿®æ”¹çš„ï¼š

![](https://i-blog.csdnimg.cn/blog_migrate/ce05f154fc27bf082f61e8ea99fbf323.png)

çº¢è‰²æ–¹æ¡†æ ‡æ³¨çš„éƒ¨åˆ†éƒ½æ˜¯æˆ‘ä»¬ä¸èƒ½ä¿®æ”¹çš„

å¦‚æœæˆ‘ä»¬æƒ³è¦ä¿®æ”¹é»˜è®¤é…ç½®ï¼Œå¯ä»¥å‚è€ƒ Vue çš„[å®˜æ–¹æ–‡æ¡£](https://cli.vuejs.org/zh/config/)

æˆ‘ä»¬å¯ä»¥æ ¹æ®å…¶ä¸­çš„ pages çš„é…ç½®æ¥ä¿®æ”¹ Vue.config.js æ–‡ä»¶ï¼Œè¿›è€Œå¯¹é»˜è®¤å‚æ•°è¿›è¡Œä¿®æ”¹

![](https://i-blog.csdnimg.cn/blog_migrate/6fefd0ae1ff08c2401878a8ef5ca7b75.png)

> å…¶å®åœ¨ Vue ä¸­æœ‰ä¸€ä¸ªé»˜è®¤çš„ Vue.config.jsï¼Œè¯¥æ–‡ä»¶æ˜¯ä¸èƒ½è¿›è¡Œä¿®æ”¹å¹¶ä¸”ä¸å¯è§ï¼Œå½“æˆ‘ä»¬ä¿®æ”¹ Vue.config.js åï¼Œè¯¥æ–‡ä»¶ä¼šé»˜è®¤çš„ Vue.config.js è¿›è¡Œæ•´åˆï¼Œå¹¶ä¸”å¦‚æœæˆ‘ä»¬é…ç½®äº†è‡ªå®šä¹‰çš„ Vue.config ï¼Œé‚£ä¹ˆé‡Œé¢çš„å†…å®¹å°±ä¸èƒ½ä¸ºç©º

```
module.exports = {
  pages: {
    index: {
      // page çš„å…¥å£
      entry: 'src/index/main.js',
      // æ¨¡æ¿æ¥æº
      template: 'public/index.html',
      // åœ¨ dist/index.html çš„è¾“å‡º
      filename: 'index.html',
      // å½“ä½¿ç”¨ title é€‰é¡¹æ—¶ï¼Œ
      // template ä¸­çš„ title æ ‡ç­¾éœ€è¦æ˜¯ <title><%= htmlWebpackPlugin.options.title %></title>
      title: 'Index Page',
      // åœ¨è¿™ä¸ªé¡µé¢ä¸­åŒ…å«çš„å—ï¼Œé»˜è®¤æƒ…å†µä¸‹ä¼šåŒ…å«
      // æå–å‡ºæ¥çš„é€šç”¨ chunk å’Œ vendor chunkã€‚
      chunks: ['chunk-vendors', 'chunk-common', 'index']
    },
    // å½“ä½¿ç”¨åªæœ‰å…¥å£çš„å­—ç¬¦ä¸²æ ¼å¼æ—¶ï¼Œ
    // æ¨¡æ¿ä¼šè¢«æ¨å¯¼ä¸º `public/subpage.html`
    // å¹¶ä¸”å¦‚æœæ‰¾ä¸åˆ°çš„è¯ï¼Œå°±å›é€€åˆ° `public/index.html`ã€‚
    // è¾“å‡ºæ–‡ä»¶åä¼šè¢«æ¨å¯¼ä¸º `subpage.html`ã€‚
    subpage: 'src/subpage/main.js'
  }
}

```

æˆ‘ä»¬åœ¨è„šæ‰‹æ¶ç¯å¢ƒä¸‹ï¼Œé»˜è®¤æ˜¯æ‰“å¼€ã€è¯­æ³•æ£€æŸ¥ã€‘çš„ï¼Œã€è¯­æ³•æ£€æŸ¥ã€‘è™½ç„¶æœ‰åˆ©äºæˆ‘ä»¬æ›´å¥½åœ°å¼€å‘ï¼Œä½†å´ä¸åˆ©äºæˆ‘ä»¬å¹³æ—¶çš„å­¦ä¹ ï¼Œä¸ºäº†å¹³æ—¶æ›´å¥½åœ°å­¦ä¹ æµ‹è¯•ï¼Œæˆ‘ä»¬éœ€è¦å…³é—­è¯­æ³•æ£€æŸ¥ï¼Œåœ¨ vue.config.js ä¸­æ·»åŠ å¦‚ä¸‹çš„é…ç½®é¡¹ï¼š

```
lintOnSave:false

```

### 7.5 ref

åœ¨è®²è§£ ref ä¹‹å‰ï¼Œå…ˆè®²æ¸…æ¥šä¸¤ç‚¹ï¼š

1.  åœ¨ Vue ä¸­ä½¿ç”¨ `npm run serve` æ—¶çš„æ‰“å°ä¿¡æ¯ï¼ˆä¾‹å¦‚æŠ¥é”™ä¿¡æ¯ï¼‰ä¼šåœç•™åœ¨æ§åˆ¶å°ä¸Šï¼Œæˆ‘ä»¬éœ€è¦åˆ·æ–°æ‰èƒ½æ›´æ–°æµè§ˆå™¨æ‰èƒ½æŸ¥çœ‹å½“å‰ç¨‹åºçš„è¿è¡ŒçŠ¶æ€
2.  æˆ‘ä»¬ä¹¦å†™ç»„ä»¶çš„é¡ºåºæœ€å¥½æ˜¯æŒ‰ç…§ï¼šnameï¼ˆå†³å®šåœ¨ Vue å¼€å‘è€…å·¥å…·ä¸­çš„æ˜¾ç¤ºåç§°ï¼‰â†’ components â†’ data() çš„é¡ºåºè¿›è¡Œè§„èŒƒä¹¦å†™

ref å±æ€§çš„ä½œç”¨ï¼šç”¨æ¥ç»™å…ƒç´ æˆ–å­ç»„ä»¶æ³¨å†Œå¼•ç”¨ä¿¡æ¯ï¼ˆid çš„æ›¿ä»£è€…ï¼‰

ğŸŒ¿ref å±æ€§åº”ç”¨åœ¨ html æ ‡ç­¾ä¸­è·å–çš„æ˜¯çœŸå®çš„ DOM ï¼Œåº”ç”¨åœ¨ç»„ä»¶æ ‡ç­¾ä¸­æ˜¯ç»„ä»¶å®ä¾‹å¯¹è±¡

ä½¿ç”¨æ–¹å¼ï¼š

**æ³¨å†Œ**

```
<!-- æ³¨å†Œåœ¨ html æ ‡ç­¾ä¸­ -->
<h1 ref="xxx">â€¦</h1>
<!-- æ³¨å†Œåœ¨ç»„ä»¶å®ä¾‹å¯¹è±¡ä¸­ -->
<School ref="xxx"></School>

```

*   å¯¹äºä¸€èˆ¬çš„ DOM ç»“æ„çš„å…ƒç´ ï¼Œé€šè¿‡ ref è·å–çš„å†…å®¹ä¸ä½¿ç”¨ id è·å–çš„å†…å®¹ä¸€è‡´ï¼Œéƒ½æ˜¯è·å–çš„èŠ‚ç‚¹å…ƒç´ çš„ DOM ç»“æ„
    
    ![](https://i-blog.csdnimg.cn/blog_migrate/3542026c2a316c0d0fb39c334b5c8ebd.png)
*   å¯¹äºç»„ä»¶å®ä¾‹å¯¹è±¡ï¼Œé€šè¿‡ ref è·å–çš„æ˜¯ç»„ä»¶å®ä¾‹å¯¹è±¡ï¼Œé€šè¿‡ id è·å–çš„æ˜¯ç»„ä»¶å®ä¾‹å¯¹è±¡ä¸Šå¯¹åº”çš„ DOM ç»“æ„
    
    ![](https://i-blog.csdnimg.cn/blog_migrate/ca60bd0f37f5de49a722543ea5165fa6.png)

**è·å–**

```
this.$refs.xxx

```

> åƒä¸‡ä¸èƒ½ç¼ºçœ`$`ç¬¦å·

### 7.6 props é…ç½®

ä¹‹å‰ï¼Œæˆ‘ä»¬åœ¨é…ç½®ç»„ä»¶çš„æ—¶å€™ï¼Œæ•°æ®æ€»æ˜¯è·Ÿéšç»„ä»¶çš„ï¼Œä¹Ÿå°±æ˜¯è¯´æ•°æ®å’Œç»„ä»¶æ²¡æœ‰åšåˆ°å®Œå…¨åˆ†ç¦»ï¼Œå¦‚æœæˆ‘ä»¬æƒ³è¦æ¯æ¬¡ä½¿ç”¨ç»„ä»¶çš„æ—¶å€™ï¼Œç»„ä»¶å›ºå®šï¼Œä½†æ˜¯æ•°æ®è‡ªå®šä¹‰ï¼Œå°±éœ€è¦ç”¨åˆ° props é…ç½®é¡¹ï¼Œå¦‚ä¸‹ï¼š

![](https://i-blog.csdnimg.cn/blog_migrate/fe49d17ad378d80fe7b41272277cc6b7.png)

ç°åœ¨ï¼Œæˆ‘ä»¬æƒ³è¦å°†ç¬¬äºŒä¸ªå­¦ç”Ÿå§“åæ”¹æˆ "æå››"ï¼Œæ€§åˆ«æ”¹æˆ "å¥³"ï¼Œå¹´é¾„æ”¹æˆ "19"ï¼Œå°±å¯ä»¥ä½¿ç”¨ props é…ç½®é¡¹

åŠŸèƒ½ï¼šè®©ç»„ä»¶æ¥å—å¤–éƒ¨ä¼ è¿‡æ¥çš„æ•°æ®

1.  ä¼ é€’æ•°æ®
    
    ```
    <Demo >
    
    ```
    
2.  æ¥æ”¶æ•°æ®
    
    ```
    // æ–¹æ³•1(åªæ¥æ”¶)
    props:['name']
    // å‡å¦‚ä¼ å…¥äº† ageï¼Œæ¥å—åˆ°çš„ age ä¼šæ˜¯ä¸€ä¸ªå­—ç¬¦å‹ï¼Œè¦è¡¨ç¤ºä¸ºæ•°å€¼å‹ï¼Œéœ€è¦åœ¨ä¼ é€’æ•°æ®çš„å±æ€§åå‰åŠ ä¸Š":""ï¼Œä¾‹å¦‚: <Demo :age="xxx"> 
    // æ–¹æ³•2(é™åˆ¶ç±»å‹)
    props:{
    	name: Number
    }
    
    // æ–¹å¼3(é™åˆ¶ç±»å‹ã€é™åˆ¶å¿…è¦æ€§ã€æŒ‡å®šé»˜è®¤å€¼)
    props:{
        name:{
            type:String,	// é™åˆ¶ç±»å‹
            required:true,	// å¿…è¦æ€§
            default:'xxxx'	// é»˜è®¤å€¼ï¼Œå¦‚æœä¸åŠ å¼•å·ä»£è¡¨çš„æ˜¯ä¸€ä¸ªæ•°å€¼ç±»å‹ï¼ŒåŠ äº†å¼•å·ä»£è¡¨çš„æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ç±»å‹
        }
    }
    // é€šå¸¸æƒ…å†µä¸‹ï¼Œrequired æ˜¯ä¸ä¼šå’Œ default ä¸€èµ·å‡ºç°çš„ï¼Œå› ä¸ºä¸€èˆ¬éƒ½æ˜¯å¯é€‰å‚æ•°æ‰å¯ä»¥çœç•¥ï¼Œæ‰éœ€è¦æ‹¥æœ‰ default é»˜è®¤å€¼
    
    ```
    
3.  æ³¨æ„äº‹é¡¹
    
    **props æ˜¯åªè¯»çš„**ï¼ŒVue åº•å±‚ä¼šæ£€æµ‹ç¨‹åºå‘˜å¯¹ props çš„ä¿®æ”¹ ï¼Œå¦‚æœè¿›è¡Œä¿®æ”¹ï¼Œå°±ä¼šå‘å‡ºè­¦å‘Šï¼Œè‹¥ä¸šåŠ¡éœ€æ±‚ç¡®å®éœ€è¦ä¿®æ”¹ï¼Œé‚£ä¹ˆéœ€è¦å°†æ•°æ®æ‹·è´åˆ° data ä¸­è¿›è¡Œï¼Œå†å»ä¿®æ”¹ data ä¸­çš„å±æ€§å€¼
    
    ```
    // Student ç»„ä»¶
    data() {
        return {
            myName:this.name
        }
    },
    props:{
      name:String,
      required:true,
    },
    
    ```
    
    ```
    // App ç»„ä»¶
    <Student ></Student>
    
    ```
    

ç¤ºä¾‹å¦‚ä¸‹ï¼š

```
// App.vue
<template>
  <div>
    <Student name='å¼ ä¸‰' gender='ç”·' age='18'/>
    <hr>
    <Student name='æå››' gender='å¥³' age='19'/>
  </div>

</template>

<script>
// å¼•å…¥å­ç»„ä»¶
// import School from "./components/School";
import Student from "./components/Student";

export default {
  name: "App",
  components: {
    Student
  },
};
</script>

```

```
// Student.vue
<template>
  <div>
    <h2>å­¦ç”Ÿå§“å: {{name}}</h2>
    <h2>å­¦ç”Ÿæ€§åˆ«: {{gender}}</h2>
    <h2>å­¦ç”Ÿå¹´é¾„: {{age}}</h2>
  </div>
</template>

<script>
export default {
    props:['name', 'gender', 'age']
}
</script>

```

æœ€ç»ˆæ˜¾ç¤ºç»“æœå¦‚ä¸‹ï¼š

![](https://i-blog.csdnimg.cn/blog_migrate/1b26bf5d0b9e673b28536c5b1819fe74.png)

æˆ‘ä»¬åœ¨ Vue å¼€å‘è€…å·¥å…·ä¸­ä¹Ÿå¯ä»¥çœ‹åˆ°ï¼Œnameã€genderã€age è¿™ä¸‰ä¸ªå±æ€§éƒ½æ˜¯é…ç½®åœ¨ prop é…ç½®é¡¹ä¸­

![](https://i-blog.csdnimg.cn/blog_migrate/f0c63885090a912997d75b409f20e507.png)

ğŸŒ¿æ‰©å±•

ä¹‹å‰æˆ‘ä»¬è¯´è¿‡äº†é€šè¿‡åœ¨ä¼ é€’æ•°æ®æ—¶ï¼Œæ ‡ç­¾é»˜è®¤æ˜¯ key=â€œvalueâ€ çš„å½¢å¼ï¼Œé»˜è®¤æƒ…å†µä¸‹ï¼Œtemplate é‡Œé¢æ¥å—çš„æ•°æ®é»˜è®¤æ˜¯å­—ç¬¦ç±»å‹ï¼Œä½†æ˜¯æˆ‘ä»¬å¯ä»¥é€šè¿‡ `v-bind` å°†é‡Œé¢çš„å‚æ•°å½“åš JS è¡¨è¾¾å¼ï¼Œå…¶å€¼ä¸º**å¼•å·é‡Œé¢è¡¨è¾¾å¼è¿è¡Œçš„ç»“æœ**ï¼Œä¾‹å¦‚ `<Student :age="18"/>`ï¼Œæ­¤æ—¶ 18 ä¼šè¢«å½“åšä¸€ä¸ªæ•°å€¼ç±»å‹

![](https://i-blog.csdnimg.cn/blog_migrate/f55b0ab03fa89f1f067d9a4d4bf016c7.png)

**å½“æˆ‘ä»¬ä½¿ç”¨äº†é™åˆ¶ç±»å‹çš„å†™æ³•ï¼Œå¦‚æœä¸€æ—¦ä¼ å…¥çš„å‚æ•°å‡ºç°ç±»å‹ä¸åŒ¹é…çš„è¿›è¡Œï¼Œæ§åˆ¶å°å°†ä¼šæŠ¥é”™**

![](https://i-blog.csdnimg.cn/blog_migrate/9bf7d22e028d0540a1097bee1ce3ffc8.png)

> è¿˜æœ‰ JS é‡Œé¢æ²¡æœ‰ intã€long ç±»å‹ï¼Œåªæœ‰ Number è¡¨ç¤ºçš„æ˜¯æ•°å€¼ç±»å‹

**å¯¹é…ç½®é¡¹ç›¸å…³çš„å‚æ•°è¿›è¡Œä¿®æ”¹éœ€è¦é—´æ¥è¿›è¡Œä¿®æ”¹ï¼Œå¦‚ä¸‹ï¼š**

```
// Student.vue
<template>
  <div>
    <h2>å­¦ç”Ÿå§“å: {{name}}</h2>
    <h2>å­¦ç”Ÿæ€§åˆ«: {{gender}}</h2>
    <h2>å­¦ç”Ÿå¹´é¾„: {{myAge+1}}</h2>
    <button @click="updateAge">ç‚¹å‡»æˆ‘æ”¹å˜å¹´é¾„</button>
  </div>
</template>

<script>
export default {
  data() {
    return {
      myAge: this.age,
    };
  },
  methods: {
    updateAge() {
      this.myAge = 20;
    }
  },
  props: {
    name: String,
    gender: String,
    age: Number,
  },
};
</script>

```

**ä¸ºé…ç½®é¡¹ä¸­æŸä¸ªå‚æ•°è¦è®¾ç½®ä¸º requireï¼Œå¦‚æœæ²¡æœ‰è¿›è¡Œä¼ é€’å‚æ•°ï¼Œé‚£ä¹ˆå°†ä¼šæŠ¥é”™å¦‚ä¸‹ï¼š**

![](https://i-blog.csdnimg.cn/blog_migrate/e86d826f9d779d9ec09a6e5abf192e45.png)

**props é…ç½®é¡¹ä¸­ä¸èƒ½ä½¿ç”¨ keyã€ref ç­‰ vue å·²ç»å¾ç”¨çš„å…³é”®å­—**

![](https://i-blog.csdnimg.cn/blog_migrate/7ccad9c3de81d9352e1107e476a3d2b3.png)

> ç¿»è¯‘ï¼šâ€œkeyâ€ æ˜¯ä¿ç•™å­—

### 7.7 mixin æ··å…¥

åŠŸèƒ½ï¼šæŠŠå¤šä¸ªç»„ä»¶å…±ç”¨çš„é…ç½®æå–æˆä¸€ä¸ªæ··å…¥å¯¹è±¡

ä½¿ç”¨æ–¹å¼ï¼š

1.  å®šä¹‰æ··åˆåŒæ—¶å°†å…¶æš´éœ²å‡ºå»
    
    ```
    export const mixin_1{
    	data(){â€¦},
    	methods(){â€¦},
    	â€¦
    }
    
    ```
    
2.  ä½¿ç”¨æ··å…¥
    
    *   å…¨å±€æ··å…¥
        
        ```
        Vue.mixin(xxx)
        
        ```
        
    *   å±€éƒ¨æ··å…¥
        
        ```
        // å¯¼å…¥æ··å…¥
        import {xxx,xxxxï¼Œâ€¦} from url
        // åœ¨é…ç½®é¡¹ä¸­é…ç½® mixins
        mixins:['xxx','xxx',â€¦]
        
        ```
        

> â„¹ï¸ å½“æ··å…¥çš„ data æˆ– methods ä¸ åŸæ•°æ® data æˆ– methods é…ç½®é¡¹ä¸­çš„æ•°æ®å‘ç”Ÿå†²çªæ—¶ï¼Œä»¥åŸæ•°æ®ä¸ºä¸»ï¼›è€Œå¦‚æœæ˜¯é’©å­å‡½æ•°ï¼Œåˆ™éƒ½ä¼šæ‰§è¡Œ

mixin æ··åˆçš„ä½œç”¨å…¶å®å°±æ˜¯å…±äº«ç›¸åŒçš„é…ç½®ï¼Œæé«˜ä»£ç å¤ç”¨ç‡ï¼Œæˆ‘ä»¬ç°åœ¨ä¸¾ä¾‹å¦‚ä¸‹ï¼š

```
// åœ¨ Student.vue ä¸­åšå‡ºå¦‚ä¸‹é…ç½®
<template>
  <div>
    <h2>å­¦ç”Ÿå§“å: {{name}}</h2>
    <h2>å­¦ç”Ÿæ€§åˆ«: {{gender}}</h2>
    <h2>å­¦ç”Ÿå¹´é¾„: {{myAge+1}}</h2>
    <button @click="showInfo">ç‚¹å‡»æ˜¾ç¤ºå…¨éƒ¨ä¿¡æ¯</button>
  </div>
</template>

<script>
import {showInfo} from '../mixin';
export default {
  data() {
    return {
      myAge: this.age,
    };
  },
 props:['name', 'gender', 'age'],
 mixins:[showInfo]
}
</script>

```

```
// åœ¨ School.vue æ–‡ä»¶ä¸­åšå‡ºå¦‚ä¸‹é…ç½®
<template>
  <div>
    <h2>å­¦æ ¡åç§°:{{schoolName}}</h2>
    <h2>å­¦æ ¡åœ°å€:{{schoolAddress}}</h2>
    <button @click='showInfo'>ç‚¹æˆ‘æ˜¾ç¤ºå…¨éƒ¨ä¿¡æ¯</button>
  </div>
</template>

<script>
import {showInfo} from '../mixin';
// ä½¿ç”¨é»˜è®¤æš´éœ²å°†Schoolç»„ä»¶æš´éœ²ç»™App.vue
export default {
    name:'School',
    data() {
        return {
            schoolName:'æ±Ÿè¥¿å¸ˆèŒƒå¤§å­¦',
            schoolAddress:'æ±Ÿè¥¿å—æ˜Œ',
        }
    },
    mixins:[showInfo]
}

```

```
// mixin.js çš„é…ç½®å¦‚ä¸‹
export const showInfo = {
    methods:{
        showInfo() {
            console.log(this._data);
        }
    }
}

```

```
src                
â”œâ”€ components      
â”‚  â”œâ”€ School.vue   
â”‚  â””â”€ Student.vue  
â”œâ”€ App.vue         
â”œâ”€ main.js         
â””â”€ mixin.js        

```

å¯¹äºå…¨å±€æ··åˆçš„è®¾ç½®ä¸»è¦æ˜¯åœ¨ main.js ä¸­è¿›è¡Œé…ç½®ï¼Œä¾‹å¦‚å¦‚æœå‰é¢æˆ‘ä»¬å†™äº†ä¸€ä¸ª mixin.js æ–‡ä»¶ï¼Œé‡Œé¢ä¸»è¦å­˜æ”¾äº†æˆ‘ä»¬å†™çš„ä¸€ä¸ª methodï¼Œé‚£ä¹ˆæˆ‘ä»¬å¯ä»¥åƒä¸‹é¢çš„è¿™ç§å†™æ³•è¿›è¡Œå…¨å±€é…ç½® mixin

```
// å¼•å…¥ Vue æ¡†æ¶
import Vue from 'vue';
// å¼•å…¥æ€»ç»„ä»¶ App.vue
import App from './App.vue';
// å¼•å…¥ mixin
import {showInfo} from './mixin';
// è¿›è¡Œ mixin çš„å…¨å±€é…ç½®
Vue.mixin(showInfo);
// å…³é—­ç”Ÿäº§æç¤º
Vue.config.productionTip = false;

// åˆ›å»ºVueçš„å®ä¾‹å¯¹è±¡
new Vue({
    // æ¸²æŸ“æ€»ç»„ä»¶Appåˆ°å®¹å™¨ä¸­
    render: h => h(App)
}).$mount('#app')    // æŒ‚è½½ app å®¹å™¨

```

> æ³¨æ„ï¼šè¿™æ ·ç›¸å½“äºæˆ‘ä»¬ç»™ vm å’Œä¸‹é¢çš„æ‰€æœ‰ vc éƒ½é…ç½®äº†è¿™ä¸ª mixin

### 7.8 æ’ä»¶

Vue é‡Œé¢çš„æ’ä»¶**å…¶å®å°±æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œåœ¨è¿™ä¸ªå¯¹è±¡ä¸­å¿…é¡»è¦æœ‰ install æ–¹æ³•**ï¼Œæˆ‘ä»¬æ¥ä¸‹æ¥è‡ªå·±æ¥ç¼–å†™ä¸€ä¸ªæ’ä»¶ï¼š

1.  åœ¨ src æ–‡ä»¶å¤¹ä¸‹çš„ components æ–‡ä»¶å¤¹ä¸‹åˆ›å»º plugins.js
2.  ä¹‹ååœ¨é‡Œé¢å†™å…¥ä»£ç ï¼Œå¹¶æš´éœ²å‡ºå»å³å¯

```
src                
â”œâ”€ components      
â”‚  â”œâ”€ School.vue   
â”‚  â””â”€ Student.vue  
â”œâ”€ App.vue         
â”œâ”€ main.js         
â”œâ”€ mixin.js        
â””â”€ plugins.js: åœ¨é‡Œé¢ä¹¦å†™æ’ä»¶ï¼ˆæ‰©å±•å¯¹è±¡ï¼‰       

```

æ’ä»¶çš„ä½œç”¨æ˜¯ï¼šç”¨æ¥å¢å¼º Vueï¼Œå…¶æœ¬è´¨æ˜¯åŒ…å« install æ–¹æ³•çš„ä¸€ä¸ªå¯¹è±¡ï¼Œinstall æ–¹æ³•çš„ç¬¬ä¸€ä¸ªå‚æ•° Vueï¼Œç¬¬äºŒä¸ªåŠåé¢çš„å‚æ•°æ˜¯æ’ä»¶ä½¿ç”¨è€…ä¼ é€’çš„æ•°æ®

æ’ä»¶é‡Œé¢å¯ä»¥å†™å…¥çš„å†…å®¹ï¼š

```
// 1. æ·»åŠ å…¨å±€è¿‡æ»¤å™¨
Vue.filter()

// 2. æ·»åŠ å…¨å±€æŒ‡ä»¤
Vue.directive()

// 3. é…ç½®å…¨å±€æ··å…¥
Vue.mixin()

// 4. æ·»åŠ å®ä¾‹æ–¹æ³•
Vue.prototype.$myMethods = function(){}

```

**ä½¿ç”¨æ’ä»¶**ï¼š`Vue.use()`

**ç¤ºä¾‹å¦‚ä¸‹ï¼š**

æ’ä»¶ä¸­æˆ‘ä»¬å†™å¦‚ä¸‹å†…å®¹ï¼ˆä¸æ­¢ï¼‰ï¼š

```
export default {
    // install æ–¹æ³•ä¼ å…¥çš„å‚æ•°æ˜¯ Vueï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ Vue è¿›è¡Œå…¨å±€é…ç½®ï¼Œæˆ–è€…ç»™ Vue çš„åŸå‹ä¸Šæ·»åŠ æ–¹æ³•
    install(Vue) {
        // å®šä¹‰å…¨å±€è¿‡æ»¤å™¨
        Vue.filter('format', function(value) {
            // è¯¥è¿‡æ»¤å™¨çš„ä¸»è¦ä½œç”¨æ˜¯å°†8ä½å‡ºç”Ÿæ—¥æœŸæ ¼å¼åŒ–
            return value.splice(0,4) + 'å¹´' + value.splice(4,6) + 'æœˆ' + value.splice(6,8);
        })

        // å®šä¹‰å…¨å±€æŒ‡ä»¤
        Vue.directive('big', function(el, binding) {
            el.innerHTML = binding.value*10;
        })

        // å®šä¹‰å…¨å±€æ··å…¥
        Vue.mixin({
            methods:{
                showInfo() {
                    console.log(this._data);
                }
            }
        })
        
        // ç»™ Vue åŸå‹ä¸Šæ·»åŠ æ–¹æ³•
        Vue.prototype.hello = () => {
            alert('Hello World!');
        }
    }
}

```

åœ¨ main.js ä¸­è¿›è¡Œå¼•ç”¨

```
import plugins from './plugins';
Vue.use(plugins);

```

âš ï¸**æ³¨æ„ï¼š**

å¦‚æœæˆ‘ä»¬æƒ³è¦è°ƒç”¨ prototype æ‰©å±•æ–¹æ³•æ—¶ï¼Œéœ€è¦åƒä¸‹é¢è¿™ä¹ˆé…ç½®ä½¿ç”¨![](https://i-blog.csdnimg.cn/blog_migrate/8024eefbe8bfd39c3eae4193a9deb276.png)

ğŸŒ¿**æ‰©å±•**

plugins é‡Œé¢çš„ install å¯ä»¥ä¸æ­¢æœ‰ä¸€ä¸ª Vue å‚æ•°ï¼Œè¿˜å¯ä»¥ä¼ å…¥å…¶ä»–å‚æ•°ï¼Œç¬¬äºŒä¸ªå‚æ•°åŠä»¥åçš„å‚æ•°éƒ½æ˜¯ç”¨æˆ·è‡ªå®šä¹‰çš„éœ€è¦ä¼ å…¥ä½¿ç”¨çš„å‚æ•°

### 7.9 scoped æ ·å¼

**scoped çš„ä½œç”¨ï¼š**è®©æ ·å¼åœ¨å±€éƒ¨ç”Ÿæ•ˆï¼Œé˜²æ­¢å†²çª

åœ¨ Vue ä¸­ï¼Œæˆ‘ä»¬å•ç‹¬åœ¨æ¯ä¸€ä¸ªå­ç»„ä»¶ä¸­ä¹¦å†™çš„ css æ ·å¼ï¼Œæœ€åéƒ½ä¼šæ•´åˆåˆ°ä¸€èµ·åˆ°ï¼Œæ‰€ä»¥è¿™æ ·å°±ä¼šå¼•èµ·ä¸€ä¸ªé—®é¢˜ï¼Œé‚£å°±æ˜¯æ ·å¼å‘½åå†²çªï¼Œå¦‚ä¸‹ï¼Œæˆ‘ä»¬åœ¨ Student ä¸­ä¹¦å†™äº†ä¸€ä¸ªæ ·å¼ .demoï¼Œè®©èƒŒæ™¯è‰²å˜æˆç²‰è‰²ï¼›å†åœ¨ School ä¸­ä¹¦å†™ä¸€ä¸ªç›¸åŒå‘½åçš„æ ·å¼ .demoï¼Œè®©èƒŒæ™¯è‰²ç¼–ç¨‹æ©™è‰²ï¼Œæœ€ç»ˆæ˜¾ç¤ºæ•ˆæœå¦‚ä¸‹ï¼š

![](https://i-blog.csdnimg.cn/blog_migrate/e013092a7f235718186ead5291c7932e.png)

æ‰“å¼€å¼€å‘è€…å·¥å…·ï¼š

![](https://i-blog.csdnimg.cn/blog_migrate/4c4b1ff3e5a7e45ecda137d06dd22c9f.png)

å¯ä»¥çŸ¥é“ï¼Œåé¢çš„ç»„ä»¶æ ·å¼è¦†ç›–äº†å‰é¢çš„ç»„ä»¶æ ·å¼ï¼Œè¿™åœ¨åˆ†ç»„å¼€å‘ä¸­æ˜¯ååˆ†ä¸æ–¹ä¾¿çš„ï¼Œä¸ºäº†è§£å†³è¿™ä¸€é—®é¢˜ï¼Œ**æˆ‘ä»¬å¯ä»¥åœ¨ style ä¸­æ·»åŠ  scoped å±æ€§**ï¼Œè¿™æ ·ä¸€æ¥ï¼Œ**è¯¥ç»„ä»¶çš„æ ·å¼åªèƒ½ä¸ºè¯¥ç»„ä»¶å†…éƒ¨ä½¿ç”¨ï¼Œå…¶ä»–ç»„ä»¶æ— æ³•ä½¿ç”¨**

> scoped çš„æœ¬æ„å°±æ˜¯å±€éƒ¨ã€èŒƒå›´ï¼Œåœ¨è¿™é‡Œå°±è¡¨ç¤ºå±€éƒ¨ä½œç”¨åŸŸ

![](https://i-blog.csdnimg.cn/blog_migrate/07704ede1792eab4b35fa4beb5637a1e.png)

æˆ‘ä»¬å†æ‰“å¼€æ§åˆ¶å°ï¼Œå¯ä»¥çœ‹åˆ° Vue å·¥ä½œçš„åº•å±‚åŸç†æ˜¯ç»™æ¯ä¸€ä¸ªæ ‡ç­¾åé¢æ·»åŠ ä¸€ä¸ª data-v å¼€å¤´çš„ï¼Œåé¢è¿æ¥ç€ä¸€ä¸²éšæœºå­—ç¬¦çš„å±æ€§æ¥å®ç°å•ç‹¬æŠ½ç¦»å‡ºæ¥çš„æ•ˆæœ

![](https://i-blog.csdnimg.cn/blog_migrate/c19ab247a84bf34ae827c0028aed33f1.png)

ğŸŒ¿**æ‰©å±• 1**

```
ä½†æ˜¯æˆ‘ä»¬éœ€è¦çŸ¥é“ä¸€ç‚¹çš„å°±æ˜¯æˆ‘ä»¬åœ¨App.vue ä¸­æ·»åŠ çš„æ ·å¼åœ¨æ‰€æœ‰ç»„ä»¶ä¸­éƒ½å¯ä»¥å…±äº«ï¼Œæ‰€ä»¥ App.vue ä¸­çš„ style æ˜¯ä¸ä¼šæ·»åŠ  scoped å±æ€§çš„

```

ğŸŒ¿**æ‰©å±• 2**

Vue ä¸­çš„ style å±æ€§ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥æ·»åŠ å±æ€§ langï¼Œè¡¨ç¤ºæ ·å¼ç¼–è¾‘è¯­è¨€æ˜¯é€‰ç”¨ less è¿˜æ˜¯ css

~æˆªæ­¢åˆ° 2022-11-26ï¼ŒVue æ‰€ä½¿ç”¨çš„çš„ç‰ˆæœ¬æ‰€ä½¿ç”¨çš„çš„ webpack æ˜¯ 4.6ï¼ˆç¨³å®šç‰ˆï¼Œè€Œéä½¿ç”¨ 5.x ç‰ˆæœ¬ï¼‰~ï¼Œè€Œ less-loader æœ€æ–°ç‰ˆæœ¬æ˜¯ 11.0ï¼Œwebapck 5.x æ‰æ”¯æŒ less-loader 8.x åŠä»¥ä¸Šç‰ˆæœ¬

```
# æŸ¥çœ‹ less-loader æ‰€æœ‰ç‰ˆæœ¬
npm view less-loader versions

# æŸ¥çœ‹ webpack æ‰€æœ‰ç‰ˆæœ¬
npm view webpack versions

# æŸ¥çœ‹å½“å‰ä½¿ç”¨çš„ webpack ç‰ˆæœ¬
npx webpack -v

```

> å¦‚æœå½“å‰ Vue ä½¿ç”¨çš„æ˜¯ webpack 4.6ï¼Œæ‰€ä»¥æˆ‘ä»¬æœ€å¥½ä¸‹è½½ less-loader 7.x ç‰ˆæœ¬

8 TodoList æ¡ˆä¾‹
-------------

æˆ‘ä»¬æ¥åˆ° ä¸€ä¸ª todolist çš„å®˜ç½‘ä¸Šï¼ŒæŸ¥çœ‹ç›¸å…³çš„åŠŸèƒ½ï¼Œå…¶å® todolist å°±æ˜¯æˆ‘ä»¬æ‰‹æœºä¸Šçš„ä»»åŠ¡æ¸…å•åŠŸèƒ½ï¼Œ[å®˜ç½‘ä¼ é€é—¨](https://www.todolist.cn/)

![](https://i-blog.csdnimg.cn/blog_migrate/d5616fccea361a86395f4f081c82b1be.gif)

æˆ‘ä»¬æ¥ä¸‹æ¥è¦ä½¿ç”¨**ç»„ä»¶åŒ–ç¼–ç æµç¨‹**æ¥å®ç°è¯¥åŠŸèƒ½çš„å¼€å‘ï¼Œå…·ä½“æµç¨‹å¦‚ä¸‹ï¼š

1.  å®ç°é™æ€ç»„ä»¶ï¼šæŠ½å–ç»„ä»¶ï¼Œä½¿ç”¨ç»„ä»¶å®ç°é™æ€é¡µé¢
2.  å±•ç¤ºåŠ¨æ€æ•°æ®
    *   æ•°æ®çš„ç±»å‹ã€åç§°æ—¶ä»€ä¹ˆï¼Ÿ
    *   æ•°æ®ä¿å­˜åœ¨é‚£ä¸ªç»„ä»¶ä¸­ï¼Ÿ
3.  äº¤äº’â€”â€”ä»ç»‘å®šäº‹ä»¶ç›‘å¬å¼€å§‹

**ç»„ä»¶ç»“æ„å¦‚ä¸‹ï¼š**

![](https://i-blog.csdnimg.cn/blog_migrate/64a1d924f5e114bfaf27399c359c3457.png)

æˆ‘ä»¬é¦–å…ˆåº”äº‹å…ˆå†™å¥½ HTML é™æ€é¡µé¢ï¼Œä¹‹åå°† HTML ä¸­çš„ DOM ç»“æ„å’Œ CSS æ ·å¼è¿›è¡Œæ‹†åˆ†ï¼Œå½¢æˆè¿™æ ·çš„å±‚çº§ï¼š

```
src                   
â”œâ”€ components         
â”‚  â”œâ”€ ListFooter.vue  
â”‚  â”œâ”€ ListHeader.vue  
â”‚  â”œâ”€ ListItem.vueï¼šListTotal ä¸­çš„å­åˆ—è¡¨é¡¹  
â”‚  â””â”€ ListTotal.vue   
â”œâ”€ App.vue            
â”œâ”€ main.js            
â”œâ”€ mixin.js           
â””â”€ plugins.js         

```

### 8.1 åˆå§‹åŒ–åˆ—è¡¨

ä¸ºäº†èƒ½å¤Ÿæ¸²æŸ“å¥½ todolist ä¸­å„é¡¹åˆ—è¡¨ï¼Œæˆ‘ä»¬éœ€è¦åšå‡ºå¦‚ä¸‹æ“ä½œï¼š

```
// ListTotal
<template>
  <ul class="todo-main">
    <ListItem v-for="todo in todos" :key="todo.id" :todoObj='todo'/>
  </ul>
</template>

<script>
import ListItem from "./ListItem";

export default {
  name: "ListTotal", 
  components: {
    ListItem,
  },
  data() {
    return {
      todos: [
        { id: "001", title: "åƒé¥­", done: true },
        { id: "002", title: "ç¡è§‰", done: false },
        { id: "003", title: "æ‰“è±†è±†", done: true },
      ],
    };
  },
};
</script>

```

```
// ListItem
<template>
      <li>
      <label>
        <input type="checkbox" :checked="todoObj.done"/>
        <span>{{todoObj.title}}</span>
      </label>
      <button class="btn btn-danger" style="display:none">åˆ é™¤</button>
    </li>
</template>

<script>
export default {
    name:'ListItem', 
    props:['todoObj']                                                                           
}
</script>

```

*   é¦–å…ˆï¼Œæˆ‘ä»¬éœ€è¦åœ¨ item æ–‡ä»¶é‡Œé¢é…ç½® props é¡¹ï¼ˆæ³¨æ„ä¸è¦å°‘äº† â€œsâ€ï¼‰ï¼Œtotal æ–‡ä»¶é‡Œé¢ä¼ å…¥çš„å‚æ•°æ˜¯ç»è¿‡ vue è§£æå¥½çš„ JS è¡¨è¾¾å¼ï¼ˆåœ¨è¿™é‡Œä¸ºè§£æä¸€ä¸ª todo å¯¹è±¡ï¼Œtodo å¯¹è±¡æ¥è‡ªäº todos æ•°ç»„çš„æ¯ä¸€ä¸ªå…ƒç´ ï¼‰
    
*   å¦‚ä½•æ ¹æ® todoObj.done? æ¥åˆ¤æ–­æ˜¯å¦å‹¾é€‰ï¼Ÿä½¿ç”¨ checked å±æ€§ï¼Œæ³¨æ„ä¸€å®šè¦ä½¿ç”¨ â€œ:â€ æ¥è§£æ todoObj.done çš„å¸ƒå°”å€¼
    
*   å¯èƒ½å‡ºç°çš„é”™è¯¯ï¼štodo.id çš„å€¼ä¸€å®šä¸èƒ½é‡å¤ï¼Œå¦åˆ™ä¼šæŠ¥é”™å¦‚ä¸‹ï¼š
    
    ![](https://i-blog.csdnimg.cn/blog_migrate/24176db2e7dcd5149ecde0e135d13b03.png)
    
    > "001" è¿™ä¸ªä¸»é”®æ ‡è¯†æœ‰é‡å¤çš„å€¼ï¼Œè¿™ä¼šå¯¼è‡´æ›´è¡Œå¼‚å¸¸
    

åˆæ­¥æ˜¾ç¤ºæ•ˆæœå¦‚ä¸‹ï¼š

![](https://i-blog.csdnimg.cn/blog_migrate/915860bb03e7cc5470fe7a733d2f0af4.png)

### 8.2 æ·»åŠ åˆ—è¡¨

å¦‚æœæˆ‘ä»¬æƒ³è¦æ·»åŠ åˆ—è¡¨ï¼Œé‚£ä¹ˆè‚¯å®šé¦–å…ˆå¾—è·å–è¦æ·»åŠ çš„å€¼ï¼Œè¦æ·»åŠ çš„å€¼å¤„åœ¨æœç´¢æ¡†ä¸­ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦ç»™æœç´¢æ·»åŠ äº‹ä»¶

```
<input type="text" placeholder="è¯·è¾“å…¥ä½ çš„ä»»åŠ¡åç§°ï¼ŒæŒ‰å›è½¦é”®ç¡®è®¤" @keyup.enter="add"/>

```

```
// methods äº‹ä»¶
add(e) {
	// é€šè¿‡ e.target.value æ¥å¾—åˆ°æœç´¢æ¡†ä¸­çš„å€¼
	// console.log(e.target.value);	
    const todo = {id:nanoid(), title:e.target.value, done:false};
}

```

*   è¿™é‡Œéœ€è¦è€ƒè™‘ä¸€ä¸ªé—®é¢˜ï¼Œå°±æ˜¯å¦‚ä½•åŠ¨æ€ç”Ÿæˆå”¯ä¸€æ ‡è¯† id çš„å€¼ï¼Ÿ
    
    æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ uuid è¿™ä¸ªåº“ï¼Œä½†æ˜¯ uuid ç”Ÿæˆçš„å”¯ä¸€æ ‡è¯†å¤ªé•¿ï¼Œæˆ‘ä»¬å¯ä»¥æ¢ä¸€ä¸ªæ›´åŠ ç²¾ç®€çš„åº“ nanoidï¼Œå®‰è£…å‘½ä»¤ä¸ºï¼š
    
    ```
    npm i nanoid
    
    ```
    
    nanoid é‡‡å–çš„æ˜¯åˆ†åˆ«æš´éœ²ï¼Œæ‰€ä»¥å¾—ç”¨å¦‚ä¸‹ä»£ç è¿›è¡Œå¼•å…¥:
    
    ```
    import {nanoid} from 'nanoid'
    
    ```
    

è¿™é‡Œè¿˜æœ‰ç¬¬äºŒä¸ªéš¾ç‚¹ï¼šæˆ‘ä»¬åœ¨å‰é¢å·²ç»å­¦ä¹ åˆ°äº†ï¼Œå¯ä»¥é€šè¿‡ props é…ç½®é¡¹å®Œæˆçˆ¶å­ç»„ä»¶é—´çš„é€šä¿¡ï¼Œ**ä½†æ˜¯å¦‚ä½•å®ç°åœ¨å…„å¼Ÿç»„ä»¶ä¸­è¿›è¡Œé€šä¿¡ï¼Ÿ**ï¼Œåœ¨è¿™é‡Œå…·ä½“ä½“ç°åœ¨å¦‚ä½•å®ç°åœ¨ Header ä¸ Total ç»„ä»¶ä¹‹é—´çš„é€šä¿¡ï¼Œå°† Header åˆ›å»ºå¾—åˆ°çš„å¯¹è±¡ä¼ é€’ç»™ Total ç»„ä»¶ï¼Œæ·»åŠ åˆ°é‡Œé¢ data ä¸­å»

å…·ä½“å®ç°æ€è·¯å¦‚ä¸‹ï¼š

![](https://i-blog.csdnimg.cn/blog_migrate/d12143cd4a26427bd700f1ce372bcbd9.png)

*   åœ¨è¿™é‡Œï¼šæˆ‘ä»¬éœ€è¦äº†è§£åˆ°çš„ä¸€ç‚¹å°±æ˜¯**åœ¨ props ä¸­çš„é…ç½®é¡¹ï¼Œæœ€ç»ˆéƒ½ä¼šæŒ‚è½½åˆ° vc èº«ä¸Š**
    
*   æˆ‘ä»¬è¦å®ç°å­ç»„ä»¶ä¼ é€’æ•°æ®åˆ°çˆ¶ç»„ä»¶ï¼Œå¯ä»¥é‡‡ç”¨å¦‚ä¸‹æ€è·¯ï¼š
    
    1.  åœ¨çˆ¶ç»„ä»¶ä¸­å®šä¹‰ä¸€ä¸ªå‡½æ•°ï¼Œå°†è¯¥å‡½æ•°ä¼ é€’åˆ°å­ç»„ä»¶ä¸­
    2.  å­ç»„ä»¶åˆ©ç”¨ props é…ç½®é¡¹å°†æ¥å—åˆ°çš„å‡½æ•°æŒ‚è½½åˆ° vc èº«ä¸Šä¹‹åï¼Œè°ƒç”¨è¯¥å‡½æ•°æ¥ä¸ºçˆ¶ç»„ä»¶ä¼ é€’å‚æ•°ï¼Œè¿›è€Œè¿›è¡Œæ“ä½œ
    
    ![](https://i-blog.csdnimg.cn/blog_migrate/4006e1766d126a19b8c2a6317cab5f87.png)

æˆ‘ä»¬åœ¨è¿™é‡Œå°±ä¸è®²è§£å¦‚ä½•å°†çˆ¶ç»„ä»¶çš„å‚æ•°ä¼ é€’ç»™å­ç»„ä»¶äº†ï¼Œç›´æ¥å±•ç¤ºç›¸å…³ä»£ç ï¼ˆå»é™¤æ‰ css æ ·å¼ï¼‰

```
// App
<template>
  <div id="root">
    <div class="todo-container">
      <div class="todo-wrap">
        <ListHeader :addTodo="addTodo"/>
        <ListTotal :todos="todos"/>
        <ListFooter/>
      </div>
    </div>
  </div>
</template>

<script>
// å¼•å…¥å­ç»„ä»¶
import ListHeader from "./components/ListHeader";
import ListTotal from "./components/ListTotal";
import ListFooter from "./components/ListFooter";

export default {
  name: "App",
  methods: {
    addTodo(todoObj) {
      this.todos.unshift(todoObj);
    }
  },
  components: {
    ListHeader,
    ListTotal,
    ListFooter,
  },
  data() {
    return {
      todos: [
        { id: "001", title: "åƒé¥­", done: true },
        { id: "002", title: "ç¡è§‰", done: false },
        { id: "003", title: "æ‰“è±†è±†", done: true },
      ],
    };
  },
};
</script>

```

```
// ListHeader
<template>
  <div class="todo-header">
    <input type="text" placeholder="è¯·è¾“å…¥ä½ çš„ä»»åŠ¡åç§°ï¼ŒæŒ‰å›è½¦é”®ç¡®è®¤" @keyup.enter="add"/>
  </div>
</template>

<script>
import {nanoid} from 'nanoid';
export default {
  name: "ListHeader",
  props:['addTodo'],  // ä¼ é€’çš„å‡½æ•°æœ€ç»ˆæŒ‚è½½åˆ° vc èº«ä¸Š
  methods: {
    add(e) {
      // åˆ¤ç©ºå¤„ç†
      if(!e.target.value.trim()) return;
      // å°†ç”¨æˆ·çš„è¾“å…¥åŒ…è£…ç§°ä¸ºä¸€ä¸ª todo å¯¹è±¡
      const todo = {id:nanoid(), title:e.target.value, done:false};
      // console.log(todo);
      // è°ƒåŠ¨å‡½æ•° addTodo, å°†å‚æ•° todo ä¼ é€’åˆ°çˆ¶ç»„ä»¶ä¸­ App ä¸­è¿›è¡Œä½¿ç”¨
      this.addTodo(todo);
      // å½“æ·»åŠ å®Œæˆä¹‹åï¼Œå°† input æ¡†ä¸­çš„å†…å®¹æ¸…ç©º
      e.target.value = '';
    }
  }
};
</script>

```

### 8.3 å‹¾é€‰æ“ä½œ

å‹¾é€‰æ“ä½œæ¶‰åŠå­™å­ç»„ä»¶ç»™çˆ·çˆ·ç»„ä»¶ä¹‹é—´çš„é€šä¿¡ï¼Œæ“ä½œä¹Ÿæ˜¯ä¸€æ ·çš„ï¼š

**å…ˆé€šè¿‡çˆ·çˆ·ç»„ä»¶ä¼ é€’å‚æ•°ç»™çˆ¶ç»„ä»¶ï¼Œçˆ¶ç»„ä»¶å†å°†å‚æ•°ä¼ é€’ç»™å­™å­ç»„ä»¶**ï¼Œä»£ç å¦‚ä¸‹ï¼š

```
// App
<template>
  <div id="root">
    <div class="todo-container">
      <div class="todo-wrap">
        <ListHeader :addTodo="addTodo"/>
        <ListTotal :todos="todos" :handlerCheck="handlerCheck"/>	// å°† handlerCheck å‡½æ•°ä¼ é€’ç»™ ListTotal
        <ListFooter/>
      </div>
    </div>
  </div>
</template>

<script>
// å¼•å…¥å­ç»„ä»¶
import ListHeader from "./components/ListHeader";
import ListTotal from "./components/ListTotal";
import ListFooter from "./components/ListFooter";

export default {
  name: "App",
  methods: {
    // æ·»åŠ åˆ—è¡¨
    addTodo(todoObj) {
      this.todos.unshift(todoObj);
    },

    // ç®¡ç†é€‰ä¸­çŠ¶æ€
    handlerCheck(list_id) {
      this.todos.forEach((todo) => {
        if (todo.id == list_id) {
          todo.done = !todo.done;
        }
      })
    }
  },
  components: {
    ListHeader,
    ListTotal,
    ListFooter,
  },
  data() {
    return {
      todos: [
        { id: "001", title: "åƒé¥­", done: true },
        { id: "002", title: "ç¡è§‰", done: false },
        { id: "003", title: "æ‰“è±†è±†", done: true },
      ],
    };
  },
};
</script>

```

```
<template>
  <ul class="todo-main">
    <ListItem v-for="todo in todos" :key="todo.id" :todoObj='todo' :handlerCheck="handlerCheck"/>
// å†å°† handlerCheck ä¼ é€’ç»™ ListItem
  </ul>
</template>

<script>
import ListItem from "./ListItem";

export default {
  name: "ListTotal",
  components: {
    ListItem,
  },
  props:['todos', "handlerCheck"],
// æ¥æ”¶ä¼ é€’è¿‡æ¥çš„ handlerCheck
};
</script>

```

```
// ListItem
<template>
      <li>
      <label>
        <input type="checkbox" :checked="todoObj.done" @change="handlerCheck(todoObj.id)"/>
// åœ¨ ListItem ä¸­è¿›è¡Œè°ƒç”¨
        <span>{{todoObj.title}}</span>
      </label>
      <button class="btn btn-danger" style="display:none">åˆ é™¤</button>
    </li>
</template>

<script>
export default {
    name:'ListItem', 
    props:['todoObj', 'handlerCheck'],                                                                     
}
</script>

```

æ˜¾ç¤ºæ•ˆæœå¦‚ä¸‹ï¼š

![](https://i-blog.csdnimg.cn/blog_migrate/5cd5cc61ddcd1fed4773ab846e534673.gif)

å…¶å®æˆ‘ä»¬å¦‚æœä»…ä»…æ˜¯æƒ³å®ç°ä¾¦æµ‹é€‰ä¸­çŠ¶æ€ï¼Œæˆ‘ä»¬å®Œå…¨å¯ä»¥ä½¿ç”¨ v-model è¿™ä¸ªåŒå‘æ•°æ®ç»‘å®šï¼Œè¿™å°±ä¸éœ€è¦ä½¿ç”¨ç»„ä»¶ä¹‹é—´çš„é€šä¿¡ï¼Œå®ç°ä»£ç å¦‚ä¸‹ï¼š

```
<input type="checkbox" v-model="this.todoObj.done"/>

```

> è¿™é‡Œå¯èƒ½æœ‰æœ‰äººå¾ˆå¥‡æ€ªï¼ŒtodoObj æ˜¯ props ä¸­çš„ä¸€ä¸ªé…ç½®é¡¹ï¼ŒtofoObj éš¾é“ä¸åº”è¯¥æ˜¯ä¸èƒ½è¿›è¡Œä¿®æ”¹çš„å—ï¼Ÿå…¶å®è¿™æ¶‰åŠåˆ°æ ˆå’Œå †ä¸¤ä¸ªå­˜å‚¨åŒºåŸŸä¹‹åˆ†ï¼Œå­¦è¿‡ Java çš„åº”è¯¥å¯¹æ­¤éƒ½æ˜¯æ¯”è¾ƒç†Ÿæ‚‰çš„ï¼š
> 
> *   åŸºæœ¬æ•°æ®ç±»å‹éƒ½æ˜¯å­˜å‚¨åœ¨å †ä¸­
> *   å¼•ç”¨æ•°æ®ç±»å‹çš„åœ°å€éƒ½æ˜¯å­˜å‚¨åœ¨æ ˆä¸­ï¼Œå€¼å­˜å‚¨åœ¨å †ä¸­ï¼Œè®¿é—®çš„æ—¶å€™éƒ½æ˜¯é€šè¿‡åœ°å€å»è®¿é—®å­˜å‚¨åœ¨å †ä¸­çš„å€¼
> *   å¯¹åŸºæœ¬æ•°æ®ç±»å‹ï¼Œå¯¹å…¶å€¼çš„æ”¹å˜ï¼ŒVue æ˜¯å¯ä»¥ç›‘æµ‹çš„åˆ°ï¼Œä½†æ˜¯å¯¹äºå¼•ç”¨æ•°æ®ç±»å‹ï¼Œåªæœ‰åœ°å€å‘ç”Ÿæ”¹å˜ï¼ŒVue æ‰èƒ½ä¾¦æµ‹çš„åˆ°

### 8.4 åˆ é™¤æ“ä½œ

åˆ é™¤æ“ä½œåŒå‹¾é€‰æ“ä½œçš„åŸç†å¤§ä½“ç›¸åŒï¼Œè¿™é‡Œä¸è¿‡å¤šèµ˜è¿°ï¼Œåªå±•ç¤ºä¸€ä¸‹åˆ é™¤ä»£ç çš„æ•°ç»„æ“ä½œï¼š

```
handlerDelete(list_id) {
  this.todos = this.todos.filter((todo) => todo.id !== list_id)
}

```

### 8.5 åº•éƒ¨çŠ¶æ€æ äº¤äº’

*   è·å–æ€»åˆ—è¡¨é•¿åº¦ï¼š`todos.length`
    
*   è·å–å¤„äºé€‰ä¸­çŠ¶æ€çš„åˆ—è¡¨ï¼š
    
    ```
    computed: {
      doneTotal() {
        return this.todos.reduce((pre, current) => {  // pre ä¸ºä¸Šä¸€æ¬¡ reduce å‡½æ•°æ‰§è¡Œçš„è¿”å›å€¼, current æŒ‡å‘çš„æ˜¯å½“å‰çš„todoé¡¹         
          return pre + (current.done ? 1 : 0);
        }, 0)
      }
    }
    
    ```
    

é™¤æ­¤ä¹‹å¤–ï¼Œè¿˜æœ‰ä¸€äº›äº¤äº’ï¼Œæ¯”å¦‚ç‚¹å‡»å…¨é€‰æŒ‰é’®å’Œæ¸…ç©ºæ‰€å“Ÿå·²ç»å®Œæˆçš„åˆ—è¡¨é¡¹

### 8.6 ä»£ç æ±‡æ€»

```
// App
<template>
  <div id="root">
    <div class="todo-container">
      <div class="todo-wrap">
        <ListHeader :addTodo="addTodo"/>
        <ListTotal :todos="todos" :handlerCheck="handlerCheck" :handlerDelete="handlerDelete"/>
        <ListFooter :todos="todos" :clearAllTodo="clearAllTodo"/>
      </div>
    </div>
  </div>
</template>

<script>
// å¼•å…¥å­ç»„ä»¶
import ListHeader from "./components/ListHeader";
import ListTotal from "./components/ListTotal";
import ListFooter from "./components/ListFooter";

export default {
  name: "App",
  methods: {
    // æ·»åŠ åˆ—è¡¨
    addTodo(todoObj) {
      this.todos.unshift(todoObj);
    },

    // ç®¡ç†é€‰ä¸­çŠ¶æ€
    handlerCheck(list_id) {
      this.todos.forEach((todo) => {
        if (todo.id == list_id) {
          todo.done = !todo.done;
        }
      })
    },

    // åˆ é™¤é€‰ä¸­åˆ—è¡¨
    handlerDelete(list_id) {
      this.todos = this.todos.filter((todo) => todo.id !== list_id)
    },

    // æ¸…ç©ºæ‰€æœ‰çš„åˆ—è¡¨
    clearAllTodo() {
      this.todos = this.todos.filter((todo) => {
        return !todo.done;
      })
    }
  },
  components: {
    ListHeader,
    ListTotal,
    ListFooter,
  },
  data() {
    return {
      todos: [
        { id: "001", title: "åƒé¥­", done: true },
        { id: "002", title: "ç¡è§‰", done: false },
        { id: "003", title: "æ‰“è±†è±†", done: true },
      ],
    };
  },
};
</script>

<style>
/*base*/
body {
  background: #fff;
}

.btn {
  display: inline-block;
  padding: 4px 12px;
  margin-bottom: 0;
  font-size: 14px;
  line-height: 20px;
  text-align: center;
  vertical-align: middle;
  cursor: pointer;
  box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.2),
    0 1px 2px rgba(0, 0, 0, 0.05);
  border-radius: 4px;
}

.btn-danger {
  color: #fff;
  background-color: #da4f49;
  border: 1px solid #bd362f;
}

.btn-danger:hover {
  color: #fff;
  background-color: #bd362f;
}

.btn:focus {
  outline: none;
}

.todo-container {
  width: 600px;
  margin: 0 auto;
}
.todo-container .todo-wrap {
  padding: 10px;
  border: 1px solid #ddd;
  border-radius: 5px;
}
</style>

```

```
// ListHeader
<template>
  <div class="todo-header">
    <input type="text" placeholder="è¯·è¾“å…¥ä½ çš„ä»»åŠ¡åç§°ï¼ŒæŒ‰å›è½¦é”®ç¡®è®¤" @keyup.enter="add"/>
  </div>
</template>

<script>
import {nanoid} from 'nanoid';
export default {
  name: "ListHeader",
  props:['addTodo'],  // ä¼ é€’çš„å‡½æ•°æœ€ç»ˆæŒ‚è½½åˆ° vc èº«ä¸Š
  methods: {
    add(e) {
      // åˆ¤ç©ºå¤„ç†
      if(!e.target.value.trim()) return;
      // å°†ç”¨æˆ·çš„è¾“å…¥åŒ…è£…ç§°ä¸ºä¸€ä¸ª todo å¯¹è±¡
      const todo = {id:nanoid(), title:e.target.value, done:false};
      // console.log(todo);
      // è°ƒåŠ¨å‡½æ•° addTodo, å°†å‚æ•° todo ä¼ é€’åˆ°çˆ¶ç»„ä»¶ä¸­ App ä¸­è¿›è¡Œä½¿ç”¨
      this.addTodo(todo);
      // å½“æ·»åŠ å®Œæˆä¹‹åï¼Œå°† input æ¡†ä¸­çš„å†…å®¹æ¸…ç©º
      e.target.value = '';
    }
  }
};
</script>

<style scoped>

/*header*/
.todo-header input {
  width: 560px;
  height: 28px;
  font-size: 14px;
  border: 1px solid #ccc;
  border-radius: 4px;
  padding: 4px 7px;
}

.todo-header input:focus {
  outline: none;
  border-color: rgba(82, 168, 236, 0.8);
  box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.075),
    0 0 8px rgba(82, 168, 236, 0.6);
}

</style>

```

```
// ListTotal
<template>
  <ul class="todo-main">
    <ListItem v-for="todo in todos" :key="todo.id" :todoObj='todo' :handlerCheck="handlerCheck" :handlerDelete="handlerDelete"/>
  </ul>
</template>

<script>
import ListItem from "./ListItem";

export default {
  name: "ListTotal",
  components: {
    ListItem,
  },
  props:['todos', "handlerCheck", "handlerDelete"],

};
</script>

<style scoped>
/*main*/
.todo-main {
  margin-left: 0px;
  border: 1px solid #ddd;
  border-radius: 2px;
  padding: 0px;
}

.todo-empty {
  height: 40px;
  line-height: 40px;
  border: 1px solid #ddd;
  border-radius: 2px;
  padding-left: 5px;
  margin-top: 10px;
}
</style>

```

```
// ListItem 
<template>
      <li>
      <label>
        <input type="checkbox" :checked="todoObj.done" @change="handlerCheck(todoObj.id)"/>
        <span>{{todoObj.title}}</span>
      </label>
      <button class="btn btn-danger" @click="deleteTodo(todoObj.id)">åˆ é™¤</button>
    </li>
</template>

<script>
export default {
    name:'ListItem', 
    props:['todoObj', 'handlerCheck', 'handlerDelete'],     
    methods: {
      deleteTodo(list_id) {
        if(confirm("ç¡®è®¤åˆ é™¤")) {
          this.handlerDelete(list_id);
        }
      }
    }                                                                
}
</script>

<style scoped>

/*item*/
li {
  list-style: none;
  height: 36px;
  line-height: 36px;
  padding: 0 5px;
  border-bottom: 1px solid #ddd;
}

li label {
  float: left;
  cursor: pointer;
}

li label li input {
  vertical-align: middle;
  margin-right: 6px;
  position: relative;
  top: -1px;
}

li button {
  float: right;
  display: none;
  margin-top: 3px;
}

li:before {
  content: initial;
}

li:last-child {
  border-bottom: none;
}

li:hover {
  background: #ccc;
  /* display: block; */
}

li:hover button {
  display: block;
}
</style>

```

```
// ListFooter
<template>
  <div class="todo-footer" v-show="todos.length">
    <label>
      <input type="checkbox" :checked="isAll" @click="checkAll"/>
    </label>
    <span>
      <span>å·²å®Œæˆ{{doneTotal}}</span> / å…¨éƒ¨{{todos.length}}
    </span>
    <button class="btn btn-danger" @click="clearAll">æ¸…é™¤å·²å®Œæˆä»»åŠ¡</button>
  </div>
</template>

<script>
export default {
    name:'ListFooter',
    props:['todos', 'clearAllTodo'],
    methods: {
      checkAll(e) {
        this.todos.forEach((todo) => {
          todo.done = e.target.checked;
        })
      },
      // æ¸…ç©ºæ‰€æœ‰å·²ç»å®Œæˆçš„åˆ—è¡¨
      clearAll() {
        this.clearAllTodo();
      }
    },
    computed: {
      doneTotal() {
       return this.todos.reduce((pre, current) => {  // pre ä¸ºä¸Šä¸€æ¬¡ reduce å‡½æ•°æ‰§è¡Œçš„è¿”å›å€¼, current æŒ‡å‘çš„æ˜¯å½“å‰çš„todoé¡¹         
          return pre + (current.done ? 1 : 0);
       }, 0)
      },
      isAll() {
        return this.doneTotal === this.todos.length && this.doneTotal > 0;
       }
    }
}
</script>

<style>
/*footer*/
.todo-footer {
  height: 40px;
  line-height: 40px;
  padding-left: 6px;
  margin-top: 5px;
}

.todo-footer label {
  display: inline-block;
  margin-right: 20px;
  cursor: pointer;
}

.todo-footer label input {
  position: relative;
  top: -1px;
  vertical-align: middle;
  margin-right: 5px;
}

.todo-footer button {
  float: right;
  margin-top: 5px;
}
</style>

```

9 æµè§ˆå™¨çš„æœ¬åœ°å­˜å‚¨
----------

æˆ‘ä»¬é¦–å…ˆä»‹ç»ä»¥ä¸‹ä¸€ä¸ªåº”ç”¨åœºæ™¯ï¼Œæ‰“å¼€å”¯å“ä¼šçš„[å®˜ç½‘åœ°å€](https://www.vip.com/)

æˆ‘ä»¬åœ¨æœç´¢æ¡†ä¸­æœç´¢ç›¸å…³å†…å®¹

![](https://i-blog.csdnimg.cn/blog_migrate/59a66206552ef0a68c65b2ab5891a340.png)

æˆ‘ä»¬å›åˆ°æœç´¢ç•Œé¢ï¼Œä¼šå‘ç°åœ¨æœç´¢å†å²ä¸­å‡ºç°äº†æœç´¢è®°å½•ï¼ˆæ­¤æ—¶æˆ‘å¹¶æ²¡æœ‰ç™»å½•å®˜ç½‘ï¼‰

![](https://i-blog.csdnimg.cn/blog_migrate/30cc902d4ee7f470274a5fa36808d483.png)

é‚£ä¹ˆï¼Œè¿™ä¸ªæœç´¢è®°å½•æ˜¯å­˜å‚¨åœ¨å“ªé‡Œçš„å‘¢ï¼Ÿ

æˆ‘ä»¬æ‰“å¼€æµè§ˆå™¨è°ƒè¯•å·¥å…·ï¼šã€Applicationã€‘â†’ ã€Local Storageã€‘

![](https://i-blog.csdnimg.cn/blog_migrate/4b9eb3206e20b219e650f69b5729e72e.png)

æˆ‘ä»¬å¯ä»¥çœ‹åˆ°é‡Œé¢æœ‰ä¸€ä¸ªé”®å€¼å¯¹ searchHistoryData ï¼Œé‡Œé¢å­˜å‚¨çš„å°±æ˜¯æˆ‘ä»¬åˆšæ‰çš„å†å²æœç´¢è®°å½•ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥å¯¹å…¶è¿›è¡Œä¿®æ”¹ç­‰æ“ä½œ

é‚£ä¹ˆ Local Storage æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿ

### 9.1 localStorage

localStorage æ˜¯æµè§ˆå™¨çš„ä¸€ä¸ªç‰¹æ€§ï¼Œè¿™ä¸ªç‰¹æ€§ä¸»è¦æ˜¯ç”¨æ¥ä½œä¸ºæœ¬åœ°å­˜å‚¨æ¥ä½¿ç”¨çš„ï¼Œ**è§£å†³äº† cookie å­˜å‚¨ç©ºé—´ä¸è¶³çš„é—®é¢˜**ï¼ˆcookie çš„å­˜å‚¨ç©ºé—´ä¸º 4kï¼‰ï¼ŒlocalStorage ä¸­ä¸€èˆ¬æµè§ˆå™¨æ”¯æŒçš„æ˜¯ 5M å¤§å°

**localStorage çš„ä¼˜åŠ¿ï¼š**

1.  localStorage æ‹“å±•äº† cookie çš„ 4K çš„é™åˆ¶
2.  localStorage å¯ä»¥å°†ç¬¬ä¸€æ¬¡è¯·æ±‚çš„æ•°æ®å­˜å‚¨åˆ°æœ¬åœ°ï¼Œè¿™ç›¸å½“äºä¸€ä¸ª 5M å¤§å°çš„å‰ç«¯é¡µé¢çš„æ•°æ®åº“ï¼Œç›¸æ¯”äº cookie å¯ä»¥èŠ‚çº¦å®½å¸¦ï¼Œä½†æ˜¯è¿™ä¸ªåªæœ‰åœ¨é«˜ç‰ˆæœ¬æµè§ˆå™¨ä¸­æ‰æ”¯æŒï¼ˆIE æµè§ˆå™¨éœ€è¦åœ¨ 8 ç‰ˆæœ¬ä»¥ä¸Šï¼‰

**localStorage çš„å±€é™**

1.  æµè§ˆå™¨çš„å¤§å°ä¸ç»Ÿä¸€ï¼Œå¹¶ä¸”åªæœ‰åœ¨ IE8 ä»¥ä¸Šçš„ç‰ˆæœ¬æ‰æ”¯æŒ localStorage è¿™ä¸ªå±æ€§
2.  ç›®å‰æ‰€æœ‰çš„æµè§ˆå™¨éƒ½ä¼šæŠŠ localStorage çš„å€¼ç±»å‹å…ˆå®šä½ String ç±»å‹ï¼Œå¦‚æœéœ€è¦å­˜å‚¨å¯¹è±¡ï¼Œé‚£ä¹ˆéœ€è¦æˆ‘ä»¬ç”¨åˆ° JSON å†…ç½®çš„ä¸€äº›æ–¹æ³•åšä¸€äº›è½¬æ¢
3.  localStorage åœ¨æµè§ˆå™¨çš„éšç§æ¨¡å¼ä¸‹æ˜¯ä¸å¯è¯»å–çš„
4.  localStorage æœ¬è´¨æ˜¯å¯¹å­—ç¬¦ä¸²çš„è¯»å–ï¼Œå¦‚æœå­˜å‚¨å†…å®¹è¿‡å¤šå°±ä¼šæ¶ˆè€—å†…å­˜ç©ºé—´ï¼Œå¯¼è‡´é¡µé¢å˜å¡
5.  localStorage ä¸èƒ½è¢«çˆ¬è™«æŠ“å–åˆ°
6.  localSorage å’Œ sessionStorage å”¯ä¸€çš„åŒºåˆ«åœ¨äº localStorage å±äºæ°¸ä¹…å­˜å‚¨ï¼Œè€Œ sessionStorage åœ¨ä¼šè¯ç»“æŸçš„æ—¶å€™é”®å€¼å¯¹ä¼šè¢«æ¸…ç©º mï¼Œä¹Ÿå³ä»–ä»¬çš„ç”Ÿå­˜æœŸä¸åŒ

**localstorage API**

1.  æ·»åŠ ï¼ˆè®¾ç½®ï¼‰ å­˜å‚¨è®°å½•
    
    ```
    // value ä¸ºæ™®é€šå­—ç¬¦ä¸²
    localStorage.setItem('key', 'value')
    // value ä¸ºå¯¹è±¡
    localStorage.setItem('key', JSON.stringify(obj))
    
    ```
    
2.  è·å–å­˜å‚¨è®°å½•
    
    ```
    var result = localStorage.getItem('key')
    
    // å¦‚æœå¾—åˆ°çš„æ˜¯ä¸€ä¸ªå¯¹è±¡å­—ç¬¦ä¸²ï¼Œé‚£ä¹ˆæˆ‘ä»¬è¿˜éœ€è¦å°†å…¶è§£æå‡ºæ¥
    console.log(JSON.parse(result))
    
    ```
    
3.  åˆ é™¤å•ä¸ªè®°å½•
    
    ```
    localStorage.removeItem('key')
    
    ```
    
4.  æ¸…ç©ºæ‰€æœ‰çš„è®°å½•
    
    ```
    localStorage.clear()
    
    ```
    

sessionStorage çš„å†…ç½®æ–¹æ³•ä¸ localStorage åŸºæœ¬ä¸€è‡´ï¼Œæˆ‘ä»¬é€šå¸¸å°† **localStorage å’Œ sessionStorage ç»Ÿç§°ä¸º webStorage**

ğŸ—’å¤‡æ³¨ï¼š

1.  sessionStorage å­˜å‚¨çš„å†…å®¹ä¼šéšæµè§ˆå™¨çª—å£çš„å…³é—­è€Œæ¸…é™¤
2.  localStorage å­˜å‚¨çš„å†…å®¹éœ€è¦æ‰‹åŠ¨æ¸…é™¤æ‰ä¼šæ¶ˆå¤±
3.  ä½¿ç”¨ `xxxStorage.getItem(xxx)`è·å–æ•°æ®ï¼Œå¦‚æœ xxx å¯¹åº”çš„ value è·å–ä¸åˆ°ï¼Œé‚£ä¹ˆ getItem çš„è¿”å›ç»“æœæ˜¯ null
4.  `JSON.parse(null)` çš„ç»“æœä»ç„¶æ˜¯ null

### 9.2 å°† todoList æ¡ˆä¾‹è®¾ç½®ä¸ºæœ¬åœ°å­˜å‚¨

æˆ‘ä»¬åªéœ€è¦ App.vue ä¿®æ”¹éƒ¨åˆ†ä»£ç å³å¯ï¼Œä¿®æ”¹å¦‚ä¸‹ï¼š

```
data() {
  return {
    todos: JSON.parse(localStorage.getItem("todos")) || [], // å°†å­˜å‚¨çš„ JSON å­—ç¬¦ä¸²è§£ææˆ JSON å¯¹è±¡ï¼Œå¦‚æœå¦‚æœä¸ºç©ºï¼Œé‚£ä¹ˆæˆ‘ä»¬éœ€è¦è®©å…¶è½¬æ¢ä¸ºä¸€ä¸ªç©ºæ•°ç»„ï¼Œå› ä¸º JSON.parse(null) ä¸º null,å°±ä¸å­˜åœ¨ lenght å±æ€§ï¼Œè·å–æ—¶ä¼šæŠ¥é”™
  };
},
watch: {
  todos: {
    deep: true, // å¼€å¯æ·±åº¦ç›‘è§†ï¼Œç›‘è§†é‡Œé¢çš„æ¯ä¸€ä¸ªå¯¹è±¡çš„ done å€¼
    handler(value) {
      localStorage.setItem("todos", JSON.stringify(value)); // å°† value å€¼è½¬åŒ–ä¸ºä¸€ä¸ªJSONå­—ç¬¦ä¸²
    },
  },
},

```

10 ç»„ä»¶è‡ªå®šä¹‰äº‹ä»¶
----------

### 10.1 ç»‘å®šè‡ªå®šä¹‰äº‹ä»¶

å‰é¢æˆ‘ä»¬ä½¿ç”¨äº† props æ¥å®Œæˆå­ç»„ä»¶å‘çˆ¶ç»„ä»¶é€šä¿¡ï¼Œå…¶å®æˆ‘ä»¬ä¹Ÿå¯ä»¥é€šè¿‡ç»„ä»¶çš„è‡ªå®šä¹‰äº‹ä»¶æ¥å®Œæˆå­ç»„ä»¶å‘çˆ¶ç»„ä»¶é€šä¿¡çš„æ•ˆæœï¼š

æˆ‘ä»¬æ‹¿ School ç»„ä»¶å‘çˆ¶ç»„ä»¶ App é€šä¿¡ä¸ºä¾‹ï¼š

```
// App
// template
<School v-on:myGetStudent></School>
// ç»™ School ç»‘å®šä¸€ä¸ªè‡ªå®šä¹‰äº‹ä»¶ myGetStudentName
// methods
getSchoolName(sch_name) {
  console.log("Appæ¥å—åˆ°å­¦æ ¡å§“åä¸ºï¼š"+sch_name);
},

```

```
// School
// template
<button @click="sendSchoolName">ç‚¹å‡»æˆ‘å¾—åˆ°å­¦æ ¡åç§°</button>
// methods
sendSchoolName() {
    this.$emit('myGetStudentName', this.sch_name)
}
// å½“æˆ‘ä»¬ç‚¹å‡»buttonæŒ‰é’®ä¹‹åï¼Œä½¿ç”¨$emitè§¦å‘è‡ªå®šä¹‰äº‹ä»¶ï¼Œå¹¶ä¸”ä¼ å…¥å‚æ•°this.sch_name

```

> emit ä¸­æˆ‘ä»¬è¿˜å¯ä»¥æ·»åŠ å¤šä¸ªå‚æ•°ï¼Œæ¥æ”¶çš„æ—¶å€™å¯ä»¥ä½¿ç”¨å¤šä¸ªå¯¹åº”å‚æ•°æ¥æ”¶ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨æ‰©å±•è¿ç®—ç¬¦ `...params` æ¥æ”¶ä¸ç¡®å®šå‚æ•°ï¼Œparms æ˜¯ä¸€ä¸ªåŒ…å«æ‰€æœ‰æœªæ¥æ”¶å‚æ•°å€¼çš„æ•°ç»„

æ•ˆæœå¦‚ä¸‹ï¼š

![](https://i-blog.csdnimg.cn/blog_migrate/63188c09a26d22bf80b003183ef1f163.png)

**å®ç°æ–¹å¼ 2**

é€šè¿‡ ref æ¥ç»‘å®šè‡ªå®šä¹‰äº‹ä»¶ï¼Œå¹¶ä¸”è¿™ç§æ–¹å¼æ‹¥æœ‰æ›´å¤§çš„çµæ´»æ€§ï¼Œå¯ä»¥æŒ‡å®šåœ¨ç‰¹å®šçš„æ—¶å€™ç»‘å®šè‡ªå®šä¹‰äº‹ä»¶ï¼Œè€Œä¸æ˜¯æ¨¡æ¿ä¸€è§£æå°±ç»‘å®š

```
// App
// template
<School ref="school"></School>
// methods
getSchoolName(sch_name) {
  console.log("Appæ¥å—åˆ°å­¦æ ¡å§“åä¸ºï¼š"+sch_name);
},
// æˆ‘ä»¬åœ¨é’©å­å‡½æ•° mounted é‡Œé¢ç»‘å®šè‡ªå®šä¹‰äº‹ä»¶ myGetStudentName
mounted() {
  this.$refs.school.$on('myGetStudentName', this.getSchoolName)
}

```

æ˜¾ç¤ºæ•ˆæœå¦‚ä¸‹ï¼š

![](https://i-blog.csdnimg.cn/blog_migrate/d4d342e704e21471a8c9fbed59a98bb7.png)

ğŸŒ¿**æ‰©å±•**

*   å¦‚æœæˆ‘ä»¬æƒ³è¦è®¾ç½® ref ç»‘å®šçš„æ—¶æœºå¯ä»¥ä½¿ç”¨å®šæ—¶å™¨ setTimeOut
    
*   å¦‚æœæˆ‘ä»¬æƒ³è¦è®¾ç½®ç»‘å®šäº‹ä»¶çš„è§¦å‘æ¬¡æ•°å¯ä»¥ä½¿ç”¨å¦‚ä¸‹ä»£ç ï¼š
    
    ```
    this.$refs.school.$once('myGetStudentName', this.getSchoolName)
    
    ```
    

### 10.2 è§£ç»‘è‡ªå®šä¹‰äº‹ä»¶

1.  ###### è§£ç»‘å•ä¸ªè‡ªå®šä¹‰äº‹ä»¶
    
    ```
    // è§£ç»‘vcèº«ä¸Šçš„è‡ªå®šä¹‰äº‹ä»¶
    vc.$off('event')
    
    // è§£ç»‘vmèº«ä¸Šçš„è‡ªå®šä¹‰äº‹ä»¶
    vm.$off('event')
    
    ```
    
2.  è§£ç»‘å¤šä¸ªè‡ªå®šä¹‰äº‹ä»¶
    
    ```
    // è§£ç»‘vcèº«ä¸Šçš„å¤šä¸ªè‡ªå®šä¹‰äº‹ä»¶
    vc.$off(['event1', 'event2', â€¦])
    
    // è§£ç»‘vmèº«ä¸Šçš„è‡ªå®šä¹‰äº‹ä»¶
    vm.$off(['event1', 'event2', â€¦])
    
    ```
    
3.  è§£ç»‘æ‰€æœ‰çš„è‡ªå®šä¹‰äº‹ä»¶
    
    ```
    // è§£ç»‘vcèº«ä¸Šæ‰€æœ‰è‡ªå®šä¹‰äº‹ä»¶
    vc.$off()
    
    // è§£ç»‘vmèº«ä¸Šç´ æœ‰çš„è‡ªå®šä¹‰äº‹ä»¶
    vm.$offf()
    
    ```
    

âœ¨**è¡¥å……**

*   å½“æˆ‘ä»¬ä½¿ç”¨äº† `this.$destory()` é”€æ¯å½“å‰ç»„ä»¶çš„å®ä¾‹åï¼Œé”€æ¯åè¯¥ç»„ä»¶æ‰€æœ‰çš„è‡ªå®šä¹‰äº‹ä»¶å…¨éƒ¨éƒ½ä¼šå¤±æ•ˆï¼›
*   å½“æˆ‘ä»¬ä½¿ç”¨ `this.$destory()` é”€æ¯æ€»ç»„ä»¶æˆ– Vue å®ä¾‹åï¼Œé”€æ¯åè¯¥æ€»ç»„ä»¶ æˆ– Vue å®ä¾‹çš„æ‰€æœ‰å­ç»„ä»¶å’Œè‡ªå®šä¹‰äº‹ä»¶éƒ½ä¼šå¤±æ•ˆ

### 10.3 è‡ªå®šä¹‰äº‹ä»¶çš„æ€»ç»“

â—ï¸ä¸¤ä¸ªæ³¨æ„ç‚¹ï¼š

1.  é€šè¿‡ `this.$refs.xxx.$on('event', callback)` ç»‘å®šè‡ªå®šä¹‰äº‹ä»¶æ—¶ï¼Œå›è°ƒå‡½æ•°å¦‚æœæ˜¯æ™®é€šå½¢å¼ï¼Œè€Œä¸æ˜¯ç®­å¤´å‡½æ•°å½¢å¼ï¼Œthis æŒ‡å‘çš„æ˜¯ xxx ç»‘å®šçš„ç»„ä»¶ï¼Œæ‰€ä»¥æˆ‘ä»¬å¹³æ—¶ä½¿ç”¨çš„ä½¿ç”¨çš„æ—¶å€™å›è°ƒè¦ä¹ˆé…ç½®åœ¨ methods ä¸­ï¼Œè¦ä¹ˆä½¿ç”¨ç®­å¤´å‡½æ•°ï¼Œå¦åˆ™ä¼šå‡ºç° this çš„æŒ‡å‘é—®é¢˜
2.  ç»„ä»¶ä¸Šä¸€èˆ¬åªèƒ½ç»‘å®šè‡ªå®šä¹‰äº‹ä»¶ï¼Œå¦‚æœæƒ³è¦ç»‘å®šåŸç”Ÿ DOM äº‹ä»¶ï¼Œä¾‹å¦‚ï¼šclickã€keyup ç­‰ç­‰ï¼Œéœ€è¦ä½¿ç”¨ `native` è¿›è¡Œä¿®é¥°

11 å…¨å±€ç»„ä»¶ä¹‹é—´çš„é€šä¿¡
------------

### 11.1 * å…¨å±€äº‹ä»¶æ€»çº¿ (GlobalEventBus)

å…¨å±€äº‹ä»¶æ€»çº¿åœ¨ Vue ä¸­ååˆ†é‡è¦ï¼Œå› ä¸ºåˆ©ç”¨å®ƒæˆ‘ä»¬å¯ä»¥å®ç°**ä»»æ„ç»„ä»¶é—´çš„é€šä¿¡**

![](https://i-blog.csdnimg.cn/blog_migrate/95fc7aaa326ba03abf9b481216813d36.png)

å…¨å±€äº‹ä»¶æ€»çº¿çš„ä¸»è¦å®ç°æ€è·¯å¦‚ä¸‹ï¼š

*   é…ç½®ä¸€ä¸ªä¸­ä»‹`x`ï¼Œ`x` ä¸»è¦ç”¨æ¥å®Œæˆå„ç§ç»„ä»¶ä¹‹é—´çš„é€šä¿¡ï¼ŒåŒæ—¶ `x` åº”è¯¥å…·æœ‰å¦‚ä¸‹ç‰¹æ€§ï¼š
    
    1.  `x` å¯¹äºå…¶ä»–æ‰€æœ‰ç»„ä»¶æ˜¯å¯è§çš„
    2.  è¿™ä¸ª `x` èƒ½å¤Ÿè°ƒç”¨ `$on()ã€$off()ã€$emit()` ç­‰æ–¹æ³•
*   æˆ‘ä»¬åœ¨å®Œæˆç»„ä»¶ä¹‹é—´çš„é€šä¿¡æ—¶ï¼Œè¿™é‡Œæ‹¿ A ä¸ D ç»„ä»¶ä¸ºä¾‹ï¼Œé¦–å…ˆ A ç»„ä»¶ä¼šç»™ `x` ç»‘å®šä¸€ä¸ªäº‹ä»¶
    
    ```
    // demo
    mounted() {
        this.x.$on('hello', (data) => {
          console.log('æˆ‘æ˜¯schoolç»„ä»¶,æ¥æ”¶åˆ°äº†æ•°æ®: '+ data);
        })
    }
    
    ```
    
    D ç»„ä»¶åœ¨é€‚å½“æ—¶æœºï¼ˆæŸä¸ªäº‹ä»¶è§¦å‘ï¼‰è§¦å‘äº‹ä»¶
    
    ```
    methods:{
        sendStudentName() {
            this.x.$emit('hello', 666)
        }
    }
    
    ```
    

æˆ‘ä»¬åˆ©ç”¨ä»¥å‰è®²è¿°çš„ä¸€ä¸ªå…³ç³»:

```
VueComponent.prototype.__proto__ === Vue.prototype

```

å°†è¿™ä¸ª**ä¸­ä»‹ `x` åˆé€‚çš„æŒ‚è½½å¯¹è±¡äº¤ç»™äº† `Vue.prototype`**ï¼Œä½†æ˜¯è¿™åªèƒ½ç¡®ä¿ `x` æ˜¯å¯è§çš„ï¼Œä½†æ˜¯æ— æ³•ç¡®ä¿ `x` èƒ½å¤Ÿè°ƒç”¨ `$on()ã€$off()ã€$emit()` ç­‰æ–¹æ³•ï¼Œå› ä¸ºåªæœ‰ vcã€vm èº«ä¸Šèƒ½æœ‰è¿™äº›æ–¹æ³•ï¼Œæ™®é€šå˜é‡æ˜¯æ²¡æœ‰è¿™äº›æ–¹æ³•çš„ï¼Œæ‰€ä»¥**æˆ‘ä»¬éœ€è¦è€ƒè™‘å°† vc æˆ– vm èµ‹å€¼ç»™ `x`**

```
const Demo = Vue.extend({})
const d = new Demo()
Vue.prototype.x = d

```

ä½†æ˜¯è¿™ä¹ˆå†™æ˜¾å¾—æœ‰ç‚¹ä¸å¤ªç¾è§‚ï¼Œæ–°å»ºäº†ä¸€ä¸ªé¢å¤–çš„ vcï¼Œæ›´åŠ ä¼˜é›…çš„å†™æ³•å¦‚ä¸‹ï¼Œç›´æ¥å°† vm ç»‘å®šç»™ `Vue.prototype.$bus`ï¼ˆ**â€œbusâ€ åœ¨è‹±è¯­ä¸­æœ‰ â€œæ€»çº¿â€ çš„æ„æ€ï¼Œæ‰€ä»¥åé¢è¿™ä¸ª `x` æˆ‘ä»¬éƒ½ç§°å‘¼ä¸º `bus`ï¼ŒåŒæ—¶æ·»åŠ  `$` æ˜¯ä¸ºäº†è¿åˆ Vue çš„è®¾è®¡ï¼Œä»£è¡¨ â€œå…¨å±€â€ ä¹‹æ„**ï¼‰

```
new Vue({
  render: h => h(App),
  // breforeCreate å‡½æ•°æ˜¯åœ¨Vueå·²ç»åˆå§‹åŒ–ï¼Œä½†æ˜¯æ•°æ®ä»£ç†è¿˜æ²¡å¼€å§‹çš„æ—¶å€™è¿›è¡Œç»‘å®š
  beforeCreate() {
    Vue.prototype.$bus = this;	// å®‰è£…å…¨å±€äº‹ä»¶æ€»çº¿
  }
}).$mount('#app')

```

*   åœ¨ `beforeCreate` çš„æ—¶å€™ç»‘å®šæ˜¯è€ƒè™‘åˆ°ï¼š**æ­¤æ—¶ `bus` è¿˜æœªç»‘å®šä»»ä½•äº‹ä»¶ï¼Œæ‰€æœ‰çš„æ–¹æ³•ã€æ•°æ®ä»£ç†éƒ½è¿˜æ²¡å¼€å§‹**

ä½†æ˜¯ç°åœ¨ä»ç„¶è¿˜æœ‰ä¸€ç‚¹ä¸å¤Ÿå®Œå–„çš„åœ°æ–¹ï¼Œå°±æ˜¯å¦‚æœæˆ‘ä»¬æ²¡åˆ›å»ºä¸€ä¸ª vc æˆ–è€… vmï¼Œéƒ½è¦ç»™å…¶ç»‘å®šä¸€ä¸ªäº‹ä»¶ï¼Œé‚£ä¹ˆæ­¤æ—¶ `bus` èº«ä¸Šçš„ç»‘å®šçš„äº‹ä»¶å°±ä¼šéå¸¸å¤šï¼Œå¹¶ä¸”è‹¥æ˜¯ vc æˆ– vm åœ¨é”€æ¯åä¹Ÿä¸å»é”€æ¯å…¶ç»‘å®šåœ¨ `bus` çš„äº‹ä»¶ï¼Œ`bus` å°±ä¼šå­˜åœ¨éå¸¸å¤š â€œç´¯èµ˜â€ï¼Œæ‰€ä»¥æˆ‘ä»¬è¿˜éœ€è¦åœ¨ vc æˆ– vm é”€æ¯ä¹‹å‰é”€æ¯ç»‘å®šçš„ `bus` äº‹ä»¶

```
mounted() {
    this.x.$on('hello', (data) => {
      console.log('æˆ‘æ˜¯schoolç»„ä»¶,æ¥æ”¶åˆ°äº†æ•°æ®: '+ data);
    })
},
beforeDestory() {
  this.$bus.$off('hello');
}

```

ğŸ—’**æ€»ç»“**

1.  å…¨å±€äº‹ä»¶æ€»çº¿æ˜¯**ä¸€ç§ç»„ä»¶é—´é€šä¿¡çš„æ–¹å¼ï¼Œé€‚ç”¨äºä»»æ„ç»„ä»¶é—´é€šä¿¡**
    
2.  å®‰è£…å…¨å±€äº‹ä»¶æ€»çº¿ï¼š
    
    ```
    new Vue({
    	â€¦
    	beforeCreate() {
    		Vue.prototype.$bus = this	// å®‰è£…å…¨å±€äº‹ä»¶æ€»çº¿
    	},
    	â€¦
    })
    
    ```
    
3.  ä½¿ç”¨äº‹ä»¶æ€»çº¿ï¼š
    
    1.  æ¥å—æ•°æ®ï¼šA ç»„ä»¶æƒ³æ¥å—æ•°æ®ï¼Œåˆ™åœ¨ A ç»„ä»¶ä¸­ç»™ `$bus` ç»‘å®šè‡ªå®šä¹‰äº‹ä»¶ï¼Œäº‹ä»¶çš„å›è°ƒç•™åœ¨ A ç»„ä»¶è‡ªèº«
        
        ```
        methods() {
        	demo(data) {
        		â€¦
        	}
        }
        â€¦
        mounted() {
        	this.$bus.$on('xxx', this.demo)
        }
        
        ```
        
    2.  æä¾›æ•°æ®ï¼š`this.$bus.$emit('xxx', data)`
        
4.  æœ€å¥½åœ¨ `beforeDestory` é’©å­ä¸­ï¼Œç”¨ `$off` å»è§£ç»‘å½“å‰ç»„ä»¶æ‰€ç”¨åˆ°çš„äº‹ä»¶
    

### 11.2 æ¶ˆæ¯è®¢é˜…ä¸å‘å¸ƒ

æˆ‘ä»¬å‰é¢ä½¿ç”¨**æ€»å±€äº‹ä»¶æ€»çº¿**å®ç°äº†æ‰€æœ‰çš„ç»„ä»¶ä¹‹é—´çš„é€šä¿¡ï¼Œç°åœ¨ä»‹ç»å¦å¤–ä¸€ç§æŠ€æœ¯ï¼Œå°±æ˜¯**æ¶ˆæ¯è®¢é˜…ä¸å‘å¸ƒ**ï¼Œå…·ä½“æµç¨‹å¦‚ä¸‹ï¼š

1.  è®¢é˜…æ¶ˆæ¯ï¼šæ¶ˆæ¯å
2.  å‘å¸ƒæ¶ˆæ¯ï¼šæ¶ˆæ¯å†…å®¹

è¦ä½¿ç”¨æ¶ˆæ¯çš„è®¢é˜…ä¸å‘å¸ƒï¼Œæˆ‘ä»¬å°±éœ€è¦ç”¨åˆ° pubsub-js è¿™ä¸ªåº“

> â€œpubâ€ å³ä¸º â€œpublishâ€ çš„ç¼©å†™ï¼Œâ€œsubâ€ å³ä¸º â€œsubscribeâ€ çš„ç¼©å†™

**å®‰è£…å‘½ä»¤ï¼š**

```
npm i pubsub-js

```

**ä½¿ç”¨æ­¥éª¤ï¼š**

1.  **å¼•å…¥ pubsub åº“**
    
    ```
    import pubsub from 'pubsub-js'
    
    ```
    
2.  **æ¥å—æ•°æ®**ï¼šA ç»„ä»¶æƒ³è¦æ¥å—æ•°æ®ï¼Œåˆ™åœ¨ A ç»„ä»¶ä¸­è®¢é˜…æ¶ˆæ¯ï¼Œè®¢é˜…çš„å›è°ƒç•™åœ¨ A ç»„ä»¶è‡ªèº«
    
    ```
    // å†™æ³•1
    mounted() {
        this.pub_id = pubsub.subscribe('hello', (msgName,data) => {
          console.log('æœ‰äººå‘å¸ƒäº†helloæ¶ˆæ¯ï¼Œhelloæ¶ˆæ¯çš„å›è°ƒæ•°æ®ä¸ºï¼š' + data);
          // æ³¨æ„ï¼špubsubæ˜¯å¤–éƒ¨å¼•å…¥çš„åº“ï¼Œè¿™é‡Œå¿…é¡»å¾—ç”¨ç®­å¤´å‡½æ•°ï¼Œå¦åˆ™é‡Œé¢çš„ this æŒ‡å‘çš„å°†ä¸æ˜¯ vc 
     // subscible é‡Œé¢çš„å›è°ƒå‡½æ•°é‡Œé¢æœ‰ä¸¤ä¸ªå‚æ•°ï¼Œç¬¬ä¸€ä¸ªå‚æ•°ä»£è¡¨è®¢é˜…æ¶ˆæ¯åç§°ï¼Œç¬¬äºŒä¸ªå‚æ•°ä»£è¡¨å‘å¸ƒæ¶ˆæ¯æ—¶ä¼ é€’è¿‡æ¥çš„æ•°æ®
    })
        
    // å†™æ³•2
    methods() {
        demo(msgName, data) {
            â€¦
        }
    }
    â€¦
    mounted() {
        this.pid = pubsub.subscribe('xxx', this.demo)
        // ä½¿ç”¨ this.pid æ‰“ä¸ªæ ‡è®°ï¼Œè®©å¤–éƒ¨å¯è§ï¼Œç„¶åä¼šåœ¨é€‚å½“æ—¶æœºå–æ¶ˆè®¢é˜…ï¼Œè®¢é˜…çš„æ¶ˆæ¯ä¸€æ—¦æŠµè¾¾ï¼Œé‚£ä¹ˆè°ƒå›vcè‡ªå¸¦çš„æ–¹æ³•demo
    }
    
    ```
    
3.  æä¾›æ•°æ®ï¼š`pubsub.publish('xxx',data)`
    
4.  æœ€å¥½åœ¨ `beforeDestroy` é’©å­ä¸­ï¼Œç”¨ `pubsub.unsubscribe(pid)`å–æ¶ˆè®¢é˜…
    

12 vue ç‰¹æ•ˆ
---------

### 12.1 `$nextTick`

å¯¹äºä¸€ä¸ªä»£ç å—ä¸­çš„è¯­å¥ï¼ŒVue æ¯æ¬¡éƒ½æ˜¯ç­‰å¾…é‡Œé¢æ‰€æœ‰çš„è¯­å¥çš„æ‰§è¡Œå®Œæ¯•ä¹‹åå†å»é‡æ–°è§£ææ¨¡æ¿ï¼Œä½†æ˜¯æœ‰æ—¶å€™æˆ‘ä»¬æƒ³è¦çš„æ•ˆæœæ˜¯ï¼šä»£ç å—ä¸­å‰é¢ä¸€æ¡è¯­å¥æ‰§è¡Œå®Œæ¯•ä¹‹åç«‹å³é‡æ–°è§£ææ¨¡æ¿ï¼Œåé¢çš„è¯­å¥å°±ä¼šæ ¹æ®å‰é¢è§£æå¥½çš„æ¨¡æ¿æ‰§è¡Œç‰¹å®šçš„åŠ¨ä½œï¼Œè¿™ä¸ªè¿‡ç¨‹æ˜¯è¿ç»­çš„

è¿™æ—¶å€™æˆ‘ä»¬å°±å¯ä»¥åˆ©ç”¨ nextTick æ¥å®Œæˆè¿™ä¸€éœ€æ±‚ï¼Œè¯­æ³•å¦‚ä¸‹ï¼š

```
this.$nextTick(callback)

```

*   ä½œç”¨ï¼šåœ¨ä¸‹ä¸€æ¬¡ DOM æ›´æ–°ç»“æŸåæ‰§è¡Œå…¶æŒ‡å®šçš„å›è°ƒ
*   é€‚ç”¨æ—¶æœºï¼šå½“æ”¹å˜æ•°æ®åï¼Œè¦åŸºäºæ›´æ–°åçš„æ–° DOM è¿›è¡ŒæŸäº›æ“ä½œæ—¶ï¼Œè¦åœ¨ nextTick æ‰€æŒ‡å®šçš„å›è°ƒå‡½æ•°ä¸­æ‰§è¡Œ

### 12.2 åŠ¨ç”»æ•ˆæœ

#### 12.2.1 keyframes å®ç°

Vue ä¸­åŠ¨ç”»æ•ˆæœéœ€è¦å€ŸåŠ© `transition` æ ‡ç­¾ï¼Œè¯¥æ ‡ç­¾ä¸ä¼šå½¢æˆ HTML ç»“æ„ï¼Œæ­é… `.v-enter-active` å’Œ `.v-leave-active` å¯ä»¥å®ç°å…ƒç´ è¿›åœºå’Œå‡ºåœºæ—¶çš„åŠ¨ç”»æ•ˆæœ

```
<template>
<div>
    <button @click="isShow = !isShow">æ˜¾ç¤ºå’Œéšè—</button>
    <transition>
        <h1 v-show="isShow">ä½ å¥½å•Šï¼</h1>
    </transition>
  
</div>
</template>

<script>
export default {
    name:'Test',
    data() {
        return {
            isShow: true,
        }
    }
}
</script>

<style scoped>
    h1 {
        background: orange;
    }
    .v-enter-active {
        animation: slide 1s;
    }
    .v-leave-active {
        animation: slide 1s reverse;
    }
    @keyframes slide {
        from {
            transform:translateX(-100%); 
        to {
            transform:translateX(0%);
        }
    }
</style>

```

æ˜¾ç¤ºæ•ˆæœå¦‚ä¸‹ï¼š

![](https://i-blog.csdnimg.cn/blog_migrate/6d8158ed0edb4717735765dbec4b24f9.gif)

ğŸŒ¿**æ‰©å±•**

1.  æˆ‘ä»¬åœ¨è¿˜å¯ä»¥ç»™ `transition` æ·»åŠ  `name` å±æ€§ï¼ŒæŒ‡å®šåŠ¨ç”»çš„åç§°ï¼Œæ­¤æ—¶è¿›åœºåŠ¨ç”»å’Œå‡ºåœºåŠ¨ç”»çš„ç±»åå°±éœ€è¦ä¿®æ”¹æˆ `.name-enter-active` å’Œ `.name-leave-active`
2.  å¦‚æœæƒ³è¦åˆå§‹åŒ–çš„æ—¶å€™å°±æœ‰åŠ¨ç”»æ•ˆæœï¼Œå¯ä»¥ä½¿ç”¨ç»™ `transition` æ·»åŠ  `appear` å±æ€§ï¼ˆæˆ–è€…æ·»åŠ  `:appear=true`ï¼‰

```
<template>
<div>
    <button @click="isShow = !isShow">æ˜¾ç¤ºå’Œéšè—</button>
    <transition  appear>
        <h1 v-show="isShow">ä½ å¥½å•Šï¼</h1>
    </transition>
  
</div>
</template>

<script>
export default {
    name:'Test',
    data() {
        return {
            isShow: true,
        }
    }
}
</script>

<style scoped>
    h1 {
        background: orange;
    }
    .change-enter-active {
        animation: slide 1s;
    }
    .change-leave-active {
        animation: slide 1s reverse;
    }
    @keyframes slide {
        from {
            transform:translateX(-100%);
        }
        to {
            transform:translateX(0%);
        }
    }
</style>

```

#### 12.2.2 transition å®ç°

æˆ‘ä»¬å‰é¢è®²è¿‡ï¼Œåœ¨ Vue ä¸­ï¼Œå¦‚æœæˆ‘ä»¬æ˜¯é€šè¿‡ keyframes æ¥å®ç°åŠ¨ç”»æ•ˆæœçš„ï¼Œæ­¤æ—¶ï¼Œæˆ‘ä»¬åªéœ€è¦è®¾ç½® `.v-enter-active` å’Œ `.v-leave-active` å³å¯ï¼›

æˆ‘ä»¬ä¹Ÿå¯ä»¥é€šè¿‡ transition æ¥å®ç°åŠ¨ç”»æ•ˆæœï¼Œå¯¹äºå…¥åœºï¼Œæˆ‘ä»¬è®¾ç½®çš„èŠ‚ç‚¹æœ‰ä»¥ä¸‹ 3 ä¸ªï¼š

1.  `.v-enter`ï¼šè¿›åœºçš„èµ·ç‚¹
2.  `.v-enter-active`ï¼šè¿›åœºç‰¹æ•ˆæ¿€æ´»å…¨è¿‡ç¨‹
3.  `.v-enter-to`ï¼šè¿›åœºçš„ç»ˆç‚¹

å¯¹äºå‡ºåœºï¼Œæˆ‘ä»¬è®¾ç½®çš„èŠ‚ç‚¹æœ‰å¦‚ä¸‹ 3 ä¸ªï¼š

1.  `.v-leave`ï¼šå‡ºåœºçš„èµ·ç‚¹
2.  `.v-leave-active`ï¼šå‡ºåœºç‰¹æ•ˆæ¿€æ´»å…¨è¿‡ç¨‹
3.  `.v-leave-to`ï¼šå‡ºåœºçš„ç»ˆç‚¹

ç¤ºä¾‹ï¼š

```
<template>
<div>
    <button @click="isShow = !isShow">æ˜¾ç¤ºå’Œéšè—</button>
    <transition appear>
        <h1 v-show="isShow">ä½ å¥½å•Šï¼</h1>
    </transition>
  
</div>
</template>

<script>
export default {
    name:'Test',
    data() {
        return {
            isShow: true,
        }
    }
}
</script>

<style scoped>
    h1 {
        background: orange;
        /* transition: all 1s; */
    }
    /* è¿›å…¥çš„èµ·ç‚¹ */
    .v-enter {
        transform: translateX(-100%);
    }
    /* è¿›å…¥çš„ç»ˆç‚¹ */
    .v-enter-to {
        transform: translateX(0);
    }
    /* ç¦»å¼€çš„èµ·ç‚¹ */
    .v-leave {
        transform: translateX(0);
    }
    /* ç¦»å¼€çš„ç»ˆç‚¹ */
    .v-leave-to {
        transform: translateX(-100%);
    }
    /* å½“ç„¶ï¼Œè¿™é‡Œçš„éƒ¨åˆ†æ ·å¼æ˜¯å¯ä»¥åˆå¹¶çš„ */
    .v-enter-active, .v-leave-active {
        transition: all 1s;
    }
</style>

```

#### 12.2.3 å¤šä¸ªå…ƒç´ è¿‡æ¸¡

**æˆ‘ä»¬å‰é¢è®²åˆ°çš„ transition åªèƒ½ç»™ä¸€ä¸ªå…ƒç´ æ·»åŠ åŠ¨ç”»ï¼Œå¦‚æœæƒ³è¦ç»™å¤šä¸ªå…ƒç´ æ·»åŠ åŠ¨ç”»ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±éœ€è¦ä½¿ç”¨åˆ° transition-groupï¼Œå¹¶ä¸”éœ€è¦ç»™æ¯ä¸ªå…ƒç´ æ·»åŠ å”¯ä¸€çš„ key å€¼**

æˆ‘ä»¬é¦–å…ˆéªŒè¯ä¸€ä¸‹ï¼Œå¦‚æœæˆ‘ä»¬ç»™å¤šä¸ªå…ƒç´ æ·»åŠ åŠ¨ç”»ï¼Œé‚£ä¹ˆåœ¨ Vue ä¸­æŠ¥é”™å¦‚ä¸‹ï¼š

![](https://i-blog.csdnimg.cn/blog_migrate/647ef7a11345a71fb7d7f904a7d60d42.png)

å¦‚æœæˆ‘ä»¬ä¸æ·»åŠ  key å€¼ï¼Œé‚£ä¹ˆæŠ¥é”™å¦‚ä¸‹ï¼š

![](https://i-blog.csdnimg.cn/blog_migrate/eb7639981da9e5e6dc79ea6d497a50a3.png)

æ‰€ä»¥æ­£ç¡®å†™æ³•å¦‚ä¸‹ï¼š

```
<transition-group appear>
    <h1 v-show="!isShow" key="1">ä¸–ç•Œæ¯</h1>
    <h1 v-show="isShow" key="2">å¥¥è¿ä¼š</h1>
</transition-group>

```

#### 12.2.4 é›†æˆç¬¬ä¸‰æ–¹åŠ¨ç”»

ä¹‹å‰ï¼Œæˆ‘ä»¬éƒ½æ˜¯è‡ªå·±å†™åŠ¨ç”»æ•ˆæœï¼Œå…¶å®æˆ‘ä»¬ä¹Ÿå¯ä»¥å¼•å…¥åˆ«äººå·²ç»å°è£…å¥½çš„åŠ¨ç”»ï¼Œæˆ‘ä»¬è¿›å…¥åˆ° [npm å®˜ç½‘](https://www.npmjs.com/)æœç´¢ animate.cssï¼Œè¿›å…¥åˆ°å®ƒçš„ä¸»é¡µï¼š

![](https://i-blog.csdnimg.cn/blog_migrate/c376c5ea3080da96f48e8a706b2ddb5e.png)

æˆ‘ä»¬æŸ¥çœ‹åˆ°å®ƒæ‰€æœ‰çš„åŠ¨ç”»æ•ˆæœï¼š

![](https://i-blog.csdnimg.cn/blog_migrate/c02e01b4c40494299d2ffa2e96581f64.png)

**ä½¿ç”¨æ­¥éª¤**

1.  å®‰è£… animate.css åº“
    
    ```
    npm install animate.css --save
    
    ```
    
2.  å¼•å…¥è¯¥åº“
    
    ```
    import 'animate.css'
    
    ```
    
3.  æ·»åŠ  class åˆ°å…ƒç´ èŠ‚ç‚¹ä¸­
    
    ```
    <h1>An animated element</h1>
    
    ```
    
4.  æ·»åŠ  `enter-active-class` å’Œ `leave-active-class` æ ·å¼åˆ°å…ƒç´ èŠ‚ç‚¹ä¸­ï¼Œå±æ€§å€¼ä»åˆšæ‰çš„ä¾§è¾¹æ ä¸­é€‰æ‹©
    

**ç¤ºä¾‹**

```
<template>
  <div>
    <button @click="isShow = !isShow">æ˜¾ç¤ºå’Œéšè—</button>
    <transition-group
      appear
      
      enter-active-class="animate__swing"
      leave-active-class="animate__zoomOutUp"
    >
      <h1
        v-show="!isShow"
        key="1"
      >ä¸–ç•Œæ¯</h1>
      <h1
        v-show="isShow"
        key="2"
      >å¥¥è¿ä¼š</h1>
    </transition-group>
  </div>
</template>

<script>
import "animate.css";
export default {
  name: "Test03",
  data() {
    return {
      isShow: true,
    };
  },
};
</script>

<style scoped>
h1 {
  background: orange;
}
</style>

```

æ˜¾ç¤ºæ•ˆæœå¦‚ä¸‹ï¼š

[å¤–é“¾å›¾ç‰‡è½¬å­˜å¤±è´¥, æºç«™å¯èƒ½æœ‰é˜²ç›—é“¾æœºåˆ¶, å»ºè®®å°†å›¾ç‰‡ä¿å­˜ä¸‹æ¥ç›´æ¥ä¸Šä¼  (img-Sm44gOSu-1682422216949)(https://theblogimage.oss-cn-fuzhou.aliyuncs.com/imagefortypora/%E4%B8%87%E5%85%B4%E4%BC%98%E8%BD%AC_20221201203602.gif)]

13 Vue è¿›é˜¶
---------

### 13.1 é…ç½®ä»£ç†

#### 13.1.1 æ–¹å¼ 1

æˆ‘ä»¬å‰ç«¯æ‰€ä½¿ç”¨çš„å‘é€å’Œæ¥æ”¶è¯·æ±‚çš„æŠ€æœ¯ï¼š

1.  xhrï¼šä¿—ç§° "å°é»„äºº"ï¼Œå…¨ç§°æ˜¯ â€œXMLHttpRequestâ€
2.  jQueryï¼šé€šè¿‡ `$get` å’Œ `$post` æ¥è¿›è¡Œå‘é€è¯·æ±‚
3.  Axiosï¼šåŸºäº promise çš„ç½‘ç»œè¯·æ±‚åº“ï¼ˆæ¨èï¼‰
4.  fetchï¼šä¸‹ä¸€ä»£çš„ Ajax æŠ€æœ¯ï¼Œé‡‡ç”¨ Promise æ–¹å¼å¤„ç†æ•°æ®

æˆ‘ä»¬é¦–å…ˆæ¥ä½¿ç”¨ axios æ¥æµ‹è¯•ä¸€ä¸‹å‘èµ·è¯·æ±‚ï¼š

1.  é¦–å…ˆï¼Œæˆ‘ä»¬éœ€è¦æ‰“å¼€ä¸€ä¸ªæœåŠ¡å™¨ï¼ˆæ–‡ä»¶åœ¨å‹ç¼©åŒ… test_proxy_server ä¸­ï¼‰ï¼š
    
    ```
    node server1.js
    
    ```
    
2.  ä¹‹ååœ¨ Vue ä¸­å®‰è£…å¥½ axios åº“
    
    ```
    npm i axios
    
    ```
    
3.  å¼•å…¥ axios åº“
    
    ```
    import 'axios'
    
    ```
    
4.  ç¼–å†™è·å–è¯·æ±‚çš„ä»£ç 
    
    ```
    getStudents() {
      axios.get('http://localhost:5000/students').then( reponse => {
        console.log('è¯·æ±‚æˆåŠŸ', reponse.data)
      },
      error => {
        console.log('è¯·æ±‚å¤±è´¥', error.message)
      })
    }
    
    ```
    

è§¦å‘ get è¯·æ±‚åå‘é€ï¼ŒæŠ¥é”™å¦‚ä¸‹ï¼š

![](https://i-blog.csdnimg.cn/blog_migrate/b01de20ba8348ca85ecaf1ad4173668b.png)

å¾ˆæ˜æ˜¾ï¼Œå‡ºç°äº†ç»å…¸çš„è·¨è¶Šé—®é¢˜ï¼Œå³æˆ‘ä»¬è¿èƒŒäº† â€œåŒæºâ€ åŸåˆ™ï¼Œä¹Ÿå°±æ˜¯ä»¥ä¸‹ä¸‰ä¸ªéœ€è¦ä¿æŒä¸€è‡´ï¼š

1.  åè®®å
2.  ä¸»æœºå
3.  ç«¯å£å·

ä¸ºäº†è§£å†³è·¨è¶Šé—®é¢˜ï¼Œæˆ‘ä»¬å¯ä»¥è€ƒè™‘å¦‚ä¸‹è§£å†³æ–¹æ³•ï¼š

*   corsï¼šåœ¨åç«¯é…ç½®å¥½å³å¯
    
*   jsonpï¼šæ¯”è¾ƒå±€é™ï¼Œéœ€è¦å‰åç«¯å…±åŒå¯¹æ¥ï¼Œå¹¶ä¸”åªèƒ½å¤„ç† get è¯·æ±‚
    
*   **é…ç½®ä»£ç†æœåŠ¡å™¨**
    
    ![](https://i-blog.csdnimg.cn/blog_migrate/e00fe30fa4d522270bf8824c64f74e16.png)

é…ç½®ä¸€ä¸ªä»£ç†æœåŠ¡å™¨çš„æ–¹æ³•æœ‰å¦‚ä¸‹ä¸¤ç§ï¼š

1.  nginx
2.  vue-cli

æˆ‘ä»¬åœ¨è¿™é‡Œä»¥ vue-cli ä¸ºä¾‹è¿›è¡Œé…ç½®ä»£ç†æœåŠ¡å™¨

é¦–å…ˆï¼Œæˆ‘ä»¬è¦åˆ° vue cli çš„[å®˜ç½‘](https://cli.vuejs.org/zh/config/)ä¸Šå»æŸ¥çœ‹ç›¸å…³çš„æœåŠ¡å™¨é…ç½®ä¿¡æ¯

![](https://i-blog.csdnimg.cn/blog_migrate/fb939b070d7599cdfd6de76fb99290e3.png)

åœ¨ Vue.config.js æ–‡ä»¶ä¸­æ·»åŠ å¦‚ä¸‹é…ç½®ä¿¡æ¯ï¼š

```
devServer: {
    proxy: 'http://localhost:5000'	
    // è¯¥ç«¯å£å·ä¸è¯·æ±‚æœåŠ¡å™¨çš„ç«¯å£å·ä¸€è‡´
    // æ³¨æ„ï¼šä¸æ˜¯æœ¬åœ°ä¸»æœºçš„ç«¯å£å· 8080ï¼Œè¿™é‡Œåº”è¯¥æ˜¯ 5000
}

```

é…ç½®å®Œæˆä¹‹åï¼Œæˆ‘ä»¬å†æ¥é…ç½®è¯·æ±‚ï¼ˆæ³¨æ„ï¼šæ­¤æ—¶æ˜¯å‘ä»£ç†æœåŠ¡å™¨å‘é€è¯·æ±‚ï¼Œå› æ­¤ç«¯å£å·å¾—æ”¹æˆ 8080ï¼‰

```
getStudents() {
  axios.get('http://localhost:8080/students').then( reponse => {
    console.log('è¯·æ±‚æˆåŠŸ', reponse.data)
  },
  error => {
    console.log('è¯·æ±‚å¤±è´¥', error.message)
  })
}

```

æœ€ç»ˆæ˜¾ç¤ºæ•ˆæœå¦‚ä¸‹ï¼š

![](https://i-blog.csdnimg.cn/blog_migrate/87010f00ec5dc77e1f48c7aea487265c.png)

âš ï¸**æ³¨æ„**

è¯¥ç§é…ç½®ä»£ç†çš„æ–¹å¼å­˜åœ¨ä»¥ä¸‹ä¸¤ä¸ªé—®é¢˜ï¼š

1.  å½“è¯·æ±‚çš„æ–‡ä»¶åœ¨ä»£ç†æœåŠ¡å™¨ä¸­å­˜åœ¨æ—¶ï¼ˆæˆ–è€…è¯·æ±‚çš„æ–‡ä»¶ä¸æœåŠ¡å™¨ä¸­çš„è¯·æ±‚æ–‡ä»¶åŒåï¼‰ï¼Œé‚£ä¹ˆä»£ç†æœåŠ¡å™¨å°±ä¼šç›´æ¥è¿”å›ä»£ç†æœåŠ¡å™¨ä¸­çš„æ–‡ä»¶ï¼ˆå…·ä½“è¡¨ç°åœ¨ Vue ä¸­ public æ–‡ä»¶å¤¹ä¸‹çš„æ–‡ä»¶ï¼‰ï¼Œè€Œä¸ä¼šå»è¯·æ±‚æ‰€è¯·æ±‚æœåŠ¡å™¨ä¸Šçš„è¯¥åŒåæ–‡ä»¶ï¼Œ**æ— æ³•çµæ´»æ§åˆ¶ "èµ°ä¸èµ°" ä»£ç†**
2.  **åªèƒ½é…ç½®ä¸€ä¸ªä»£ç†æœåŠ¡å™¨ï¼Œä¸èƒ½é…ç½®å¤šä¸ª**

å…¶å·¥ä½œæ–¹å¼ä¸ºï¼šè‹¥æŒ‰ç…§ä¸Šè¿°é…ç½®ä»£ç†ï¼Œå½“è¯·æ±‚äº†å‰ç«¯ä¸å­˜åœ¨çš„èµ„æºæ—¶ï¼Œé‚£ä¹ˆè¯¥è¯·æ±‚ä¼šè½¬å‘ç»™æœåŠ¡å™¨ï¼ˆä¼˜å…ˆåŒ¹é…å‰ç«¯èµ„æºï¼‰

#### 13.1.2 æ–¹å¼ 2

ç¬¬äºŒç§åˆ©ç”¨ vue cli é…ç½®ä»£ç†æœåŠ¡å™¨çš„æ–¹å¼å¦‚ä¸‹ï¼š

```
module.exports = {
  devServer: {
    proxy: {
      '/api': {
        target: '<url>',
        ws: true,
        changeOrigin: true
      },
      '/foo': {
        target: '<other_url>'
      }
    }
  }
}

```

è¿™ç§æ–¹å¼èƒ½æ§åˆ¶æˆ‘ä»¬ " **èµ°ä¸èµ°ä»£ç†** " ä»¥åŠ**é…ç½®å¤šä¸ªä»£ç†æœåŠ¡å™¨**

**ç¤ºä¾‹**

```
devServer: {
  proxy: {
    // è®¾ç½®apiä¸ºå‰ç¼€ï¼Œè¡¨ç¤ºåªæœ‰ä»¥apiä¸ºå‰ç¼€çš„è·¯ç”±æ‰è¿›è¡Œé…ç½®ä»£ç†æœåŠ¡å™¨
    '/api': {
      target: 'http://localhost:5000',	// ä»£ç†è·¯ç”±çš„åŸºç¡€è·¯å¾„
      pathRewrite:{'^/api':''}, // è¿™ä¸€æ­¥è‡³å…³é‡è¦ï¼Œå°†ä»¥apiä¸ºå‰ç¼€çš„è¯·æ±‚è·¯å¾„çš„apiç½®ä¸ºç©º
      ws: true, // ç”¨äºæ”¯æŒwesocket,ä¸ºé»˜è®¤å€¼ï¼Œå¯ä¸åŠ 
      changeOrigin:true, // ç”¨äºæ§åˆ¶è¯·æ±‚å¤´ä¸­çš„hostå€¼ï¼Œæ·»åŠ ä¹‹åï¼Œä»£ç†æœåŠ¡å™¨å¯¹è¯·æ±‚æœåŠ¡å™¨å“åº”çš„hostä¸ºè¯·æ±‚æœåŠ¡å™¨çš„ç«¯å£å·ï¼Œå¦åˆ™ä¸ºä»£ç†æœåŠ¡å™¨çš„ç«¯å£å·ï¼Œé»˜è®¤å€¼ï¼Œå¯ä¸åŠ 
    },
    /*'/demo1':{
       é…ç½®åŸºæœ¬åŒä¸Š
    }*/
  }
}

```

è¯·æ±‚éƒ¨åˆ†ä»£ç æˆ‘ä»¬æ”¹æˆä¸ºå¦‚ä¸‹ï¼š

```
getStudents() {
  axios.get("http://localhost:8080/api/students").then(
    (reponse) => {
      console.log("è¯·æ±‚æˆåŠŸ", reponse.data);
    },
    (error) => {
      console.log("è¯·æ±‚å¤±è´¥", error.message);
    }
  );
},

```

**è¯´æ˜**

1.  ä¼˜ç‚¹ï¼šå¯ä»¥é…ç½®å¤šä¸ªä»£ç†ï¼Œä¸”å¯ä»¥çµæ´»åœ°æ§åˆ¶è¯·æ±‚æ—¶å¦èµ°ä»£ç†
2.  ç¼ºç‚¹ï¼šé…ç½®ç•¥ç¹çï¼Œ**è¯·æ±‚èµ„æºæ—¶å¿…é¡»æ·»åŠ å‰ç¼€**

### 13.2 github ç”¨æˆ·æœç´¢æ¡ˆä¾‹

æˆ‘ä»¬é¦–å…ˆå¾—å¸ƒç½®å¥½é™æ€é¡µé¢ï¼Œå°†é™æ€é¡µé¢ç»„ä»¶åŒ–ï¼Œè¿™é‡Œç”±äºç”¨åˆ°äº† bootstrap åº“ï¼Œæ‰€ä»¥æˆ‘ä»¬å°†å…¶æ”¾å…¥åˆ° public æ–‡ä»¶å¤¹ä¸‹çš„ css æ–‡ä»¶å¤¹ä¸­ï¼Œä¹‹ååœ¨ index.html ä¸­ä½¿ç”¨ link è¿›è¡Œå¼•å…¥ï¼š

```
<link rel="stylesheet" href="<%= BASE_URL %>css/bootstrap.css">

```

ğŸ¤”**è¿™é‡Œä¸ºä»€ä¹ˆæˆ‘ä»¬ä¸å°† bootstrap.css æ–‡ä»¶æ”¾å…¥ src æ–‡ä»¶å¤¹ä¸‹çš„ assets æ–‡ä»¶å¤¹ä¸‹ï¼Œç„¶ååœ¨ App.vue ä¸­ä½¿ç”¨ import å¼•å…¥å‘¢ï¼Ÿ**

åŸå› ï¼šé€šè¿‡ `import` æ–¹å¼å¼•å…¥æ ·å¼è¡¨ï¼ŒVue è„šæ‰‹æ¶ä¼šåšä¸€ä¸ªéå¸¸ä¸¥æ ¼çš„æ£€æŸ¥ï¼Œå³åªè¦æ ·å¼è¡¨ä¸­å¼•å…¥äº†ä¸å­˜åœ¨æˆ–æ— æ³•æ‰¾åˆ°çš„æ–‡ä»¶ï¼Œé‚£ä¹ˆ Vue è„šæ‰‹æ¶å°±ä¼šæŠ¥é”™ï¼Œè€Œ Bootstrap.css æ–‡ä»¶æ°å¥½å°±æœ‰å­—ä½“æ–‡ä»¶æ— æ³•æ­£å¸¸åŠ è½½å‡ºæ¥ï¼Œå¦‚ä¸‹å›¾ï¼š

![](https://i-blog.csdnimg.cn/blog_migrate/f80663b8b5735d9a39d9cee5420bd9bc.png)

æ‰€ä»¥ï¼Œç¬¬ä¸‰æ–¹æ ·å¼æˆ‘ä»¬ä¸åº”è¯¥ä½¿ç”¨ import å¯¼å…¥æ–¹å¼ï¼Œå–è€Œä»£ä¹‹çš„åº”è¯¥æ˜¯ä½¿ç”¨ link æ ‡ç­¾å¼•å…¥

**List ç»„ä»¶**

```
<template>
  <div class="row">
    <!-- å±•ç¤ºç”¨æˆ·åˆ—è¡¨ -->
    <div
      v-show="info.users.length"
      class="card"
      v-for="p in info.users"
      :key="p.login"
    >
      <!-- ä¸€ä¸ªç½‘ç«™ä¸å­˜åœ¨ä¸¤ä¸ªåŒåçš„ç”¨æˆ· -->
      <a
        :href="p.html_url"
        target="_blank"
      >
        <img
          :src="p.avatar_url"
          style='width: 100px'
        />
      </a>
      <p class="card-text">{{p.login}}</p>
    </div>
    <!-- å±•ç¤ºæ¬¢è¿è¯ -->
    <h1 v-show="info.isFirst">æ¬¢è¿ä½¿ç”¨</h1>
    <!-- å±•ç¤ºåŠ è½½ä¸­ -->
    <h1 v-show="info.isLoading">åŠ è½½ä¸­.......</h1>
    <!-- å±•ç¤ºé”™è¯¯ä¿¡æ¯ -->
    <h1 v-show="info.errMsg">{{info.errMsg}}</h1>
  </div>
</template>

<script>
export default {
  name: "List",
  data() {
    return {
      info: {
        isFirst: true,	// æ˜¯å¦å±•ç¤ºæ¬¢è¿è¯­
        isLoading: false,	// æ˜¯å¦æ˜¾ç¤ºæ­£åœ¨åŠ è½½ä¸­
        errMsg: "",	// é”™è¯¯ä¿¡æ¯
        users: [],	// ç”¨æˆ·åˆ—è¡¨
      },
    };
  },
  mounted() {
    this.$bus.$on("getUsers", (dataObj) => {
      console.log("æˆ‘æ˜¯ List ç»„ä»¶ï¼Œæ¥å—åˆ°æ•°æ®:", dataObj);
      this.info = {...this.info, ...dataObj}
        // ä½¿ç”¨æ‰©å±•è¿ç®—æ³•æ¥è¾¾åˆ°è®¾ç½®é»˜è®¤å€¼çš„æ•ˆæœï¼Œå½“ dataObj ä¸ this.info æœ‰åŒåçš„å˜é‡å°±ä¼šè¿›è¡Œè¦†ç›–
    });
  },
  beforeDestroyed() {
    this.$bus.$off('getUsers');
  },
};
</script>

<style scoped>
.card {
  float: left;
  width: 33.333%;
  padding: 0.75rem;
  margin-bottom: 2rem;
  border: 1px solid #efefef;
  text-align: center;
}

.card > img {
  margin-bottom: 0.75rem;
  border-radius: 100px;
}

.card-text {
  font-size: 85%;
}
</style>

```

**Search ç»„ä»¶**

```
<template>
  <section class="jumbotron">
    <h3 class="jumbotron-heading">Search Github Users</h3>
    <div>
      <input
        type="text"
        placeholder="enter the name you search"
        v-model="keyWord"
      />Â 
      <button @click="searchUsers">Search</button>
    </div>
  </section>
</template>

<script>
import axios from 'axios'
export default {
  name:'Search',
  data() {
    return {
      keyWord:'',
    }
  },
  methods: {
    searchUsers() {
      this.$bus.$emit('getUsers', {isFirst:false, isLoading:true, users:[], errMsg:''});
      axios.get(`https://api.github.com/search/users?q=${this.keyWord}`).then(
        response => {
          console.log('è¯·æ±‚æˆåŠŸ', response.data.items);
          this.$bus.$emit('getUsers', {isLoading:false, users:response.data.items, errMsg:''});
        },
        error => {
          console.log('è¯·æ±‚å¤±è´¥', error.message);
          this.$bus.$emit('getUsers', {isLoading:false, users:[], errMsg:'search failed'});
        }
      )
    }
  },
};
</script>

<style scoped>
.album {
  min-height: 50rem; /* Can be removed; just added for demo purposes */
  padding-top: 3rem;
  padding-bottom: 3rem;
  background-color: #f7f7f7;
}
</style>

```

æ˜¾ç¤ºæ•ˆæœå¦‚ä¸‹ï¼š

![](https://i-blog.csdnimg.cn/blog_migrate/291298e2c579cbadbc47e274dc1551dd.gif)

### 13.3 vue-resource

vue-resource æ˜¯ Vue.js ä¸­çš„ä¸€æ¬¾æ’ä»¶ï¼Œå®ƒå¯ä»¥é€šè¿‡ XMLHttpResquest æˆ– JSONP å‘èµ·è¯·æ±‚å¹¶å¤„ç†å“åº”

**ä½¿ç”¨æ­¥éª¤**

1.  å®‰è£… vue-resource
    
    ```
    npm install vue-resource
    
    ```
    
2.  å¼•å…¥æ’ä»¶
    
    ```
    import vueResource from 'vue-resource'
    
    ```
    
3.  ä½¿ç”¨æ’ä»¶
    
    ```
    Vue.use(vueResource)
    
    ```
    

å½“æˆ‘ä»¬ä½¿ç”¨å®Œè¿™ä¸ªæ’ä»¶ä¹‹åï¼Œæˆ‘ä»¬ä¼šå‘ç°æ‰€æœ‰çš„ç»„ä»¶çš„ `_watcher` éƒ½ä¼šå¢åŠ ä¸€ä¸ª `$http` çš„å¯¹è±¡ï¼š

![](https://i-blog.csdnimg.cn/blog_migrate/397f12de12663c29653a1ba412b456a2.png)

è¯¥å¯¹è±¡çš„ä½œç”¨ç±»ä¼¼äº axiosï¼ˆåŸºæœ¬ç”¨æ³•ç›¸åŒï¼‰ï¼Œæ‰€ä»¥æˆ‘ä»¬åœ¨ä½¿ç”¨çš„æ—¶å€™å¯ä»¥ç›´æ¥å°†åŸæ¥ axios è¯·æ±‚çš„ â€œaxiosâ€ æ›¿æ¢ä¸º `this.$http` æ•ˆæœç›¸åŒï¼Œä¾‹å¦‚å‰é¢çš„ github æœç´¢çš„æ¡ˆä¾‹ï¼Œæ›¿æ¢çš„ä»£ç å¦‚ä¸‹ï¼š

```
this.$http.get(`https://api.github.com/search/users?q=${this.keyWord}`).then(
  response => {
    console.log('è¯·æ±‚æˆåŠŸ', response.data.items);
    this.$bus.$emit('getUsers', {isLoading:false, users:response.data.items, errMsg:''});
  },
  error => {
    console.log('è¯·æ±‚å¤±è´¥', error.message);
    this.$bus.$emit('getUsers', {isLoading:false, users:[], errMsg:'search failed'});
  }
)

```

ä½†æ˜¯ç›¸è¾ƒèµ·æ¥ï¼Œvue-resource ç°åœ¨çš„ç»´æŠ¤å·²ç»ä¸å†é‚£ä¹ˆé¢‘ç¹ï¼Œå¹¶ä¸”ç›¸è¾ƒèµ·æ¥ï¼Œaxios æ€§èƒ½æ›´åŠ ä¼˜ç§€ï¼Œæ‰€ä»¥æˆ‘ä»¬ç°é˜¶æ®µéƒ½æ˜¯ä½¿ç”¨ axios

### 13.4 æ’æ§½

æ’æ§½çš„ä½œç”¨ï¼šåœ¨å­ç»„ä»¶çš„æŸä¸ªä½ç½®æ’å…¥çˆ¶ç»„ä»¶è‡ªå®šä¹‰çš„ html ç»“æ„å’Œ data æ•°æ®

æ’æ§½åˆ†ä¸ºä¸‰ç§:

1.  é»˜è®¤æ’æ§½
2.  å…·åæ’æ§½
3.  ä½œç”¨åŸŸæ’æ§½

#### 13.4.1 é»˜è®¤æ’æ§½

æˆ‘ä»¬ä¹‹å‰éƒ½æ˜¯ç”¨è‡ªé—­åˆæ ‡ç­¾æ¥æ’å…¥å­ç»„ä»¶ï¼Œå…¶å®æˆ‘ä»¬ä¹Ÿå¯ä»¥ä½¿ç”¨åŒæ ‡ç­¾æ¥æ’å…¥ç»„ä»¶

åœ¨åŒæ ‡ç­¾ä¸­ï¼Œæˆ‘ä»¬å°†è‡ªå®šä¹‰çš„ HTML æ ‡ç­¾æˆ–è€… data æ•°æ®æ”¾å…¥åŒæ ‡ç­¾ä¸­ï¼Œç„¶åè·‘åˆ°å­ç»„ä»¶ä¸­ï¼Œä½¿ç”¨ **`slot`** æ ‡ç­¾æ¥æŒ‡å®šæ’æ§½ä½ç½®ï¼Œè¡¨ç¤ºå°†åŒæ ‡ç­¾çš„å†…å®¹æ’å…¥åˆ°é‚£é‡Œ

**çˆ¶ç»„ä»¶**

```
<Category title="ç¾é£Ÿ" :itemList="foods">
  <img src="xxx.jpg" alt="">
</Category>

```

**å­ç»„ä»¶**

```
<slot>æˆ‘æ˜¯ä¸€ä¸ªæ’æ§½ï¼Œå½“ä½¿ç”¨è€…æ²¡æœ‰ä¼ å…¥å…·ä½“ç»“æ„æˆ–è€…æ•°æ®æ—¶ï¼Œæˆ‘è¿™ä¸ªå†…å®¹å°†ä¼šæ˜¾ç¤ºå‡ºæ¥ï¼Œå¦åˆ™ä¸æ˜¾ç¤º</slot>

```

#### 13.4.2 å…·åæ’æ§½

å…·åæ’æ§½ç®€å•æ¥å°†å°±æ˜¯å…·æœ‰åå­—çš„æ’æ§½ï¼Œç”¨äºå­ç»„ä»¶å…·æœ‰å¤šä¸ªæ’æ§½çš„æƒ…å†µï¼ŒVue å¯ä»¥æ ¹æ®åå­—æ¥è¯†åˆ«å¯¹åº”çš„æ’æ§½ï¼Œæˆ‘ä»¬å¯ä»¥è”æƒ³é»˜è®¤æš´éœ²å’Œåˆ†åˆ«æš´éœ²

**çˆ¶ç»„ä»¶**

```
<Category title="ç¾é£Ÿ" :itemList="foods">
  <p slot="first">æˆ‘è¦æ”¾ç½®åˆ°æ’æ§½1ä¸­</p>
  <p slot="second">æˆ‘è¦æ”¾ç½®åˆ°æ’æ§½2ä¸­</p>
</Category>

```

**å­ç»„ä»¶**

```
<slot >æˆ‘æ˜¯æ’æ§½1ï¼Œå½“ä½¿ç”¨è€…æ²¡æœ‰ä¼ å…¥å…·ä½“ç»“æ„æˆ–è€…æ•°æ®æ—¶ï¼Œæˆ‘è¿™ä¸ªå†…å®¹å°†ä¼šæ˜¾ç¤ºå‡ºæ¥ï¼Œå¦åˆ™ä¸æ˜¾ç¤º</slot>
<slot >æˆ‘æ˜¯æ’æ§½2ï¼Œå½“ä½¿ç”¨è€…æ²¡æœ‰ä¼ å…¥å…·ä½“ç»“æ„æˆ–è€…æ•°æ®æ—¶ï¼Œæˆ‘è¿™ä¸ªå†…å®¹å°†ä¼šæ˜¾ç¤ºå‡ºæ¥ï¼Œå¦åˆ™ä¸æ˜¾ç¤º</slot>

```

å…¶å®ï¼Œå¦‚æœæˆ‘ä»¬å¦‚æœæƒ³è¦æ’å…¥å¤šä¸ªå…ƒç´ èŠ‚ç‚¹ï¼Œé‚£ä¹ˆå®Œå…¨å¯ä»¥å°†å…¶æ”¾å…¥ä¸€ä¸ª `div` æ ‡ç­¾ä¸­ï¼Œç„¶åç»™è¯¥ `div` æ ‡ç­¾æ·»åŠ  `slot` å³å¯ä¸€æ¬¡åŒæ—¶æ·»åŠ å¤šä¸ªå…ƒç´ èŠ‚ç‚¹ï¼Œä½†æ˜¯å¦‚æœä¸æƒ³è¦ç”Ÿæˆçš„å¤šä½™çš„ div ç»“æ„ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨ `template` æ ‡ç­¾ä»£æ›¿ï¼Œæ­¤æ—¶çš„ `slot` å¯ä»¥å†™æˆ `v-slot:slotName`

**çˆ¶ç»„ä»¶**

```
<template v-slot:multi>
  <p slot="first">æˆ‘è¦æ”¾ç½®åˆ°æ’æ§½1ä¸­</p>
  <p slot="second">æˆ‘è¦æ”¾ç½®åˆ°æ’æ§½2ä¸­</p>
</template>

```

> ç”±äºçˆ¶ç»„ä»¶å¤–é¢ä¹Ÿæœ‰ä¸€ä¸ª templateï¼Œæˆ‘ä»¬éœ€è¦ç”¨ç¼©è¿›æ¥è¿›è¡ŒåŒºåˆ†

**å­ç»„ä»¶**

```
<slot >æˆ‘æ˜¯æ’æ§½1ï¼Œå½“ä½¿ç”¨è€…æ²¡æœ‰ä¼ å…¥å…·ä½“ç»“æ„æˆ–è€…æ•°æ®æ—¶ï¼Œæˆ‘è¿™ä¸ªå†…å®¹å°†ä¼šæ˜¾ç¤ºå‡ºæ¥ï¼Œå¦åˆ™ä¸æ˜¾ç¤º</slot>

```

#### 13.4.3 ä½œç”¨åŸŸæ’æ§½

å½“æ•°æ®åœ¨ç»„ä»¶çš„è‡ªèº«ï¼Œä½†æ˜¯æ ¹æ®æ•°æ®ç”Ÿæˆçš„ç»“æ„éœ€è¦ç”±ç»„ä»¶çš„ä½¿ç”¨è€…æ¥å†³å®šï¼Œæ­¤æ—¶æˆ‘ä»¬å°±å¯ä»¥ç”¨åˆ°ä½œç”¨åŸŸæ’æ§½

ç¤ºä¾‹ï¼š

ç°åœ¨æˆ‘åœ¨ Category ç»„ä»¶ä¸­æœ‰æ•°æ®å¦‚ä¸‹ï¼š

```
foods: ["ç«é”…", "çƒ§çƒ¤", "å°é¾™è™¾", "ç‰›æ’"],
games: ["çº¢è‰²è­¦æˆ’", "ç©¿è¶Šç«çº¿", "åŠ²èˆå›¢", "è¶…çº§ç›ä¸½"],
films: ["ã€Šæ•™çˆ¶ã€‹", "ã€Šæ‹†å¼¹ä¸“å®¶ã€‹", "ã€Šä½ å¥½ï¼Œæç„•è‹±ã€‹", "ã€Šå°šç¡…è°·ã€‹"],

```

å¹¶ä¸”åœ¨ template ç»“æ„ä¸­æ·»åŠ ä¸€ä¸ªæ’æ§½ï¼š

```
<slot :foods="foods" :games="games"></slot>

```

å›åˆ° App ç»„ä»¶ä¸­åŠ å…¥å­ç»„ä»¶ç»“æ„ï¼š

```
<Category>
  <template slot-scope="dataObj"> 
    <ul>
      <li
        v-for="(f, index) in dataObj.foods"
        :key="index"
      >{{f}}</li>
    </ul>
  </template>
</Category>
<Category>
  <template slot-scope="dataObj"> 
    <ol>
      <li
        v-for="(g, index) in dataObj.games"
        :key="index"
      >{{g}}</li>
    </ol>
  </template>
</Category>

```

> *   Vue 2.5 ä¹‹åå°†åŸæ¥çš„æ¥æ”¶ dataObj çš„å±æ€§åç”±åŸæ¥çš„ `scope` æ”¹æˆä¸º `slot-scope`ï¼Œå› æ­¤è¿™ä¸¤ç§æ–¹æ³•ç°é˜¶æ®µéƒ½å¯ä»¥ä½¿ç”¨
>     
> *   åŒæ—¶ä¸ºäº†ä¹¦å†™æ–¹ä¾¿ï¼Œæˆ‘ä»¬å¯ä»¥å€ŸåŠ©è§£æ„èµ‹å€¼å»é™¤æ‰å‰ç¼€ `dataObj`ï¼ˆè¯¥ `dataObj` ä¸ºè‡ªå·±å®šä¹‰ï¼‰ï¼Œå¦‚ä¸‹ï¼š
>     
>     ```
>     <Category>
>       <template slot-scope="{foods}"> 
>         <ul>
>           <li
>             v-for="(f, index) in foods"
>             :key="index"
>           >{{f}}</li>
>         </ul>
>       </template>
>     </Category>
>     
>     ```
>     

æœ€ç»ˆæ˜¾ç¤ºæ•ˆæœå¦‚ä¸‹ï¼š

![](https://i-blog.csdnimg.cn/blog_migrate/682b9c0b98ff5a1390e5982340938b80.png)

ç”¨çš„æ•°æ®éƒ½æ˜¯å­ç»„ä»¶ä¸­çš„ dataï¼Œä½†æ˜¯æ‰€ä½¿ç”¨çš„ç»“æ„æ˜¯çˆ¶ç»„ä»¶è‡ªå®šä¹‰çš„

14 Vuex
-------

### 14.1 Vuex ä»‹ç»

æ¦‚å¿µï¼šVuex æ˜¯ä¸“é—¨åœ¨ Vue ä¸­å®ç°é›†ä¸­å¼çŠ¶æ€ï¼ˆæ•°æ®ï¼‰ç®¡ç†çš„ä¸€ä¸ª Vue æ’ä»¶ï¼Œå¯¹åº” Vue åº”ç”¨ä¸­çš„å¤šä¸ªç»„ä»¶çš„å…±äº«çŠ¶æ€çš„è¿›è¡Œé›†ä¸­å¼çš„ç®¡ç†ï¼ˆè¯» / å†™ï¼‰ï¼Œä¹Ÿæ˜¯ä¸€ç§ç»„ä»¶é—´é€šä¿¡çš„æ–¹å¼ï¼Œä¸”é€‚äºä»»æ„ç»„ä»¶é—´é€šä¿¡ã€‚

ç°åœ¨æˆ‘ä»¬æ¥å¼•å…¥ä¸€ä¸ªèƒŒæ™¯ï¼Œè¯´æ˜ä¸ºä»€ä¹ˆè¦å¼•å…¥ Vuexã€‚

æˆ‘ä»¬ä¸ºäº†å®ç°å¤šç»„ä»¶ä¹‹é—´æ•°æ®çš„å…±äº«ï¼ˆåŒ…æ‹¬è¯»æ•°æ®ä¸å†™æ•°æ®ï¼‰ï¼Œå¦‚æœæˆ‘ä»¬**ä½¿ç”¨å…¨å±€äº‹ä»¶æ€»çº¿æ¥å®Œæˆ**ï¼Œé‚£ä¹ˆå…³ç³»å›¾å¦‚ä¸‹ï¼š

![](https://i-blog.csdnimg.cn/blog_migrate/782dfea857677c5c862c18bd54bc4fdb.png)

æˆ‘ä»¬ä¼šå‘ç°ï¼Œå®ƒä»¬ä¹‹é—´çš„å…³ç³»é”™ç»¼å¤æ‚ï¼Œä¸åˆ©ç”¨ä¸ç»´æŠ¤ä¸ç®¡ç†ï¼Œè€Œä¸”ä¸€æ—¦éœ€è¦é€šä¿¡çš„ç»„ä»¶å˜å¤šï¼Œè¿™äº›å…³ç³»çº¿å°±ä¼šæ›´åŠ ä¹±ï¼Œè€Œå¦‚æœæˆ‘ä»¬**é€šè¿‡ Vuex æ¥å®ç°**ï¼Œé‚£ä¹ˆå…³ç³»å›¾å¦‚ä¸‹ï¼š

![](https://i-blog.csdnimg.cn/blog_migrate/06e9470c397075f228d8ab92b4de40be.png)

Vuex çš„ Github åœ°å€ï¼š[ä¼ é€é—¨](https://github.com/vuejs/vuex)

**ä½¿ç”¨ Vuex çš„æ—¶æœº**

1.  å¤šç»„ä»¶ä¾èµ–äºåŒä¸€çŠ¶æ€
2.  æ¥è‡ªä¸åŒç»„ä»¶çš„è¡Œä¸ºéœ€è¦å˜æ›´ä¸ºåŒä¸€çŠ¶æ€

### 14.2 æ±‚å’Œæ¡ˆä¾‹

ä½¿ç”¨çº¯ Vue ç¼–å†™çš„æ ¸å¿ƒä»£ç å¦‚ä¸‹ï¼š

```
<template>
  <div>
    <h1>å½“å‰æ±‚å’Œä¸ºï¼š{{current}}</h1>
    <select v-model.number="base">
        <option value="1">1</option>
        <option value="2">2</option>
        <option value="3">3</option>
        <!-- è¿™é‡Œå¯ä»¥åœ¨ value å‰é¢æ·»åŠ ":"",æˆ–è€…åœ¨ v-model åé¢æ·»åŠ ä¿®é¥°ç¬¦numberï¼Œå¼ºåˆ¶è½¬åŒ–ä¸ºæ•°å­—ï¼Œå¦åˆ™ 1ã€2ã€3 å°†ä¼šè¢«å½“åšå­—ç¬¦ä¸²çœ‹å¾… -->
    </select>
    <button @click="increment">+</button>
    <button @click="decrement">-</button>
    <button @click="incrementOdd">å½“å‰æ±‚å’Œä¸ºå¥‡æ•°å†åŠ </button>
    <button @click="incrementWait">ç­‰ä¸€ç­‰å†åŠ </button>
  </div>
</template>

<script>
export default {
  name:"Count",
  data() {
    return {
      base: 1,  // ç”¨æˆ·é€‰æ‹©çš„å¢åŠ å’Œåˆ é™¤çš„åŸºæ•°
      current:0,    // å½“å‰çš„æ•°å­—
    }
  },
  methods: {
    increment() {
      this.current += this.base;
    },
    decrement() {
      this.current -= this.base;
    },
    incrementOdd() {
      if (this.current % 2 != 0) {
        this.current += this.base;
      }
    },
    incrementWait() {
      setTimeout(() => {
        this.current += this.base;
      }, 500)
    }
  }
}
</script>

<style>

</style>

```

æ˜¾ç¤ºæ•ˆæœå¦‚ä¸‹ï¼š

![](https://i-blog.csdnimg.cn/blog_migrate/232c2035a1c031a17dbe063e96f16e06.gif)

### 14.3 Vuex çš„å·¥ä½œåŸç†

é¦–å…ˆæˆ‘ä»¬æ¥åˆ†æ Vuex çš„å·¥ä½œåŸç†å›¾ï¼š

![](https://i-blog.csdnimg.cn/blog_migrate/d0fb49c30e6d1d01527c7ee49b1d8914.png)

*   é¦–å…ˆï¼Œæ¯ä¸€ä¸ª Vuex åº”ç”¨çš„æ ¸å¿ƒå°±æ˜¯ `store`ï¼Œå®ƒè´Ÿè´£ç®¡ç†ç»Ÿä¸€çš„çŠ¶æ€å’Œæ•°æ®
*   `state`ï¼ˆæ•°æ®ï¼‰
    *   Vuex ç®¡ç†çš„**çŠ¶æ€å¯¹è±¡**ï¼Œå®ƒæ˜¯å”¯ä¸€çš„
*   `actions`ï¼ˆäº‹ä»¶ï¼‰
    1.  å€¼ä¸ºä¸€ä¸ª**å¯¹è±¡ï¼ŒåŒ…å«å¤šä¸ªå“åº”ç”¨æˆ·åŠ¨ä½œçš„å›è°ƒå‡½æ•°**ï¼›
    2.  é€šè¿‡ `commit()` æ¥è§¦å‘ `mutation` ä¸­çš„å‡½æ•°çš„è°ƒç”¨ï¼Œé—´æ¥æ›´æ–° `state`
    3.  è§¦å‘ axios ä¸­çš„å›è°ƒï¼š`$store.dispatch('å¯¹åº”çš„ action å›è°ƒå')` æ¥è§¦å‘
    4.  å¯ä»¥åŒ…å«å¼‚æ­¥ä»£ç ï¼ˆå®šæ—¶å™¨ã€Ajax ç­‰ï¼‰
*   `mutations`ï¼ˆæ‰§è¡Œï¼‰
    1.  å€¼ä¸ºä¸€ä¸ª**å¯¹è±¡ï¼ŒåŒ…å«å¤šä¸ªç›´æ¥æ›´æ–° state çš„æ–¹æ³•**
    2.  è°ƒç”¨ `mutations` ä¸­æ–¹æ³•ï¼šåœ¨ `action` ä¸­ä½¿ç”¨ `commit('å¯¹åº”çš„ mutations æ–¹æ³•å')` æ¥è§¦å‘
    3.  ç‰¹ç‚¹ï¼šä¸èƒ½å†™å¼‚æ­¥ä»£ç ã€åªèƒ½å•çº¯åœ°æ“ä½œ state

### 14.4 æ­å»º Vuex çš„å¼€å‘ç¯å¢ƒ

é¦–å…ˆï¼Œåœ¨æ­å»º Vuex çš„å¼€å‘ç¯å¢ƒä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦äº†è§£ä¸€ä»¶äº‹ï¼Œå°±æ˜¯ï¼š

*   `Vue 2` ä¸­ï¼Œè¦ç”¨ `Vuex 3` çš„ç‰ˆæœ¬
*   `Vue 3` ä¸­ï¼Œè¦ç”¨ `Vuex 4` çš„ç‰ˆæœ¬

1. ç”±äºæˆ‘ä»¬å½“å‰æ˜¯ä½¿ç”¨ `Vue 2` çš„ç‰ˆæœ¬è¿›è¡Œå¼€å‘å­¦ä¹ çš„ï¼Œæ‰€ä»¥ç°åœ¨è¦å®‰è£… `Vuex 3` çš„ç‰ˆæœ¬

```
npm i vuex@3

```

2. åˆ›å»º `src/store/index.js`ï¼Œè¯¥æ–‡ä»¶ç”¨äºåˆ›å»º `Vuex` ä¸­æœ€ä¸ºæ ¸å¿ƒçš„ `store`

```
import Vue from 'vue'
import Vuex from 'vuex' // å¼•å…¥ vuex

Vue.use(Vuex)   // ä½¿ç”¨ vuex æ’ä»¶

const actions = {}      // å‡†å¤‡ actions â€”â€” ç”¨äºå“åº”ç»„ä»¶ä¸­åŠ¨ä½œ
const mutations = {}    // å‡†å¤‡ mutations â€”â€” ç”¨äºæ“ä½œæ•°æ®ï¼ˆstateï¼‰
const state = {}        // å‡†å¤‡ state â€”â€” ç”¨äºå­˜å‚¨æ•°æ®

// åˆ›å»ºå¹¶æš´éœ² store
export default new Vuex.Store({
    actions,
    mutations,
    state,
})

```

3. åœ¨ `src/main.js`ä¸­åˆ›å»º `vm` æ—¶ä¼ å…¥ `store` é…ç½®é¡¹

```
import Vue from 'vue'
import App from './App.vue'

Vue.config.productionTip = false
// å¼•å…¥ store 
import store from './store'
new Vue({
  render: h => h(App),
  store,    // é…ç½®é¡¹æ·»åŠ  store
}).$mount('#app')

```

é¦–å…ˆæˆ‘ä»¬éœ€è¦äº†è§£åˆ° vuex æœ€ä¸ºæ ¸å¿ƒçš„ store æ˜¯éœ€è¦æˆ‘ä»¬è‡ªå·±é…ç½®çš„ï¼Œå³ä½¿æˆ‘ä»¬å·²ç»å®‰è£…å¥½äº† vuexï¼Œä¹‹åæ¥è§£é‡Šä»¥ä¸‹å‡ ä¸ªé—®é¢˜ï¼š

1.  æˆ‘ä»¬ä¸ºä»€ä¹ˆéœ€è¦åœ¨åˆ›å»ºçš„ store æ–‡ä»¶å¤¹ä¸‹çš„ index.js ä¸‹ä¸­ä½¿ç”¨å¼•å…¥å’Œä½¿ç”¨ vuexï¼Œè€Œä¸æ˜¯åœ¨ main.js ä¸­å¼•å…¥å¹¶ä½¿ç”¨
    
    è¿™æ˜¯ç”±äºæˆ‘ä»¬åœ¨åˆ›å»º store å®ä¾‹ä¹‹å‰å¿…é¡»è¦å…ˆè°ƒç”¨ `Vue.use(vuex)`ï¼Œå¦‚æœæˆ‘ä»¬åœ¨ main.js ä¸­ä½¿ç”¨`import Vuex from 'vuex'` æ¥å¼•å…¥ vuex ï¼Œä¹‹å`Vue.use(Vuex)` æ¥ä½¿ç”¨ vuexï¼Œé‚£ä¹ˆ JS ä¼šå…ˆæ‰§è¡Œ import ï¼Œä¹Ÿå°±æ˜¯ä¼šå…ˆåˆ›å»º store å®ä¾‹ï¼Œä¹‹åæ‰ä¼šæ‰§è¡Œ `Vue.use(Vuex)`ï¼Œå°±ä¼šå‡ºç°å…ˆåé¡ºåºä¸Šçš„é”™è¯¯
    
    ![](https://i-blog.csdnimg.cn/blog_migrate/9c17c99d8408e30db98155afcb679468.png)
2.  ä¸ºä»€ä¹ˆæˆ‘ä»¬å¼•å…¥ `src/store/index.js` ä¸éœ€è¦ä½¿ç”¨ `import store from './store/index.js'`ï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨ `import store from './store'`
    
    è¿™ä¸»è¦æ˜¯æ–‡ä»¶åå‘½åä¸º index.jsï¼Œé»˜è®¤æƒ…å†µä¸‹ ï¼Œå½“æˆ‘ä»¬ç›´æ¥å¯¼å…¥ä¸€ä¸ªæ–‡ä»¶å¤¹æ—¶ï¼Œvue é»˜è®¤å¼•å…¥ index å‘½åçš„æ–‡ä»¶ï¼Œå¦‚æœæˆ‘ä»¬æ”¹æˆå…¶ä»–åç§°ï¼Œé‚£ä¹ˆåˆ™ä¼šå¤±æ•ˆ
    

å½“æˆ‘ä»¬é…ç½®å®Œ vuex çš„ç¯å¢ƒä¹‹åï¼Œå°±ä¼šå‘ç°æ‰€æœ‰çš„ç»„ä»¶å°±éƒ½ä¼šå¸¦ä¸Š `$store` è¿™ä¸ªæ–¹æ³•å¯¹è±¡

![](https://i-blog.csdnimg.cn/blog_migrate/e348d22b8be0ddfd1bad8444b959d376.png)

### 14.5 æ±‚å’Œæ¡ˆä¾‹çš„ vuex ç‰ˆæœ¬

**Count ç»„ä»¶**

```
<template>
  <div>
    <h1>å½“å‰æ±‚å’Œä¸ºï¼š{{$store.state.current}}</h1>
    <select v-model.number="base">
      <option value="1">1</option>
      <option value="2">2</option>
      <option value="3">3</option>
      <!-- è¿™é‡Œå¯ä»¥åœ¨ value å‰é¢æ·»åŠ ":"",æˆ–è€…åœ¨ v-model åé¢æ·»åŠ ä¿®é¥°ç¬¦numberï¼Œå¼ºåˆ¶è½¬åŒ–ä¸ºæ•°å­—ï¼Œå¦åˆ™ 1ã€2ã€3 å°†ä¼šè¢«å½“åšå­—ç¬¦ä¸²çœ‹å¾… -->
    </select>
    <button @click="increment">+</button>
    <button @click="decrement">-</button>
    <button @click="incrementOdd">å½“å‰æ±‚å’Œä¸ºå¥‡æ•°å†åŠ </button>
    <button @click="incrementWait">ç­‰ä¸€ç­‰å†åŠ </button>
  </div>
</template>

<script>
export default {
  name: "Count",
  data() {
    return {
      base: 1, // ç”¨æˆ·é€‰æ‹©çš„å¢åŠ å’Œåˆ é™¤çš„åŸºæ•°
    };
  },
  methods: {
    increment() {
      this.$store.commit("INCREMENT", this.base);
    },
    decrement() {
      this.$store.commit("DECREMENT", this.base);
    },
    incrementOdd() {
      this.$store.dispatch("incrementOdd", this.base);
    },
    incrementWait() {
      this.$store.dispatch("incrementWait", this.base);
    }
  },
};
</script>

<style>
</style>

```

**index.js**

```
import Vue from 'vue'
import Vuex, { createLogger } from 'vuex' // å¼•å…¥ vuex

Vue.use(Vuex)   // ä½¿ç”¨ vuex æ’ä»¶

const actions = {
    // increment:function() {

    // }
    // increment(context, value) {
    //    context.commit('INCREMENT', value);
    // },
    // decrement(context, value) {
    //     context.commit('DECREMENT', value);
    // },
    incrementOdd(context, value) {
        if(context.state.current % 2) {
            context.commit('INCREMENT', value);
        }
    },
    incrementWait(context, value) {
        setTimeout(() => {
            context.commit('INCREMENT', value);
        }, 500)
    }
    
}      // å‡†å¤‡ actions â€”â€” ç”¨äºå“åº”ç»„ä»¶ä¸­åŠ¨ä½œ
const mutations = {
    INCREMENT(state, value) {
        state.current += value;
    },
    DECREMENT(state, value) {
        state.current -= value;
    },
    
}    // å‡†å¤‡ mutations â€”â€” ç”¨äºæ“ä½œæ•°æ®ï¼ˆstateï¼‰
const state = {
    current:0,
}        // å‡†å¤‡ state â€”â€” ç”¨äºå­˜å‚¨æ•°æ®

// åˆ›å»ºå¹¶æš´éœ² store
export default new Vuex.Store({
    actions,
    mutations,
    state,
})

```

ğŸ—’**æ€»ç»“**

1.  åœ¨ç»„ä»¶ä¸­å¯ä»¥ç”¨è¿‡ `$store.dispatch` æ¥è°ƒé£ `actions` ä¸­çš„å›è°ƒå‡½æ•°ï¼Œé‡Œé¢æœ‰ä¸¤ä¸ªå‚æ•°ï¼Œä¸€ä¸ªæ˜¯è°ƒé£çš„å‡½æ•°åï¼Œç¬¬äºŒä¸ªæ˜¯è¦ä¼ é€’çš„å‚æ•°
    
2.  åœ¨ `Vuex` ä¸­çš„ `actions` ä¸­çš„å›è°ƒå‡½æ•°ä¹Ÿæœ‰ä¸¤ä¸ªæ¥å—çš„å‚æ•°ï¼Œç¬¬ä¸€ä¸ªä¸º `context`ï¼Œæ˜¯ä¸€ä¸ªå°å‹çš„ `$store`ï¼Œé‡Œé¢åŒ…å« `state`ã€`commit` ç­‰é‡è¦çš„æ–¹æ³•å¯¹è±¡ï¼Œç¬¬äºŒä¸ªå‚æ•°ä¸ºä»ç»„ä»¶ä¸­æ¥æ”¶è¿‡æ¥çš„å‚æ•°
    
    ![](https://i-blog.csdnimg.cn/blog_migrate/816c83bd90a60712158f4d671c713512.png)
3.  åœ¨ `mutations` ä¸­æ¯ä¸ªå‡½æ•°éƒ½åº”è¯¥ä½¿ç”¨å¤§å†™æ¥ä¸ `actions` ä¸­çš„å‡½æ•°åŒºåˆ†ï¼Œé™¤æ­¤ä¹‹å¤–ï¼Œç‰¹åˆ«æ³¨æ„ï¼Œå¦‚æœç»„ä»¶ä¸­è¦å®Œæˆçš„äº‹ä»¶å­˜åœ¨ä¸šåŠ¡é€»è¾‘ï¼ˆä¸€äº›å¼‚æ­¥æ“ä½œï¼Œä¾‹å¦‚å®šæ—¶å™¨å’Œé€»è¾‘åˆ¤æ–­ç­‰ï¼‰ï¼Œé‚£ä¹ˆå¿…é¡»å…ˆé€šè¿‡ `dispatch` è°ƒé£ï¼Œä¹‹åå†é€šè¿‡ `commit` æäº¤åˆ° `mutation` ä¸­ï¼›å¦‚æœç»„ä»¶ä¸­è¦å®Œæˆçš„äº‹ä»¶æ²¡æœ‰ä¸šåŠ¡é€»è¾‘ï¼Œé‚£ä¹ˆå¯ä»¥ç›´æ¥åœ¨ç»„ä»¶ä¸­ä½¿ç”¨ `commit` è¿›è¡Œæäº¤
    
4.  `actions` å’Œ `mutation` éƒ½æ˜¯å¯¹è±¡ï¼Œé‡Œé¢çš„æ¯ä¸ªå…ƒç´ éƒ½æ˜¯é”®å€¼å¯¹ï¼Œè¿™é‡Œé‡‡ç”¨äº†ç®€å†™å½¢å¼ï¼Œä¹Ÿå°±æ˜¯ `a:function(){â€¦}` å¯ä»¥æ”¹å†™æˆ `a(){â€¦}` çš„å½¢å¼
    

### 14.6 Vuex å¼€å‘è€…å·¥å…·çš„ä½¿ç”¨

Vuex å’Œ Vue çš„å¼€å‘è€…å·¥å…·éƒ½é›†æˆåˆ° Vue.js.devtools ä¸­ï¼Œç”±äºæˆ‘ä»¬åœ¨ä¹‹å‰å·²ç»å®‰è£…è¿‡ï¼Œæ‰€ä»¥å®‰è£…è¿‡ç¨‹ç›´æ¥è·³è¿‡ï¼Œåˆ‡æ¢åˆ° vuex è§†å›¾ï¼š

![](https://i-blog.csdnimg.cn/blog_migrate/59e8033e370595821da3a71060f89d92.png)

æˆ‘ä»¬è¿˜å¯ä»¥åœ¨æ—¶é—´çº¿è¿™é‡ŒæŸ¥çœ‹äº‹ä»¶å‘ç”Ÿæ¬¡æ•°å’Œå¯¹åº”æ—¶é—´

![](https://i-blog.csdnimg.cn/blog_migrate/11d2136768d5ce75d7b98e2ff87b48a9.png)

### 14.7 getters é…ç½®é¡¹

å½“ state ä¸­çš„æ•°æ®éœ€è¦ç»è¿‡åŠ å·¥åå†ä½¿ç”¨æ—¶ï¼Œæˆ‘ä»¬å¯ getters åŠ å·¥

> state å’Œ getters ä¹‹é—´çš„å…³ç³»ç±»ä¼¼äºç»„ä»¶ä¸­çš„ data å’Œ computed ä¹‹é—´çš„å…³ç³»

è¯­æ³•å¦‚ä¸‹ï¼š

1.  åœ¨ `store/index.js` ä¸­è¿½åŠ  `getters` é…ç½®
    
    ```
    â€¦
    const getters = {
    	bigSum(state) {
    		return state.sum * 10
    	}
    }
    
    // åˆ›å»ºå¹¶æš´éœ² store
    export default new Vue.Store({
    	â€¦
    	getters
    	â€¦
    })
    
    ```
    
2.  ç»„ä»¶ä¸­è¯»å–æ•°æ®ï¼š`$store.getter.bigSum`
    

![](https://i-blog.csdnimg.cn/blog_migrate/0126fd9ed10ca33c3e906540a86b586e.png)

> **æ³¨æ„**ï¼šgetters ä¸éœ€è¦ä½¿ç”¨æ·»åŠ  `$` å‰ç¼€

æ˜¾ç¤ºæ•ˆæœå¦‚ä¸‹ï¼š

![](https://i-blog.csdnimg.cn/blog_migrate/dfe322e549ddee7d4867aa76f38565bd.gif)

### 14.8 mapState å’Œ mapGetters

1.  `mapState` æ–¹æ³•ï¼šç”¨äºå¸®åŠ©æˆ‘ä»¬æ˜ å°„ `state` ä¸­çš„æ•°æ®ä¸ºè®¡ç®—å±æ€§
    
    ```
    computed:{
    	// 1. å¯¹è±¡å†™æ³•ï¼Œå€ŸåŠ© mapState ç”Ÿæˆè®¡ç®—å±æ€§ nameã€ageã€gender 
    	...mapState({name:'name', age:'age', gender:'gender'})
    	// 2. æ•°ç»„å†™æ³•ï¼Œå€ŸåŠ© mapState ç”Ÿæˆè®¡ç®—å±æ€§ nameã€ageã€gender 
    	...mapState(['name', 'gender', 'age'])
    }
    
    ```
    
2.  `mapGetters` æ–¹æ³•ï¼šç”¨äºå¸®åŠ©æˆ‘ä»¬æ˜ å°„ `getters` ä¸­çš„æ•°æ®ä¸ºè®¡ç®—å±æ€§
    
    ```
    computed:{
    	    // 1. å€ŸåŠ© mapGetters ç”Ÿæˆè®¡ç®—å±æ€§ bigSumï¼ˆå¯¹è±¡å†™æ³•ï¼‰
        ...mapGetters({bigSum:'bigSum'}),
        
        // 2. å€ŸåŠ© mapGetters ç”Ÿæˆè®¡ç®—å±æ€§ bigSum ï¼ˆæ•°ç»„å†™æ³•ï¼‰
        ...mapGetters(['bigSum']),
    }
    
    ```
    

ğŸ¤”**ä¸ºä»€ä¹ˆæˆ‘ä»¬è¦ç”¨åˆ° `mapState` ã€`mapGetters` ç­‰è¿™ç±»æ˜ å°„ï¼Ÿ**

å½“ç„¶æ˜¯ä¸ºäº†ç®€åŒ–ä¹¦å†™ï¼Œè®©ä»£ç æ˜¾å¾—æ›´åŠ ç®€æ´ï¼Œä¸¾ä¾‹å¦‚ä¸‹ï¼š

ç°åœ¨åŠ å…¥æˆ‘ä»¬åœ¨ state ä¸­æ·»åŠ äº† nameã€ageã€gender ä¸‰ä¸ªå±æ€§ï¼Œæˆ‘ä»¬è¦åˆ°ç»„ä»¶ä¸­è¿›è¡Œè®¿é—®ï¼Œéœ€è¦å†™æˆå¦‚ä¸‹å½¢å¼ï¼š

```
<h1>å§“åï¼š{{this.$store.state.name}}</h1>
<h1>æ€§åˆ«ï¼š{{this.$store.state.age}}</h1>
<h1>å¹´é¾„ï¼š{{this.$store.state.gender}}</h1>

```

å‰é¢çš„ `this.$store.state` è¿™ä¸€é•¿ä¸²å‰ç¼€æ¯æ¬¡è®¿é—®éƒ½éœ€è¦å†™ä¸€æ¬¡ï¼Œæ˜¯ä¸æ˜¯æ˜¾å¾—ååˆ†çš„ç´¯èµ˜ï¼Œè¿™æ—¶å€™å°±éœ€è¦ç”¨åˆ° `mapState` æ¥ç®€åŒ–ä¹¦å†™ï¼Œå°† `this.$store.state.name` æ”¹å†™ä¸º `name`ï¼Œ`mapGetters` ä¹Ÿæ˜¯åŒæ ·çš„é“ç†

å…¶å®ä»–ä»¬åº•å±‚çš„åŸç†æ˜¯å€ŸåŠ©è®¡ç®—å±æ€§æ¥è¿›è¡Œæ”¹å†™ï¼š

```
name() {
  return this.$store.state.name;
},
age() {
  return this.$store.state.age;
},
gender() {
  return this.$store.state.gender;
},

```

ç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š

```
// ä½¿ç”¨å‰å…ˆä» vuex ä¸­å¼•å…¥ mapStateã€mapGetters
// import {mapState, mapGetters} from 'vuex'
  computed: {
    // 1. ä¸å€ŸåŠ© mapState æˆ– mapGetter
/*     name() {
      return this.$store.state.name;
    },
    age() {
      return this.$store.state.age;
    },
    gender() {
      return this.$store.state.gender;
    }, */
    // 2. mapState çš„å¯¹è±¡å†™æ³•
    // ...mapState({name:'name', age:'age', gender:'gender'})
    // 3. mapState çš„æ•°ç»„å†™æ³•(å¿…é¡»å¾—æ˜¯æ˜ å°„åä¸stateä¸­çš„å¯¹åº”å±æ€§ååŒåæƒ…å†µä¸‹æ‰èƒ½ä½¿ç”¨çš„ç®€å†™))
    ...mapState(['name', 'gender', 'age']),
    // 1. å€ŸåŠ© mapGetters ç”Ÿæˆè®¡ç®—å±æ€§ bigSumï¼ˆå¯¹è±¡å†™æ³•ï¼‰
    // ...mapGetters({bigSum:'bigSum'}),

    // 2. å€ŸåŠ© mapGetters ç”Ÿæˆè®¡ç®—å±æ€§ bigSum ï¼ˆæ•°ç»„å†™æ³•ï¼‰
    ...mapGetters(['bigSum']),

  },

```

> è¿™é‡Œè¯´æ˜ä¸€ä¸‹ä¸ºä»€ä¹ˆè¦ä½¿ç”¨æ‰©å±•è¿ç®—ç¬¦ `...`
> 
> æˆ‘ä»¬ä½¿ç”¨ `mapState`ï¼ˆæˆ– `mapGetters`ï¼‰ç”Ÿæˆçš„æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼š
> 
> ![](https://i-blog.csdnimg.cn/blog_migrate/d7d98a51ef4a6e8e7a205a96dfdfb1e9.png)
> 
> ä½¿ç”¨æ‰©å±•è¿ç®—ç¬¦ï¼Œå°±æ˜¯ä¸ºäº†æŠŠå¯¹è±¡ä¸­çš„æ¯ä¸€ä¸ªå…ƒç´ éƒ½æ”¾åˆ° computed ä¸­

### 14.9 mapActions å’Œ mapMutations

1.  `mapMutations` æ–¹æ³•ï¼šç”¨äºå¸®åŠ©æˆ‘ä»¬ç”Ÿæˆä¸ `mutations` å¯¹è¯çš„æ–¹æ³•ï¼Œå³åŒ…å« `$store.commit(xxx)` çš„å‡½æ•°
    
    ```
    methods:{
        // 1. mapMutations çš„å¯¹è±¡å†™æ³• 
        ...mapMutations({INCREMENT:'INCREMENT', DECREMENT:'DECREMENT'}),
    
        // 2. mapMutations çš„æ•°ç»„å†™æ³•
        ...mapMutations(['INCREMENT', 'DECREMENT'])
    }
    
    ```
    
    ğŸ”ºæ³¨æ„ï¼šè¿™ç§å†™æ³•éœ€è¦æˆ‘ä»¬è‡ªå·±åœ¨è°ƒç”¨çš„æ—¶å€™ä¼ é€’å‚æ•°ï¼Œå¦‚ä¸‹ï¼š
    
    ```
    <button @click="INCREMENT(base)">+</button>
    <button @click="DECREMENT(base)">-</button>
    
    ```
    
2.  `mapActions` æ–¹æ³•ï¼šç”¨äºå¸®åŠ©æˆ‘ä»¬ç”Ÿæˆä¸ `actions` å¯¹è¯çš„æ–¹æ³•ï¼Œå³ï¼šåŒ…å« `$store.dispatch(xxx)` çš„æ–¹æ³•
    
    ```
    // 1. mapActions çš„å¯¹è±¡å†™æ³•
    ...mapActions({incrementOdd:'incrementOdd', incrementWait:'incrementWait'}),
    
    // 2. mapActions çš„æ•°ç»„å†™æ³•
    ...mapActions(['incrementOdd', 'incrementWait']),
    
    ```
    
    > å½“ç„¶ï¼Œè¿™ç§å†™æ³•ä¹Ÿéœ€è¦è‡ªå·±åœ¨è°ƒç”¨æ—¶ä¼ é€’å‚æ•°
    

æ¼”ç¤ºä»£ç å¦‚ä¸‹ï¼š

```
<template>
  <div>
    <h1>å½“å‰æ±‚å’Œä¸ºï¼š{{$store.state.current}}</h1>
    <h1>æ”¾å¤§åå€åçš„currentçš„å€¼ä¸ºï¼š{{bigSum}}</h1>
    <h1>å§“åï¼š{{name}}</h1>
    <h1>æ€§åˆ«ï¼š{{age}}</h1>
    <h1>å¹´é¾„ï¼š{{gender}}</h1>
    <select v-model.number="base">
      <option value="1">1</option>
      <option value="2">2</option>
      <option value="3">3</option>
      <!-- è¿™é‡Œå¯ä»¥åœ¨ value å‰é¢æ·»åŠ ":"",æˆ–è€…åœ¨ v-model åé¢æ·»åŠ ä¿®é¥°ç¬¦numberï¼Œå¼ºåˆ¶è½¬åŒ–ä¸ºæ•°å­—ï¼Œå¦åˆ™ 1ã€2ã€3 å°†ä¼šè¢«å½“åšå­—ç¬¦ä¸²çœ‹å¾… -->
    </select>
    <button @click="INCREMENT(base)">+</button>
    <button @click="DECREMENT(base)">-</button>
    <button @click="incrementOdd(base)">å½“å‰æ±‚å’Œä¸ºå¥‡æ•°å†åŠ </button>
    <button @click="incrementWait(base)">ç­‰ä¸€ç­‰å†åŠ </button>
  </div>
</template>

<script>
import {mapState, mapGetters, mapActions, mapMutations} from 'vuex'

export default {
  name: "Count",
  data() {
    return {
      base: 1, // ç”¨æˆ·é€‰æ‹©çš„å¢åŠ å’Œåˆ é™¤çš„åŸºæ•°
    };
  },
  methods: {
    // increment() {
    //   this.$store.commit("INCREMENT", this.base);
    //   console.log(this.$store);
    // },
    // decrement() {
    //   this.$store.commit("DECREMENT", this.base);
    // },
    // incrementOdd() {
    //   this.$store.dispatch("incrementOdd", this.base);
    // },
    // incrementWait() {
    //   this.$store.dispatch("incrementWait", this.base);
    // }
    // 1. mapMutations çš„å¯¹è±¡å†™æ³• 
    // ...mapMutations({INCREMENT:'INCREMENT', DECREMENT:'DECREMENT'}),

    // 2. mapMutations çš„æ•°ç»„å†™æ³•
    ...mapMutations(['INCREMENT', 'DECREMENT']),

    // 1. mapActions çš„å¯¹è±¡å†™æ³•
    // ...mapActions({incrementOdd:'incrementOdd', incrementWait:'incrementWait'}),

    // 2. mapActions çš„æ•°ç»„å†™æ³•
    ...mapActions(['incrementOdd', 'incrementWait']),
  },
  computed: {
    // 1. ä¸å€ŸåŠ© mapState æˆ– mapGetter
/*     name() {
      return this.$store.state.name;
    },
    age() {
      return this.$store.state.age;
    },
    gender() {
      return this.$store.state.gender;
    }, */
    // 2. mapState çš„å¯¹è±¡å†™æ³•
    // ...mapState({name:'name', age:'age', gender:'gender'})
    // 3. mapState çš„æ•°ç»„å†™æ³•(å¿…é¡»å¾—æ˜¯æ˜ å°„åä¸stateä¸­çš„å¯¹åº”å±æ€§ååŒåæƒ…å†µä¸‹æ‰èƒ½ä½¿ç”¨çš„ç®€å†™))
    ...mapState(['name', 'gender', 'age']),
    // 1. å€ŸåŠ© mapGetters ç”Ÿæˆè®¡ç®—å±æ€§ bigSumï¼ˆå¯¹è±¡å†™æ³•ï¼‰
    // ...mapGetters({bigSum:'bigSum'}),

    // 2. å€ŸåŠ© mapGetters ç”Ÿæˆè®¡ç®—å±æ€§ bigSum ï¼ˆæ•°ç»„å†™æ³•ï¼‰
    ...mapGetters(['bigSum']),

  },
  mounted() {
    const x = mapState({xingming:'name', xinbie:'gender', nianling:'age'});
    console.log(x); // æµ‹è¯•ç”¨
  }
};
</script>

<style>
</style>

```

### 14.10 å¤šç»„ä»¶å…±äº«æ•°æ®

### 14.11 vuex çš„æ¨¡å—åŒ–ç¼–ç 

15 è·¯ç”±
-----

### 15.1 è·¯ç”±çš„ç®€ä»‹

![](https://i-blog.csdnimg.cn/blog_migrate/d47161e7ac4b390664357e2bfdb2ab19.png)

1.  è·¯ç”±ï¼ˆrouteï¼‰å°±æ˜¯ä¸€ç»„ **key-value** çš„å¯¹åº”å…³ç³»
2.  å¤šä¸ªè·¯ç”±ï¼Œéœ€è¦ç»è¿‡è·¯ç”±å™¨ï¼ˆrouterï¼‰çš„ç®¡ç†

åœ¨ Vue ä¸­ä¹Ÿæœ‰è·¯ç”±ï¼ŒVue ä¸­çš„è·¯ç”±ä¸»è¦æ˜¯é€šè¿‡ vue-rounter è¿™ä¸ªæ’ä»¶åº“æ¥å®ç°ï¼Œå®ƒçš„ä½œç”¨å°±æ˜¯ä¸“é—¨ç”¨æ¥å®ç° SPA åº”ç”¨çš„ã€‚å¦‚ä¸‹ï¼š

![](https://i-blog.csdnimg.cn/blog_migrate/c9d8cc843350ae41873dbaec27ad71da.png)

å¯¹ SPA åº”ç”¨çš„ç†è§£ï¼š

1.  å•é¡µ Web åº”ç”¨ï¼ˆsingle page web applicationï¼ŒSPAï¼‰
2.  æ•´ä¸ªåº”ç”¨**åªæœ‰ä¸€ä¸ªå®Œæ•´çš„é¡µé¢**
3.  ç‚¹å‡»é¡µé¢ä¸­çš„å¯¼èˆªé“¾æ¥**ä¸ä¼šåˆ·æ–°é¡µé¢**ï¼Œåªä¼šåš**é¡µé¢çš„å±€éƒ¨æ›´æ–°**
4.  æ•°æ®éœ€è¦**é€šè¿‡ Ajax è¯·æ±‚è·å–**

### 15.2 è·¯ç”±çš„ç†è§£

**ä»€ä¹ˆæ˜¯è·¯ç”±ï¼Ÿ**

1.  ä¸€ä¸ªè·¯ç”±å°±æ˜¯ä¸€ç»„æ˜ å°„å…³ç³»ï¼ˆkey - valueï¼‰
2.  key ä¸ºè·¯å¾„ï¼Œvalue å¯èƒ½æ˜¯ function æˆ–è€… component

**è·¯ç”±åˆ†ç±»**

1.  åç«¯è·¯ç”±
    *   ç†è§£ï¼švalue æ˜¯ functionï¼Œç”¨äºå¤„ç†å®¢æˆ·ç«¯æäº¤çš„è¯·æ±‚
    *   å·¥ä½œè¿‡ç¨‹ï¼šæœåŠ¡å™¨æ¥æ”¶åˆ°ä¸€ä¸ªè¯·æ±‚æ—¶ï¼Œæ ¹æ®**è¯·æ±‚è·¯å¾„æ‰¾åˆ°åŒ¹é…çš„å‡½æ•°æ¥å¤„ç†è¯·æ±‚ï¼Œè¿”å›å“åº”æ•°æ®**
2.  å‰ç«¯è·¯ç”±
    *   ç†è§£ï¼švalue æ˜¯ componentï¼Œç”¨äºå±•ç¤ºé¡µé¢å†…å®¹
    *   å·¥ä½œè¿‡ç¨‹ï¼šå½“æµè§ˆå™¨çš„**è·¯å¾„å‘ç”Ÿæ”¹å˜æ—¶ï¼Œå¯¹åº”çš„ç»„ä»¶å°±ä¼šæ˜¾ç¤º**

### 15.3 è·¯ç”±çš„åŸºæœ¬ä½¿ç”¨

é¦–å…ˆæˆ‘ä»¬éœ€è¦å®‰è£… `vue-router`

*   **`Vue 2`**ï¼šå®‰è£… **`vue-router 3`**
*   **`Vue 3`**ï¼šå®‰è£… **`vue-router 4`**

æˆ‘ä»¬ç°åœ¨å­¦ä¹ æ‰€ç”¨çš„ `Vue` çš„ç‰ˆæœ¬æ˜¯ 2 ç‰ˆæœ¬ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦ä½¿ç”¨å¦‚ä¸‹å‘½ä»¤å®‰è£… `vue-router 3`

```
npm install vue-router@3

```

ä¹‹åæˆ‘ä»¬éœ€è¦åœ¨ `src/main.js` ä¸­å¼•å…¥å’Œä½¿ç”¨è¯¥æ’ä»¶

```
// å¼•å…¥ vue-router
import VueRouter from 'vue-router'
// åº”ç”¨ vue-router
Vue.use(VueRouter)

```

å†ç„¶åï¼Œåœ¨ `/src/router/index.js` ä¸­åˆ›å»ºæ•´ä¸ªåº”ç”¨çš„è·¯ç”±å™¨

```
// è¯¥æ–‡ä»¶ä¸“é—¨ç”¨äºåˆ›å»ºæ•´ä¸ªè·¯ç”±å™¨
import VueRouter from 'vue-router'

// å¼•å…¥ç»„ä»¶
import About from '../components/About'
import Home from '../components/Home'

// åˆ›å»ºå¹¶æš´éœ²ä¸€ä¸ªè·¯ç”±å™¨
export default new VueRouter({
    routes:[
        {
            path:'/about',
            component:About
        },
        {
            path:'/home',
            component:Home
        }
    ]
})

```

æœ€åï¼Œæˆ‘ä»¬éœ€è¦åœ¨ `src/main.js` ä¸­å¼•å…¥å¹¶æ·»åŠ ä¸Šä¸€æ­¥æš´éœ²å‡ºæ¥çš„è·¯ç”±å™¨

```
// å¼•å…¥è·¯ç”±å™¨
import router from './router'

new Vue({
  render: h => h(App),
  router:router // åœ¨ vm ä¸­æ·»åŠ è·¯ç”±å™¨
}).$mount('#app')

```

è¿™æ—¶å€™ï¼Œæˆ‘ä»¬è¿è¡ŒæœåŠ¡å™¨ï¼Œå°±ä¼šå‘ç°ï¼Œå¯¼èˆª url æœ€åå¤šäº†ä¸€ä¸ª `/#`

![](https://i-blog.csdnimg.cn/blog_migrate/14578a4f2956a224542c1e006f906429.png)

æœ€åæˆ‘ä»¬æ¥å®Œæˆ **App.vue**

```
<template>
  <div id="app">
    <div class="row">
      <div class="col-xs-offset-2 col-xs-8">
        <div class="page-header">
          <h2>Vue Router Demo</h2>
        </div>
      </div>
    </div>
    <div class="row">
      <div class="col-xs-2 col-xs-offset-2">
        <div class="list-group">
          <!-- active-class æ˜¯ router-link ä¸­çš„å±æ€§ï¼Œå½“ç‚¹å‡»æ—¶æ ·å¼è¢«æ¿€æ´» -->
          <router-link class="list-group-item" active-class="active" to="/about">About</router-link>
          <router-link class="list-group-item" active-class="active" to="/home">Home</router-link>
        </div>
      </div>
      <div class="col-xs-6">
        <div class="panel">
          <div class="panel-body">
            <!-- æŒ‡å®šç»„ä»¶çš„å‘ˆç°ä½ç½® -->
            <router-view></router-view>
          </div>
        </div>
      </div>
    </div>
  </div>
</template>

<script>
import Home from "./components/Home";
import About from "./components/About";
export default {
  name: "App",
  components: {
    Home,
    About,
  },
};
</script>

<style></style>

```

> æ³¨æ„ï¼š
> 
> *   ä¸€å®šè¦å¼•å…¥ bootstrap.css æ ·å¼è¡¨
> *   `router-link` æœ€ç»ˆä¼šåœ¨ `vue-router` çš„ä½œç”¨ä¸‹è½¬æ¢ä¸º `a` æ ‡ç­¾

**About ç»„ä»¶**

```
<template>
  <h2>æˆ‘æ˜¯Aboutçš„å†…å®¹</h2>
</template>

<script>
export default {
    name:'About',

}
</script>

<style>

</style>

```

**Home ç»„ä»¶**

```
<template>
  <h2>æˆ‘æ˜¯Homeçš„å†…å®¹</h2>
</template>

<script>
export default {
    name:'Home',

}
</script>

<style>

</style>

```

æœ€ç»ˆæ˜¾ç¤ºæ•ˆæœå¦‚ä¸‹ï¼š

![](https://i-blog.csdnimg.cn/blog_migrate/79e05a090c98bf04cae471408b64d15c.gif)

âš ï¸**æ³¨æ„äº‹é¡¹**

1.  è·¯ç”±ç»„ä»¶é€šå¸¸å­˜æ”¾åœ¨ **`pages`** æ–‡ä»¶å¤¹ï¼Œä¸€èˆ¬ç»„ä»¶é€šå¸¸å­˜æ”¾åœ¨ **`components`** æ–‡ä»¶å¤¹
2.  é€šè¿‡åˆ‡æ¢ï¼Œ"éšè—" äº†è·¯ç”±ç»„ä»¶ï¼Œé»˜è®¤æ˜¯è¢«é”€æ¯çš„ï¼Œéœ€è¦çš„æ—¶å€™å†å»æŒ‚è½½
3.  æ¯ä¸ªç»„ä»¶éƒ½æœ‰è‡ªå·±çš„ **`$store`** å±æ€§ï¼Œé‡Œé¢å­˜å‚¨ç€è‡ªå·±çš„è·¯ç”±ä¿¡æ¯
4.  æ•´ä¸ªåº”ç”¨åªæœ‰ä¸€ä¸ª routerï¼Œå¯ä»¥é€šè¿‡ç»„ä»¶çš„ **`$router`** å±æ€§è·å–åˆ°

### 15.4 åµŒå¥—è·¯ç”±

åµŒå¥—è·¯ç”±åˆç§°ä¸º â€œå¤šçº§è·¯ç”±â€

åµŒå¥—è·¯ç”±ä¸å‰é¢çš„ä¸€çº§è·¯ç”±é…ç½®åŸºæœ¬ç›¸åŒï¼Œä½†ä¹Ÿæœ‰ä¸€äº›éœ€è¦æ³¨æ„çš„ç‚¹ï¼Œå¦‚ä¸‹ï¼š

1.  é…ç½®è·¯ç”±è§„åˆ™ï¼Œä½¿ç”¨ children é…ç½®é¡¹
    
    ```
    routes:[
        {
            path:'/about',
            component:About
        },
        {
            path:'/home',
            component:Home,
            children:[	// é€šè¿‡children é…ç½®å­çº§è·¯ç”±
                {
                    path:'news',    // ä¸€çº§è·¯ç”±åé¢çš„äºŒçº§è·¯ç”±ã€ä¸‰çº§è·¯ç”±ç­‰å‰é¢éƒ½ä¸éœ€è¦æ·»åŠ æ–œæ†'/'
                    component:News,
                },
                {
                    path:'message',
                    component:Message,
                }
            ]
        }
    ]
    
    ```
    
2.  è·³è½¬ï¼ˆè¦å†™å®Œæ•´çš„è·¯å¾„ï¼‰
    
    ```
    <router-link
      to="/home/news"	
      active-class="active"
    >News</router-link>
    
    ```
    

### 15.5 è·¯ç”±ä¼ å‚

1.  ä¼ é€’å‚æ•°
    
    ```
    <!-- è·³è½¬è·¯ç”±å¹¶æºå¸¦queryå‚æ•°ï¼Œto çš„å­—ç¬¦ä¸²å†™æ³• -->
    <router-link :to="`/home/message/detail?id=${m.id}&title=${m.title}`">{{m.title}}</router-link>
    
    <!-- è·³è½¬è·¯ç”±å¹¶æºå¸¦queryå‚æ•°ï¼Œto çš„å¯¹è±¡å†™æ³• -->
    <router-link :to="{
        path:'/home/message/detail', 
        query:{
          id:m.id,
          title:m.title
        }
      }">{{m.title}}</router-link>
    
    ```
    
2.  æ¥æ”¶å‚æ•°
    
    ```
    $route.query.id
    $route.query.title
    
    ```
    

### 15.6 å‘½åè·¯ç”±

å‘½åè·¯ç”±çš„ä½œç”¨ï¼šç®€åŒ–è·¯ç”±çš„è·³è½¬

ä½¿ç”¨æ–¹æ³•ï¼š

1.  ç»™è·¯ç”±å‘½å
    
    ```
    routes:[
        {
            name:'demo',
            path:'/about',
            component:About
        },
        {
            name:'home',
            path:'/home',
            component:Home,
            children:[
                {
                    name:'news',	// ç»™è·¯ç”±å‘½ä»¤	
                    path:'news',
                    component:News,
                },
            ]
        }
    ]
    
    ```
    
2.  ç®€åŒ–è·³è½¬
    
    ```
    <!-- ç®€åŒ–å‰ï¼Œéœ€è¦å†™å®Œæ•´çš„è·¯å¾„ -->
    <router-link to="/home/news">News</router-link>
    
    ```
    
    ```
    <!-- ç®€åŒ–åï¼Œç›´æ¥é€šè¿‡åå­—è·³è½¬ -->
    <router-link to="{name:'news'}">News</router-link>
    
    <!-- ç®€åŒ–å†™æ³•é…åˆä¼ é€’å‚æ•° -->
    <router-link
      to="{
        name:'news',
        query:{
          id:666,
          title:'ä½ å¥½'
        }
      }"
    >News</router-link>
    
    ```
    

### 15.7 è·¯ç”±çš„ params å‚æ•°

1.  é…ç½®è·¯ç”±ï¼Œå£°æ˜æ¥æ”¶ params å‚æ•°
    
    ```
    {
        name:'message',
        path:'message',
        component:Message,
        children:[
            {
                name:'detail',
                path:'detail/:id/:title',      // ä½¿ç”¨å ä½ç¬¦å£°æ˜æ¥æ”¶ params å‚æ•°
                component:Detail
            }
        ]
    },
    
    ```
    
2.  ä¼ é€’å‚æ•°
    
    ```
    <!-- è·³è½¬è·¯ç”±å¹¶æºå¸¦paramså‚æ•°ï¼Œto çš„å­—ç¬¦ä¸²å†™æ³• -->
    <router-link :to="`/home/message/detail/666/ä½ å¥½`">{{m.title}}</router-link>
    
    <!-- è·³è½¬è·¯ç”±å¹¶æºå¸¦paramså‚æ•°ï¼Œto çš„å¯¹è±¡å†™æ³• -->
    <router-link :to="{
        name:'detail',
        params:{
          id:666,
          title:'ä½ å¥½'
        }
      }">{{m.title}}</router-link>
    
    ```
    
3.  æ¥æ”¶å‚æ•°
    
    ```
    $route.params.id
    $route.param.title
    
    ```
    

### 15.8 è·¯ç”±çš„ props é…ç½®

```
// ç¬¬ä¸€ç§å†™æ³•ï¼šprops å€¼ä¸ºå¯¹è±¡ï¼Œè¯¥å¯¹è±¡ä¸­çš„æ‰€æœ‰ key-value ç»„åˆæœ€ç»ˆéƒ½ä¼šé€šè¿‡ props ä¼ ç»™ Detai ç»„ä»¶
// ä½†æ˜¯è¿™ç§å†™æ³•çš„æ‰€æœ‰å‚æ•°çš„å€¼éƒ½æ˜¯å†™æ­»çš„
props:{a:900},

// ç¬¬äºŒç§å†™æ³•ï¼Œprops å€¼ä¸ºå¸ƒå°”å€¼ï¼Œå¸ƒå°”å€¼ä¸º trueï¼Œåˆ™æŠŠè·¯ç”±æ”¶åˆ°çš„æ‰€æœ‰ params å‚æ•°é€šè¿‡ props ä¼ ç»™ Detail ç»„ä»¶
props:true,

// ç¬¬ä¸‰ç§å†™æ³•ï¼Œprops å€¼ä¸ºå‡½æ•°ï¼Œè¯¥å‡½æ•°è¿”å›çš„å¯¹è±¡ä¸­æ¯ä¸€ç»„ key-value éƒ½ä¼šé€šè¿‡ props ä¼ ç»™ Detail ç»„ä»¶
props($route) {
    return {
        id:$route.query.id,
        title:$route.query.title,
    }
}

```

*   å†™æ³•ä¸€åªèƒ½é…ç½®å¹¶ä¼ é€’å›ºå®šæ•°æ®
*   å†™æ³•äºŒåªèƒ½æ¥æ”¶è·¯ç”±ä¼ é€’è¿‡æ¥çš„ params å‚æ•°
*   å†™æ³•ä¸‰çµæ´»æ€§æœ€å¤§ï¼Œå¯ä»¥é€šè¿‡ `$route` æ¥ä¼ é€’ `query` æˆ–è€… `params` å‚æ•°

**æ¥æ”¶å‚æ•°**

åªéœ€è¦åœ¨ Detail ç»„ä»¶ä¸­ï¼Œä½¿ç”¨ props é…ç½®é¡¹æ¥æ”¶å³å¯

### 15.9 router-link çš„ replace å±æ€§

**ä½œç”¨**ï¼šæ§åˆ¶è·¯ç”±è·³è½¬æ—¶æ“ä½œæµè§ˆå™¨å†å²è®°å½•çš„æ¨¡å¼

æµè§ˆå™¨çš„å†å²è®°å½•æœ‰ä¸¤ç§å†™å…¥æ–¹å¼ï¼šåˆ†åˆ«æ˜¯ `push` å’Œ `replace`

*   `push` æ˜¯è¿½åŠ å†å²è®°å½•
*   `replace` æ˜¯æ›¿æ¢å½“å‰å†å²è®°å½•
*   è·¯ç”±è·³è½¬æ—¶é»˜è®¤æ˜¯ `push`

**å¼€å¯ `replace` æ¨¡å¼**

```
<router-link replace â€¦>News</router-link>

```

### 15.10 ç¼–ç¨‹å¼è·¯ç”±å¯¼èˆª

** ä½œç”¨ï¼š** ä¸å€ŸåŠ© `<router-link>` å®ç°è·¯ç”±è·³è½¬ï¼Œè®©è·¯ç”±è·³è½¬æ›´åŠ çµæ´»

å…·ä½“ç¼–ç ï¼š

```
methods: {
	// â€¦
  showPush() {
    this.$router.push({
      name: "detail",
      params: {
        id: "xxx",
        title: "xxx",
      },
    });
  },
  showReplace() {
    this.$router.replace({
      name: "detail",
      params: {
        id: "xxx",
        title: "xxx",
      },
    });
  },
  // â€¦
},

```

é€šè¿‡åœ¨ DOM ç»“æ„ä¸­æ·»åŠ äº‹ä»¶è§¦å‘ï¼š

```
<button @click="showPush"></button>
<button @click="showReplace"></button>

```

> å¦‚æœæƒ³è¦ä¼ é€’å‚æ•°ï¼Œé‚£ä¹ˆå¯ä»¥ç›´æ¥ `showPush(params,â€¦)`

`$router` è·¯ç”±å™¨ä¸­è¿˜æœ‰å¦‚ä¸‹çš„ API å¯ä¾›æˆ‘ä»¬å‰è¿›å’Œå›é€€æµè§ˆå™¨å™¨å†å²è®°å½•

```
this.$router.forward()	// å‰è¿›
this.$router.back()		// åé€€
this.$router.go(num)	// å‰æ™¯æˆ–åé€€

```

### 15.11 ç¼“å­˜è·¯ç”±ç»„ä»¶

**ä½œç”¨**ï¼š**è®©ä¸å±•ç¤ºçš„è·¯ç”±ç»„ä»¶ä¿æŒæŒ‚è½½ï¼Œä¸è¢«é”€æ¯**

**å…·ä½“ç¼–ç **

```
<keep-alive include="News">
  <router-view></router-view> 
</keep-alive>

```

ğŸ”ºæ³¨æ„ç‚¹ï¼š

1.  `keep-alive` ä¸­ä¸æ·»åŠ  `include`ï¼Œé‚£ä¹ˆå°†ä½¿å¾—æŒ‚è½½åˆ° `router-view` ä¸­è·¯ç”±æ¯æ¬¡åˆ‡æ¢æ—¶éƒ½ä¸ä¼šè¢«é”€æ¯
2.  `keep-alive` çš„ `include` çš„å‚æ•°å€¼**ä¸ºç»„ä»¶åï¼Œè€Œä¸æ˜¯è·¯ç”±å**
3.  å¦‚æœæƒ³è¦ç¼“å­˜å¤šä¸ªç»„ä»¶ï¼Œé‚£ä¹ˆ `include` é‡Œé¢çš„è·¯ç”±éœ€è¦å†™æˆæ•°ç»„å½¢å¼ï¼Œä¾‹å¦‚ `:include="['News', 'Message']"`

### 15.12 ä¸¤ä¸ªæ–°çš„ç”Ÿå‘½å‘¨æœŸé’©å­

**ä½œç”¨**ï¼šè·¯ç”±ç»„ä»¶æ‰€ç‹¬æœ‰çš„ä¸¤ä¸ªé’©å­å‡½æ•°ï¼Œ**ç”¨äºæ•è·è·¯ç”±ç»„ä»¶çš„æ¿€æ´»çŠ¶æ€**

**é’©å­å‡½æ•°**

1.  `activated`ï¼šè·¯ç”±ç»„ä»¶è¢«æ¿€æ´»æ—¶è§¦å‘
2.  `deactivated`ï¼šè·¯ç”±ç»„ä»¶å¤±æ´»æ—¶è§¦å‘

### 15.13 è·¯ç”±å®ˆå«

è·¯ç”±å®ˆå«çš„ä½œç”¨ï¼š**ä¿å«è·¯ç”±çš„å®‰å…¨ (æ ¹æ®æƒé™åˆ¤æ–­å†³å®šæ˜¯å¦èƒ½æ¡çŠ¶åˆ°å¯¹åº”çš„è·¯ç”±)**

åˆ†ç±»ï¼š

1.  å…¨å±€å®ˆå«
2.  ç‹¬äº«å®ˆå«
3.  ç»„ä»¶å†…å®ˆå«

#### 15.13.1 å…¨å±€å®ˆå«

**é…ç½®æ–‡ä»¶ï¼š`src/router/index.js`**

ä¸€èˆ¬æˆ‘ä»¬éœ€è¦åœ¨ router ä¸­è‡ªå®šä¹‰ä¸€ä¸ªæ•°æ®æ¥è¾…åŠ©å…¨å±€å®ˆå«ï¼Œrouter ä¸­æ¯ä¸ªè·¯ç”±ä¸­çš„è‡ªå®šä¹‰æ•°æ®å­˜æ”¾åœ¨ `meta` ä¸­ï¼Œå¦‚ä¸‹ï¼š

```
{
    name:'demo',
    path:'/about',
    component:About
    meta:{
    	isAuth:false,	// ç”¨äºè¡¨ç¤ºè¯¥è·¯ç”±æ˜¯å¦éœ€è¦è¿›è¡Œæƒé™åˆ¤æ–­
    }
},

```

æ¥ä¸‹æ¥è¦ä½¿ç”¨ router ä¸­çš„ä¸¤ä¸ªå‡½æ•°è¿›è¡Œå…¨å±€å®ˆå«é…ç½®

*   `router.beforeEach((to, from, next) => {â€¦})`ï¼šå…¨å±€å‰ç½®å®ˆå«é…ç½®
    *   `to`ï¼šç›®æ ‡è·¯ç”±
    *   `from`ï¼šæºè·¯ç”±
    *   `next`ï¼šæ˜¯ä¸€ä¸ªå›è°ƒå‡½æ•°ï¼Œ**å¯¹åç»­çš„æ‰§è¡Œæ“ä½œèµ·ç€æ‹¦æˆªæˆ–æ”¾è¡Œçš„ä½œç”¨**
*   `router.afterEach((to, from) => {â€¦})`ï¼šå…¨å±€åç½®å®ˆå«é…ç½®
    *   `to`ï¼šç›®æ ‡è·¯ç”±
    *   `from`ï¼šæºè·¯ç”±

**é€‚ç”¨åœºæ™¯**

*   å‰ç½®å®ˆå«é€‚ç”¨äºè·¯ç”±æ”¹å˜å‰çš„æ“ä½œï¼Œå¯ä»¥æ ¹æ®æƒé™åˆ¤æ–­æ˜¯å¦å±•ç¤ºå¯¹åº”è·¯ç”±çš„ä¿¡æ¯
*   åç½®å®ˆå«é€‚ç”¨äºè·¯ç”±æ”¹å˜åçš„æ“ä½œï¼Œå¯ä»¥æ ¹æ®æ˜¯å¦è¿›å…¥å¯¹åº”è·¯ç”±æ¥æ‰§è¡Œç›¸åº”çš„æ“ä½œ

**ç¤ºä¾‹**

```
// å…¨å±€å‰ç½®è·¯ç”±å®ˆå« â€”â€” åˆå§‹åŒ–çš„æ—¶å€™è¢«è°ƒç”¨ä»¥åŠæ¯æ¬¡è·¯ç”±åˆ‡æ¢çš„æ—¶å€™éƒ½ä¼šè°ƒç”¨ä¸€æ¬¡ 
router.beforeEach((to, from, next) => {
    console.log('å‰ç½®å®ˆå«', to, from)

    if(to.meta.isAuth) {    // åˆ¤æ–­æ˜¯å¦éœ€è¦æˆæƒ
        if(localStorage.getItem('school') === 'atguigu') {
            next()
        } else {
            alert('å­¦æ ¡åä¸å¯¹ï¼Œæ— æƒæŸ¥çœ‹')
        }
    } else {
        next()  // ä¸éœ€è¦åˆ¤æ–­æƒé™çš„è·¯ç”±ç›´æ¥æ”¾è¡Œ
    }
})

// å…¨å±€åç½®è·¯ç”±å®ˆå«
router.afterEach((to, from) => {    // è¯¥é…ç½®æ˜¯ä¸ºäº†æ¯æ¬¡è·¯ç”±è·³è½¬çš„æ—¶å€™è¿›è¡Œæ ‡ç­¾åçš„æ›´æ–°
    console.log('åç½®è·¯ç”±å®ˆå«', to, from);
    if(to.meta.title) {
        document.title = to.meta.title  // å¦‚æœ meta ä¸­é…ç½®äº†è·¯ç”±çš„ titleï¼Œé‚£ä¹ˆå°±ä¿®æ”¹
    } else {
        document.title = 'vue-test'
    }
})

```

å½“ç„¶ï¼Œä¹‹å‰æˆ‘ä»¬éƒ½æ˜¯ç›´æ¥å°† router æš´éœ²å‡ºæ¥ï¼Œè¿™é‡Œä¸ºäº†è¿›è¡Œå…¨å±€å®ˆå«é…ç½®ï¼Œéœ€è¦å…ˆç”¨å˜é‡æ¥æ”¶ï¼Œé…ç½®å®Œä¹‹åå†æš´éœ²ï¼š

```
// å®šä¹‰å¥½ router
const router = new VueRouter({â€¦})
// è¿›è¡Œå…¨å±€å®ˆå«é…ç½®
router.beforeEach((to, from, next) => {â€¦})
router.afterEach((to, from) => {â€¦})
// å°† router æš´éœ²å‡ºæ¥
export default router

```

#### 15.13.2 ç‹¬äº«è·¯ç”±å®ˆå«

ç‹¬äº«è·¯ç”±å®ˆå«ï¼šåªå¯¹å•ä¸ªè·¯ç”±è¿›è¡Œçš„å®ˆå«

ç‹¬äº«è·¯ç”±å®ˆå«çš„é…ç½®å‡½æ•°ä¸º`beforeEnter((to, from, next) => {â€¦})` ï¼Œæ˜¯åœ¨ route ä¸­è¿›è¡Œé…ç½®

**ç¤ºä¾‹**

```
beforeEnter(to, from, next) {
    console.log('ç‹¬äº«è·¯ç”±å®ˆå«', to, from)

    if(to.meta.isAuth) {    // åˆ¤æ–­æ˜¯å¦éœ€è¦æˆæƒ
        if(localStorage.getItem('school') === 'atguigu') {
            next()
        } else {
            alert('å­¦æ ¡åä¸å¯¹ï¼Œæ— æƒæŸ¥çœ‹')
        }
    } else {
        next()  // ä¸éœ€è¦åˆ¤æ–­æƒé™çš„è·¯ç”±ç›´æ¥æ”¾è¡Œ
    }
}

```

#### 15.13.3 ç»„ä»¶å†…è·¯ç”±å®ˆå«

ç»„ä»¶å†…è·¯ç”±å®ˆå«ï¼šä¸»è¦é’ˆå¯¹ç»„ä»¶è€Œè¨€ï¼Œåœ¨ç»„ä»¶ä¹‹é—´åˆ‡æ¢æ—¶è§¦å‘çš„å®ˆå«

```
// è¿›å…¥å®ˆå«ï¼Œé€šè¿‡è·¯ç”±è§„åˆ™ï¼Œè¿›å…¥è¯¥ç»„ä»¶æ—¶è¢«è°ƒç”¨
beforeRouteEnter(to, from, next) {},
// ç¦»å¼€å®ˆå«ï¼Œé€šè¿‡è·¯ç”±è§„åˆ™ï¼Œç¦»å¼€è¯¥ç»„ä»·æ—¶è¢«è°ƒç”¨
beforeRouteLeave(to, from, next) {},

```

è¿™é‡Œæˆ‘ä»¬éœ€è¦åŒºåˆ†ç»„ä»¶å†…è·¯ç”±å®ˆå«å’Œå…¨å±€è·¯ç”±å®ˆå«ï¼Œä¸¤è€…çœ‹ä¼¼å¾ˆåƒå´æˆªç„¶ä¸åŒï¼š

*   å…¨å±€è·¯ç”±å®ˆå«æ˜¯é’ˆå¯¹è·¯ç”±è€Œè¨€çš„ï¼Œè€Œç»„ä»¶å†…è·¯ç”±å®ˆå«æ˜¯é’ˆå¯¹ç»„ä»¶è€Œè¨€çš„
*   å½“æˆ‘ä»¬è¿›å…¥äº†æŸä¸ªè·¯ç”±åï¼Œè‡ªåŠ¨è°ƒç”¨å…¨å±€åç½®å’Œå‰ç½®å®ˆå«ï¼Œè€Œè·¯ç”±æ‰€æŒ‡å®šçš„ç»„ä»¶æ­¤æ—¶ä»…ä»…åªè§¦å‘äº†è¿›å…¥å®ˆå«ï¼Œåªæœ‰å½“æˆ‘ä»¬ç¦»å¼€è¯¥ç»„ä»¶åæ‰ä¼šè§¦å‘ç»„ä»¶å†…å®ˆå«çš„ç¦»å¼€å®ˆå«

### 15.14 history å’Œ hash æ¨¡å¼

è·¯ç”±å™¨å­˜åœ¨ä¸¤ç§å·¥ä½œæ¨¡å¼ï¼š

1.  history æ¨¡å¼
2.  hash æ¨¡å¼

å¯¹äºä¸€ä¸ª url æ¥è¯´ï¼Œhash æŒ‡çš„å°±æ˜¯ `#` åé¢çš„å†…å®¹ï¼Œ**hash å€¼ä¸ä¼šåŒ…å«åœ¨ HTTP è¯·æ±‚ä¸­ï¼Œå³ hash å€¼ä¸ä¼šå¸¦ç»™æœåŠ¡å™¨**

**ç‰¹ç‚¹**

*   hash æ¨¡å¼ï¼ˆé»˜è®¤ï¼‰
    1.  åœ°å€ä¸­æ°¸è¿œå¸¦è¿™ `#` å·ï¼Œä¸ç¾è§‚
    2.  è‹¥ä»¥åå°†åœ°å€é€šè¿‡ç¬¬ä¸‰æ–¹æ‰‹æœº app åˆ†äº«ï¼Œè‹¥ app æ£€éªŒä¸¥æ ¼ï¼Œåˆ™åœ°å€ä¼šè¢«æ ‡è®°ä¸ºä¸åˆæ³•
*   history æ¨¡å¼
    1.  åœ°å€å¹²å‡€ã€ç¾è§‚
    2.  å…¼å®¹æ€§å’Œ hash æ¨¡å¼ç›¸æ¯”ç•¥å·®
    3.  åº”ç”¨éƒ¨ç½²ä¸Šçº¿æ—¶éœ€è¦åç«¯äººå‘˜æ”¯æŒï¼Œè§£å†³åˆ·æ–°é¡µé¢æœåŠ¡å™¨ 404 çš„é—®é¢˜

ğŸŒ¿**ä¿®æ”¹æ¨¡å¼çš„æ–¹æ³•**

åœ¨åˆ›å»ºè·¯ç”±å™¨ router å¯¹è±¡å®ä¾‹ä¸­æ·»åŠ  `mode:history` æˆ–è€… `mode:hash` æ¥å°†è·¯ç”±æ¨¡å¼ä¿®æ”¹ä¸º `history` æˆ– `hash` æ¨¡å¼

```
const router = new VueRouter({
    mode:'history',
    routes: [â€¦]
})

```

**æ¼”ç¤º**

ä¸ºäº†æ¼”ç¤º hash æ¨¡å¼ä¸‹ï¼Œhash å€¼ä¸ä¼šå¸¦ç»™æœåŠ¡å™¨ï¼Œæˆ‘ä»¬éœ€è¦å°†ä¹‹å‰åˆ¶ä½œçš„ SPA è¿›è¡Œæ‰“åŒ…ï¼Œæ‰“åŒ…å‘½ä»¤å¦‚ä¸‹ï¼š

```
npm run build

```

ç¨äº‹ç­‰å¾…ï¼Œå¾…æ‰“åŒ…å®Œæ¯•åï¼Œç”Ÿæˆçš„æ–‡ä»¶åœ¨ `/dist` æ–‡ä»¶å¤¹ä¸­ï¼Œç”Ÿæˆçš„ç›®å½•ç»“æ„å¦‚ä¸‹ï¼š

```
dist                                 
â”œâ”€ css                               
â”‚  â””â”€ bootstrap.css                  
â”œâ”€ js                                
â”‚  â”œâ”€ app.adc4f030.js                
â”‚  â”œâ”€ app.adc4f030.js.map            
â”‚  â”œâ”€ chunk-vendors.7c6bdce6.js      
â”‚  â””â”€ chunk-vendors.7c6bdce6.js.map  
â”œâ”€ favicon.ico                       
â””â”€ index.html                        

```

æˆ‘ä»¬å¦‚æœç›´æ¥æ‰“å¼€ index.html ï¼Œè‚¯å®šæ˜¯æµè§ˆå™¨ä¸äº†çš„ï¼Œéœ€è¦å°†æ‰“åŒ…çš„æ–‡ä»¶æ”¾åˆ°æœåŠ¡å™¨ä¸­æœåŠ¡æ‰èƒ½è¿è¡Œï¼Œæ‰€ä»¥æˆ‘ä»¬ç°åœ¨æ¥ä½¿ç”¨ node.js å’Œ express æ¥ç¼–å†™ä¸€ä¸ªæœåŠ¡å™¨

1.  æ–°å»ºä¸€ä¸ªå·¥ä½œç›®å½•ï¼Œåœ¨å·¥ä½œç›®å½•ä¸­åˆå§‹åŒ– npm é¡¹ç›®
    
    ```
    npm init
    
    ```
    
    æ¥ç€å†™å¥½åŒ…ååä¸€è·¯å›è½¦å³å¯
    
    ![](https://i-blog.csdnimg.cn/blog_migrate/e94fc8e2ee0aa24573a3f2e3efa346e4.png)
2.  æ¥ç€å®‰è£… express æ¡†æ¶
    
    ```
    npm i express
    
    ```
    
3.  ç¼–å†™ä¸€ä¸ªæœåŠ¡å™¨ä¸»æ–‡ä»¶ `/server.js`
    
    ```
    const express = require('express')  // ä½¿ç”¨ common.js çš„è¯­æ³•æ¥å¼•å…¥ express æ¡†æ¶
    // åˆ›å»º app æœåŠ¡å®ä¾‹å¯¹è±¡
    const app = express()
    // æŒ‡å®šé™æ€èµ„æº
    app.use(express.static(__dirname + '/static'))
    // æ­å»ºè·¯ç”±
    app.get('demo', (req, res) => {
        res.send({
            name:'tom',
            age:18,
        })
    })
    
    app.listen(5005, (err) => {
        if(!err) {
            console.log('æœåŠ¡å™¨å¯åŠ¨æˆåŠŸ');
        }
    })
    
    ```
    
4.  æ–°å»ºä¸€ä¸ª static æ–‡ä»¶å¤¹ï¼Œç”¨äºå­˜æ”¾é™æ€èµ„æºï¼Œå°†ç”Ÿæˆå¥½çš„ dist æ–‡ä»¶å¤¹ä¸­çš„å†…å®¹æ”¾ç½®åˆ° static ä¸­
    
5.  å¯åŠ¨æœåŠ¡å™¨ï¼š`node server`
    
6.  åœ¨æµè§ˆå™¨ä¸­è¾“å…¥ `localhost:5005` æ‰“å¼€éƒ¨ç½²å¥½çš„é¡µé¢
    

æ¥ä¸‹æ¥æˆ‘ä»¬å°±æ¥æµ‹è¯•ä¸€ä¸‹ï¼š

*   å¦‚æœæˆ‘ä»¬ä½¿ç”¨çš„æ˜¯ hash æ¨¡å¼ï¼Œæ— è®ºæˆ‘ä»¬å¦‚ä½•åˆ·æ–°é¡µé¢ï¼Œé¡µé¢éƒ½ä¸ä¼šå‘æœåŠ¡å™¨å‘é€è¯·æ±‚ï¼Œæ­¤æ—¶é¡µé¢ä¹Ÿå°±ä¸ä¼šå‡ºç°è¯·æ±‚èµ„æºé”™è¯¯ï¼›
    
*   å¦‚æœæˆ‘ä»¬ä½¿ç”¨çš„æ˜¯ history æ¨¡å¼ï¼Œåªè¦ä¸€åˆ·æ–°é¡µé¢ï¼Œå°±ä¼šäº§ç”Ÿè¯·æ±‚è·å–èµ„æºé”™è¯¯ï¼Œå¦‚ä¸‹ï¼š
    
    ![](https://i-blog.csdnimg.cn/blog_migrate/911478a675f50f5d6d6675c59364f91e.png)

å½“ç„¶ï¼Œå¦‚æœé¢å¯¹ history æ¨¡å¼ï¼Œæˆ‘ä»¬ä¹Ÿæœ‰è‡ªå·±çš„è§£å†³æ–¹æ³•ï¼Œé¦–å…ˆå» [npm åŒ…ç®¡ç†å¹³å°](https://www.npmjs.com/) ä¸‹è½½ connect-history-api-fallbackï¼Œæˆ–è€…ä½¿ç”¨å¦‚ä¸‹å‘½ä»¤å®‰è£…ï¼š

```
npm i connect-history-api-fallback

```

æ¥ç€å¼•å…¥å¹¶ä½¿ç”¨è¿™ä¸ªåŒ…

```
const history = require('connect-history-api-fallback')

// æ³¨é‡Šä½¿ç”¨ history çš„æ—¶æœºï¼Œéœ€è¦åœ¨åˆ›å»º app å®ä¾‹ä¹‹åï¼Œåœ¨æŒ‚è½½é™æ€èµ„æºä¹‹å‰
app.use(history())

```

è¿™ä¸ªæ—¶å€™æˆ‘ä»¬å†åˆ·æ–°é¡µé¢ï¼Œé¡µé¢å°±ä¸ä¼šäº§ç”Ÿé—®é¢˜

![](https://i-blog.csdnimg.cn/blog_migrate/5ce1685c01231953f6414b0c234d3ab0.gif)

### 15.15 é‡å®šå‘

16 Vue UI ç»„ä»¶åº“
-------------

**ç§»åŠ¨ç«¯å¸¸ç”¨çš„ UI ç»„ä»¶åº“**

1.  Vantï¼šhttps://github.com/youzan/vant
    *   [ä¸­æ–‡å®˜ç½‘](https://youzan.github.io/vant-weapp/#/home)
2.  Cube UIï¼šhttps://github.com/didi/cube-ui
    *   [ä¸­æ–‡å®˜ç½‘](https://didi.github.io/cube-ui/#/zh-CN/docs/quick-start)
3.  Mint UIï¼šhttps://mint-ui.github.io

**PC ç«¯å¸¸ç”¨ UI ç»„ä»¶åº“**

1.  Element UIï¼šhttps://element.eleme.cn
2.  IView UIï¼šhttps://www.iviewui.com/

ä¸‹é¢æˆ‘ä»¬ä¼šåŸºäº Element ç»„ä»¶åº“å¿«é€Ÿæˆå‹ï¼Œæˆ‘ä»¬å¼•å…¥ Element ç»„ä»¶åº“æœ‰ä¸¤ç§å½¢å¼ï¼Œåˆ†åˆ«æ˜¯ï¼š

1.  å®Œæ•´å¼•å…¥
2.  æŒ‰éœ€å¼•å…¥

ä¸è¿‡ï¼Œä¸ç®¡æ˜¯å…¨éƒ¨å¼•å…¥ï¼Œè¿˜æ˜¯æŒ‰éœ€å¼•å…¥ï¼Œæˆ‘ä»¬éƒ½éœ€è¦å…ˆå®‰è£… element ç»„ä»¶åº“

```
npm i element-ui

```

### 16.1 Element å®Œæ•´å¼•å…¥

é¦–å…ˆï¼Œæˆ‘ä»¬éœ€è¦åœ¨ `src/main.js` ä¸­å†™å…¥ä»¥ä¸‹å†…å®¹ï¼š

```
// å¼•å…¥elementçš„ç»„ä»¶åº“å’Œæ ·å¼æ–‡ä»¶
import ElementUI from 'element-ui';
import 'element-ui/lib/theme-chalk/index.css';

// ä½¿ç”¨æ’ä»¶
Vue.use(ElementUI);

```

æ¥ç€ï¼Œæˆ‘ä»¬å°±å¯ä»¥ç›´æ¥åˆ°æˆ‘ä»¬è‡ªå·±çš„ç»„ä»¶ä¸­å¼•å…¥ç›¸å…³çš„ç»„ä»¶å³å¯

### 16.2 æŒ‰éœ€å¼•å…¥

æˆ‘ä»¬å…¨éƒ¨å¼•å…¥å…·æœ‰ä¸€ä¸ªå¾ˆå¤§çš„å¼Šç«¯é‚£å°±æ˜¯æˆ‘ä»¬è¦ä½¿ç”¨çš„ç»„ä»¶å’Œæ ·å¼ä»…ä»…åªæ˜¯ä¸€å°éƒ¨åˆ†ï¼Œå…¨éƒ¨å¼•å…¥å¿…ç„¶é€ æˆæµªè´¹äº†å¾ˆå¤šç½‘ç»œèµ„æºï¼Œå¦‚ä¸‹ï¼š

![](https://i-blog.csdnimg.cn/blog_migrate/59bce84c7592001dc61a581e036c8f94.png)

è¿™ä¸ªæ—¶å€™æˆ‘ä»¬è€ƒè™‘ä½¿ç”¨ "æŒ‰éœ€å¼•å…¥" çš„æ–¹å¼æ¥è¿›è¡Œç²¾ç®€

é¦–å…ˆå°±éœ€è¦å°†ä¹‹å‰å¼•å…¥çš„ç»„ä»¶åº“å’Œä½¿ç”¨æ’ä»¶çš„ä¸‰è¡Œä»£ç å…¨éƒ¨åˆ é™¤ï¼Œæ¥ç€ï¼Œå®‰è£… babel-plugin-componentï¼š

```
npm install babel-plugin-component -D

```

ä¿®æ”¹ babel.config.jsï¼ˆæˆªæ­¢åˆ° 2022-12-06 æ—¥æ–‡ä»¶åå³ä¿®æ”¹çš„æ–‡ä»¶å†…å®¹å¦‚ä¸‹ï¼‰

```
module.exports = {
  presets: [
    '@vue/cli-plugin-babel/preset',
    ["@babel/preset-env", { "modules": false }]
  ],
  "plugins": [
    [
      "component",
      {
        "libraryName": "element-ui",
        "styleLibraryName": "theme-chalk"
      }
    ]
  ]
}

```

æ¥ä¸‹æ¥åœ¨ `/src/main.js` ä¸­æŒ‰éœ€å¯¼å…¥å’Œä½¿ç”¨ï¼Œä¾‹å¦‚ï¼Œå¦‚æœæˆ‘åªæƒ³è¦ä½¿ç”¨ button å’Œ Select ç»„ä»¶ï¼Œæˆ‘ä»¬å¯ä»¥è¿™ä¹ˆå†™ï¼š

```
import { Button, Select } from 'element-ui';
Vue.use(Button)
Vue.use(Select)
// æ‰©å±•å†™æ³•å¯ä»¥è‡ªå®šä¹‰ç»„ä»¶åï¼Œå¦‚ä¸‹ï¼š
/* Vue.component(Button.name, Button);
Vue.component(Select.name, Select); */

```

> æ³¨æ„ï¼šå¼•å…¥çš„ç»„ä»¶åå…¨éƒ¨éƒ½æ˜¯ä½¿ç”¨å¤§é©¼å³°å‘½åæ³•

æœ€åï¼Œåªè¦å¼•å…¥ç»„ä»¶å³å¯

17 Vue3 å¼•å…¥
----------

![](https://i-blog.csdnimg.cn/blog_migrate/18e2ed1afaae430545081adc60de08f4.png)

### 17.1 Vue3 ç®€ä»‹

*   2020 å¹´ 9 æœˆ 18 æ—¥ï¼ŒVue.js å‘å¸ƒ 3.0 ç‰ˆæœ¬ï¼Œä»£å·ï¼šOne Pieceï¼ˆæµ·è´¼ç‹ï¼‰
*   è€—æ—¶ 2 å¹´å¤šã€[2600 + æ¬¡æäº¤](https://github.com/vuejs/vue-next/graphs/commit-activity)ã€[30 + ä¸ª RFC](https://github.com/vuejs/rfcs/tree/master/active-rfcs)ã€[600 + æ¬¡ PR](https://github.com/vuejs/vue-next/pulls?q=is%3Apr+is%3Amerged+-author%3Aapp%2Fdependabot-preview+)ã€[99 ä½è´¡çŒ®è€…](https://github.com/vuejs/vue-next/graphs/contributors)
*   github ä¸Šçš„ tags åœ°å€ï¼šhttps://github.com/vuejs/vue-next/releases/tag/v3.0.0

> RFC æŒ‡çš„æ˜¯ â€œRequest For Commentsâ€ï¼Œè¯·æ±‚ä¿®æ”¹æ„è§ç¨¿ï¼Œè€Œ PR æŒ‡çš„æ˜¯ â€œPull Requestâ€ï¼Œæ‹‰å–è¯·æ±‚

### 17.2 Vue3 å¸¦æ¥äº†ä»€ä¹ˆ

#### 1. æ€§èƒ½çš„æå‡

*   æ‰“åŒ…å¤§å°å‡å°‘ 41%
    
*   åˆæ¬¡æ¸²æŸ“å¿« 55%, æ›´æ–°æ¸²æŸ“å¿« 133%
    
*   å†…å­˜å‡å°‘ 54%
    
    â€¦
    

#### 2. æºç çš„å‡çº§

*   ä½¿ç”¨ Proxy ä»£æ›¿ defineProperty å®ç°å“åº”å¼
    
*   é‡å†™è™šæ‹Ÿ DOM çš„å®ç°å’Œ Tree-Shaking
    
    â€¦
    

#### 3. æ‹¥æŠ± TypeScript

*   Vue3 å¯ä»¥æ›´å¥½çš„æ”¯æŒ TypeScript

#### 4. æ–°çš„ç‰¹æ€§

1.  Composition APIï¼ˆç»„åˆ APIï¼‰
    
    *   setup é…ç½®
    *   ref ä¸ reactive
    *   watch ä¸ watchEffect
    *   provide ä¸ inject
    *   â€¦
2.  æ–°çš„å†…ç½®ç»„ä»¶
    
    *   Fragment
    *   Teleport
    *   Suspense
3.  å…¶ä»–æ”¹å˜
    
    *   æ–°çš„ç”Ÿå‘½å‘¨æœŸé’©å­
    *   data é€‰é¡¹åº”å§‹ç»ˆè¢«å£°æ˜ä¸ºä¸€ä¸ªå‡½æ•°
    *   ç§»é™¤ keyCode æ”¯æŒä½œä¸º v-on çš„ä¿®é¥°ç¬¦
    *   â€¦

### 17.3 åˆ›å»º Vue3.0 å·¥ç¨‹

#### 17.3.1 ä½¿ç”¨ vue-cli åˆ›å»º

å®˜æ–¹æ–‡æ¡£ï¼š[ä¼ é€é—¨](https://cli.vuejs.org/zh/guide/creating-a-project.html)

```
# 1. æŸ¥çœ‹ @vue/cli ç‰ˆæœ¬ï¼Œç¡®ä¿ @vue/cli çš„ç‰ˆæœ¬åœ¨ 4.5.0 ä»¥ä¸Š
vue --version
vue -V

# 2. å®‰è£…æˆ–å‡çº§ @vue/cli
npm install -g @vue/cli

# 3. åˆ›å»ºå·¥ç¨‹é¡¹ç›®
vue create vue_test

# 4. å¯åŠ¨
cd vue_test
npm run serve

```

#### 17.3.2 ä½¿ç”¨ vite åˆ›å»º

vite å®˜ç½‘ï¼š[å®˜ç½‘ä¼ é€é—¨](https://vitejs.cn/)

ä»€ä¹ˆæ˜¯ vite? â€”â€” æ–°ä¸€ä»£å‰ç«¯æ„å»ºå·¥å…·

ä¼˜åŠ¿å¦‚ä¸‹ï¼š

*   å¼€å‘ç¯å¢ƒä¸­ï¼Œæ— éœ€æ‰“åŒ…æ“ä½œï¼Œå¯å¿«é€Ÿçš„å†·å¯åŠ¨ã€‚
*   è½»é‡å¿«é€Ÿçš„çƒ­é‡è½½ï¼ˆHMRï¼‰ã€‚
*   çœŸæ­£çš„æŒ‰éœ€ç¼–è¯‘ï¼Œä¸å†ç­‰å¾…æ•´ä¸ªåº”ç”¨ç¼–è¯‘å®Œæˆã€‚

ä¼ ç»Ÿæ„å»ºï¼ˆå·¦ï¼‰ä¸ vite æ„å»ºï¼ˆå³ï¼‰å¯¹æ¯”å›¾å¦‚ä¸‹

![](https://i-blog.csdnimg.cn/blog_migrate/094d812e778bae482fb3986bc8279aea.jpeg) ![](https://i-blog.csdnimg.cn/blog_migrate/cb077879e0b66d53b5f56274152aa7f2.jpeg)

â€‹

åˆ›å»ºæ­¥éª¤å¦‚ä¸‹ï¼š

```
# 1. åˆ›å»ºå·¥ç¨‹
npm init vite-app <project-name>
# 2. è¿›å…¥å·¥ç¨‹ç›®å½•
cd <project-name>
# 3. å®‰è£…ä¾èµ–
npm install
# 3. è¿è¡Œ
npm run dev

```

åˆå§‹åŒ–ç•Œé¢å¦‚ä¸‹ï¼š

![](https://i-blog.csdnimg.cn/blog_migrate/55c43277d2838a1906f1f528b9bf8fc5.png)

### 17.4 åˆ†æå·¥ç¨‹ç»“æ„

Vue3 çš„å·¥ç¨‹ç»“æ„å’Œ Vue2 çš„å·¥ç¨‹ç»“æ„ç±»ä¼¼ï¼ŒåŒºåˆ«ä¸»è¦ä½“ç°åœ¨ main.js å’Œ ç»„ä»¶ ä¸­çš„ä¸¤ä¸ªå°ç‚¹ï¼š

1.  main.js
    
    ```
    // å¼•å…¥çš„ä¸å†æ˜¯ vue çš„æ„é€ å‡½æ•°ï¼Œå¼•å…¥çš„æ˜¯ä¸€ä¸ªåä¸º createApp çš„å·¥ç¨‹å‡½æ•°
    import { createApp } from 'vue'
    import App from './App.vue'
    import './index.css'
    // åˆ›å»ºåº”ç”¨å®ä¾‹å¯¹è±¡(ç±»ä¼¼äºä¹‹å‰vue2ä¸­çš„vm,ä½†appæ¯”vmæ›´"è½»")
    createApp(App).mount('#app')
    
    ```
    
2.  ç»„ä»¶
    
    åŸºæœ¬è¯­æ³•ç±»ä¼¼ï¼Œåšå‡ºçš„æœ€å¤§çš„ä¸€ç‚¹æ”¹å˜å°±æ˜¯ï¼šVue3 ç»„ä»¶ä¸­çš„æ¨¡æ¿ç»“æ„æ²¡æœ‰æ ¹æ ‡ç­¾
    
    ```
    <template>
      <img alt="Vue logo" src="./assets/logo.png" />
      <HelloWorld msg="Hello Vue 3.0 + Vite" />
    </template>
    
    ```
    

### 17.5 Vue3 å¼€å‘è€…å·¥å…·çš„å®‰è£…

**æ–¹å¼ä¸€**ï¼šåœ¨ Chrome å•†åº—ä¸­æ‰¾åˆ° Vue.js.devtools çš„ beta ç‰ˆæœ¬è¿›è¡Œä¸‹è½½å®‰è£…å³å¯

![](https://i-blog.csdnimg.cn/blog_migrate/5513cee45bcda07cb65fd44f61c0db12.png)

**æ–¹å¼äºŒ**ï¼šå‰å¾€[æ‰©å±•è¿·](https://www.extfans.com/)ä¸­è¿›è¡Œä¸‹è½½å®‰è£…

ä¹‹åå°†ä¸‹è½½å¥½çš„ .crx æ‰©å±•æ·»åŠ åˆ°å¼€å‘è€…å·¥å…·ä¸­å³å¯

> å½“ç„¶ï¼Œæˆªæ­¢åˆ° 2022-12-26ï¼ŒVue.js.devtools å·²ç»æ›´æ–°åˆ° 6.4.5 ç‰ˆæœ¬ï¼Œå®Œå…¨å¯ä»¥æ”¯æŒ Vue3

18 Vue3 å¸¸ç”¨ Composition API
--------------------------

å®˜æ–¹æ–‡æ¡£ï¼š[å®˜ç½‘ä¼ é€é—¨](https://cn.vuejs.org/guide/extras/composition-api-faq.html)

### 18.1 åˆè¯† setup

1.  ç†è§£ï¼šVue3.0 ä¸­çš„ä¸€ä¸ªæ–°çš„é…ç½®é¡¹ï¼Œå€¼ä¸ºä¸€ä¸ªå‡½æ•°
    
2.  setup æ˜¯æ‰€æœ‰ **Composition API(ç»„åˆ API)** â€œè¡¨æ¼”çš„èˆå°â€
    
3.  ç»„ä»¶ä¸­æ‰€ç”¨åˆ°çš„ï¼šæ•°æ®ã€æ–¹æ³•ç­‰ç­‰ï¼Œå‡è¦é…ç½®åœ¨ setup ä¸­
    
    ```
    // ä¸è€ƒè™‘å“åº”å¼çš„å†™æ³•
    setup() {
      // data
      let name = 'å¼ ä¸‰'
      let age = 18
    
      // method
      function demo() {
        alert(`æˆ‘å«${name}, æˆ‘ä»Šå¹´${age}å²äº†`)
      }
    }
    
    ```
    
4.  setup å‡½æ•°çš„ä¸¤ç§è¿”å›å€¼
    
    *   **è‹¥è¿”å›ä¸€ä¸ªå¯¹è±¡ï¼Œåˆ™å¯¹è±¡ä¸­çš„å±æ€§ã€æ–¹æ³•ï¼Œåœ¨æ¨¡æ¿ä¸­å‡å¯ä»¥ä½¿ç”¨ï¼ˆé‡ç‚¹ï¼‰**
        
        ```
        // è¿”å›ä¸€ä¸ªå¯¹è±¡
        return {
          name,
          age,
          demo
        }
        
        ```
        
    *   è‹¥è¿”å›ä¸€ä¸ªæ¸²æŸ“å‡½æ•°ï¼Œåˆ™å¯ä»¥è‡ªå®šä¹‰æ¸²æŸ“å†…å®¹ï¼ˆäº†è§£ï¼‰
        
        ```
        // è¿”å›ä¸€ä¸ªå‡½æ•°ï¼ˆæ¸²æŸ“å‡½æ•°ï¼‰ï¼Œè¦äº‹å…ˆå¯¼å…¥ h æ¨¡å—ï¼Œimport {h} from 'vue'
        return () => {
          return h('h1', 'Hello World!')  // è¿”å› h çš„è°ƒç”¨ç»“æœ
        }
        
        ```
        
5.  æ³¨æ„ç‚¹ï¼š
    
    1.  å°½é‡ä¸è¦ä¸ Vue2.x é…ç½®æ··ç”¨
        *   Vue2.x é…ç½®ï¼ˆdataã€methodsã€computedã€â€¦ï¼‰ä¸­å¯ä»¥è®¿é—®åˆ° setup ä¸­çš„å±æ€§ã€æ–¹æ³•
        *   ~ä½†åœ¨ setup ä¸­ä¸èƒ½è®¿é—®åˆ° Vue2.x é…ç½®ï¼ˆdataã€methodsã€computedã€â€¦ï¼‰~
        *   ~å¦‚æœæœ‰é‡åï¼Œsetup ä¼˜å…ˆ~
    2.  setup ä¸èƒ½æ˜¯ä¸€ä¸ª async å‡½æ•°ï¼Œå› ä¸ºè¿”å›å€¼ä¸å†æ˜¯ return å¯¹è±¡ï¼Œè€Œæ˜¯ promiseï¼Œæ¨¡æ¿æ˜¯çœ‹ä¸åˆ° return å¯¹è±¡ä¸­çš„å±æ€§çš„

ç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š

```
<template>
  <h1 style="color:blue">å§“åï¼š{{name}}</h1>
  <h1 style="color:blue">å¹´é¾„ï¼š{{age}}</h1>
  <hr>
  <h1 style="color:red">æ€§åˆ«ï¼š{{gender}}</h1>
  <h1 style="color:red">åœ°å€ï¼š{{address}}</h1>
  <hr>
  <button @click="getVue_3">åœ¨Vue2è¯­æ³•ä¸­è¯»Vue3çš„æ•°æ®</button>
  <hr>
  <button @click="getVue_2">åœ¨Vue3è¯­æ³•ä¸­è¯»Vue2çš„æ•°æ®</button>
  <hr>
  <h1>é‡å¤æ•°æ®ï¼š{{version}}</h1>
</template>

<script>
// import { h } from "vue";
export default {
  name: "App",
  data() {
    return {
      gender: "ç”·",
      address: "ç¿»æ–—å¤§èŠ±å›­",
      version:'vue2.x'
    };
  },
  methods: {
    getVue_3() {
      console.log('åœ¨Vue2è¯­æ³•ä¸­è¯»å–Vue3çš„æ•°æ®ï¼š', this.name);
    }
  },
  setup() {
    // data
    let name = "å¼ ä¸‰";
    let age = 18;
    let version = 'vue3.x'
    // method
    function getVue_2() {
      console.log('ä»Vue3ä¸­è¯»å–Vue2çš„æ•°æ®ï¼š', this.gender);
    }
    // è¿”å›ä¸€ä¸ªå¯¹è±¡
    return {
      name,
      age,
      version,
      getVue_2
    }

    // // è¿”å›ä¸€ä¸ªå‡½æ•°ï¼ˆæ¸²æŸ“å‡½æ•°ï¼‰
    // return () => {
    //   return h("h1", "Hello World!"); // è¿”å› h çš„è°ƒç”¨ç»“æœ
    // };
  },
};
</script>

```

æ‰§è¡Œç»“æœå¦‚ä¸‹ï¼š

![](https://i-blog.csdnimg.cn/blog_migrate/178ee69e6744bb01a85fb0b070eeec89.png)

> âš ï¸æ³¨æ„ï¼šè¿™é‡Œå°šç¡…è°·çš„è€å¸ˆè®²é”™äº†ä¸¤ç‚¹ï¼š
> 
> 1.  å…¶å® Vue3.x çš„ setup é…ç½®é¡¹ä¸­ä¹Ÿå¯ä»¥è¯»å–åˆ° vue2.x çš„ dataã€methodsã€computed ç­‰æ•°æ®å’Œå±æ€§
> 2.  å…³äºé…ç½®é¡¹å†²çªçš„å–èˆé—®é¢˜é‡‡å–è¦†ç›–åŸåˆ™ï¼Œåé¢çš„ä¼šå°†å‰é¢çš„è¦†ç›–ï¼Œè€Œä¸æ˜¯ç®€å•åœ°å– setup ä¸ºæœ€é«˜æƒé‡

### 18.2 ref å‡½æ•°

ä½œç”¨ï¼š**å®šä¹‰ä¸€ä¸ªå“åº”å¼çš„æ•°æ®**

è¯­æ³•å¦‚ä¸‹ï¼š

```
const xxx = ref(initValue)

```

*   åˆ›å»ºä¸€ä¸ªåŒ…å«å“åº”å¼æ•°æ®çš„**å¼•ç”¨å¯¹è±¡ï¼ˆreference å¯¹è±¡ï¼‰**
*   JS ä¸­æ“ä½œæ•°æ®ï¼š`xxx.value`
*   æ¨¡æ¿ä¸­è¯»å–æ•°æ®ï¼šä¸éœ€è¦é€šè¿‡ `.value` è·å–æ•°æ®ï¼Œç›´æ¥`<div>{{xxx}}</div>`

ğŸ—’å¤‡æ³¨

1.  æ¥æ”¶çš„æ•°æ®å¯ä»¥æ˜¯åŸºæœ¬ç±»å‹ï¼Œä¹Ÿå¯ä»¥æ˜¯å¯¹è±¡ç±»å‹
2.  åŸºæœ¬ç±»å‹çš„æ•°æ®ï¼šå“åº”å¼ä¾ç„¶æ˜¯é€šè¿‡`Object.defineProperty()`çš„`get`ä¸`set`å®Œæˆçš„
3.  å¯¹è±¡ç±»å‹çš„æ•°æ®ï¼šå†…éƒ¨ â€œæ±‚åŠ©â€ äº† Vue3.0 ä¸­çš„ä¸€ä¸ªæ–°å‡½æ•° â€”â€” `reactive`å‡½æ•°

**ç¤ºä¾‹**

```
<template>
  <h1>å§“åï¼š{{name}}</h1>
  <h1>å¹´é¾„ï¼š{{age}}</h1>
  <h2>å·¥ä½œï¼š{{detail.job}}</h2>
  <h2>è–ªæ°´ï¼š{{detail.salary}}</h2>
  <button @click="showInfo">ç‚¹æˆ‘å±•ç¤ºè¯¦ç»†ä¿¡æ¯</button>
  <button @click="changeInfo">ç‚¹æˆ‘æ”¹å˜ä¿¡æ¯</button>
</template>

<script>
import {ref} from 'vue'		// å¼•å…¥ ref å‡½æ•°
export default {
  name: "App",
  setup() {
    let name = ref('å¼ ä¸‰')
    let age = ref(18)
    let detail = ref({
       job:'å‰ç«¯å·¥ç¨‹å¸ˆ',
       salary:'30k',
    })
    function showInfo() {
      console.log(name);
      console.log(age);
      console.log(detail);
      console.log(detail.value);
    }
    function changeInfo() {
      name.value = 'æå››'
      age.value = 19
      detail.value.job = 'UIè®¾è®¡å¸ˆ'
      detail.value.salary = '60k'
    }

    return {
      name,
      age,
      detail,
      showInfo,
      changeInfo
    }
  },
};
</script>

```

é€šè¿‡ä¸Šè¿°ä»£ç ï¼Œæˆ‘ä»¬è§‚å¯Ÿå°è£…å¯¹è±¡

![](https://i-blog.csdnimg.cn/blog_migrate/802b4ae2b0b05535c304309abccd6659.png)

æˆ‘ä»¬å¯ä»¥çœ‹å‡ºï¼ŒåŸæ¥çš„æ•°æ®å…¨éƒ¨éƒ½è¢«å°è£…æˆä¸ºäº†ä¸€ä¸ª ref å¯¹è±¡ï¼Œæˆ‘ä»¬é€šè¿‡ `.value` æ¥å¾—åˆ°å±æ€§çš„å€¼ï¼Œè€Œå¦‚æœæ˜¯å¯¹è±¡ï¼Œvue3.x è¿˜ä¼šå°†é‡Œé¢çš„æ•°æ®é€šè¿‡ reactive å°è£…æˆä¸º proxy ä»£ç†ï¼Œè¿™é‡Œæˆ‘ä»¬å¦‚æœå¦‚æœæƒ³è¦å–å‡ºå¯¹è±¡ä¸­çš„å€¼ï¼Œåªéœ€è¦ä½¿ç”¨ `xxx.value.xxx`ï¼Œè€Œä¸éœ€è¦ä½¿ç”¨ `xxx.value.xxx.value`

### 18.3 reactive å‡½æ•°

ä½œç”¨ï¼š**åŒ `ref`ï¼Œå°†æ•°æ®é‡æ–°å®šä¹‰ä¸ºä¸€ä¸ªå“åº”å¼çš„ï¼Œä½†æ˜¯åªèƒ½å®šä¹‰ä¸€ä¸ªå¯¹è±¡ç±»å‹æˆ–æ•°æ®ç±»å‹ï¼ˆåŸºæœ¬ç±»å‹éœ€è¦ä½¿ç”¨ `ref`ï¼‰**

è¯­æ³•å¦‚ä¸‹ï¼š

```
const proxyObject = reactive(sourceObject)

```

âœ¨**æ³¨æ„**

1.  `reactive` åœ¨å®ç°å‰éœ€è¦å…ˆé€šè¿‡ `import {reactive} from 'vue'` å¯¼å…¥å‡½æ•°
2.  `reactive` å®šä¹‰çš„å“åº”å¼æ•°æ®æ˜¯ â€œæ·±å±‚æ¬¡çš„â€
3.  å†…éƒ¨åŸºäº ES6 çš„ Proxy å®ç°ï¼Œé€šè¿‡ä»£ç†æ“ä½œæºå¯¹è±¡å†…éƒ¨æ•°æ®è¿›è¡Œæ“ä½œ
4.  `reactive` è·å–æ•°æ®æ—¶ï¼Œä¸éœ€è¦åƒ `ref` ä¸€æ ·é€šè¿‡ `.value` æ¥è·å–æ•°æ®ï¼Œå¯ä»¥ç›´æ¥è·å–æ•°æ®

### 18.4 Vue3 ä¸­çš„å“åº”å¼åŸç†

#### 18.4.1 å›é¡¾ Vue2 çš„å“åº”å¼åŸç†

**Vue2.x çš„å“åº”å¼**

*   å®ç°åŸç†
    
    *   å¯¹è±¡ç±»å‹ï¼šé€šè¿‡ `Object.defineProperty()` å±æ€§çš„è¯»å–ï¼Œä¿®æ”¹è¿›è¡Œæ‹¦æˆªï¼ˆæ•°æ®åŠ«æŒæˆ–æ•°æ®ä»£ç†ï¼‰
        
    *   æ•°æ®ç±»å‹ï¼šé€šè¿‡é‡å†™æ›´æ–°æ•°æ®çš„ä¸€ç³»åˆ—æ–¹æ³•æ¥å®ç°æ‹¦æˆªï¼ˆå¯¹æ•°ç»„çš„å˜æ›´æ–¹æ³•è¿›è¡Œäº†åŒ…è£¹ï¼‰
        
        ```
        Object.defineProperty(data, 'count', {
        	get() {},
        	set() {}
        })
        
        ```
        
*   å­˜åœ¨é—®é¢˜
    
    *   æ–°å¢å±æ€§ã€åˆ é™¤å±æ€§ï¼Œç•Œé¢ä¸ä¼šè‡ªåŠ¨æ›´æ–°
    *   ç›´æ¥é€šè¿‡ä¸‹æ ‡ä¿®æ”¹æ•°ç»„ï¼Œç•Œé¢ä¸ä¼šè‡ªåŠ¨æ›´æ–°

ğŸŒ¿**Vue2.x è§£å†³å“åº”é—®é¢˜**

Vue2.x è™½ç„¶å­˜åœ¨ä¸Šè¿°é—®é¢˜ï¼Œä½†ä¹Ÿæ˜¯æœ‰è§£å†³æ–¹æ³•çš„ï¼Œå¦‚ä¸‹ï¼š

```
<template>
  <div id="app">
    <h1>å§“åï¼š{{person.name}}</h1>
    <h1>å¹´é¾„ï¼š{{person.age}}</h1>
    <h1 v-show="person.address">{{person.address}}</h1>
    <button @click="addAddress">æ·»åŠ å¯¹è±¡åœ°å€å±æ€§</button>
    <button @click="delAddress">åˆ é™¤å¯¹è±¡åœ°å€å±æ€§</button>
    <hr>
    <h1>çˆ±å¥½ä¸€ï¼š{{hobby[0]}}</h1>
    <button @click="updateHobby_1">ä¿®æ”¹çˆ±å¥½1</button>
  </div>
</template>

<script>
import Vue from "vue";
export default {
  name: "App",
  data() {
    return {
      person: {
        name: "å¼ ä¸‰",
        age: 18,
      },
      hobby: ["æŠ½çƒŸ", "å–é…’", "çƒ«å¤´"],
    };
  },
  methods: {
    addAddress() {
      // this.person.address = 'ç¿»æ–—å¤§èŠ±å›­' // Ã—ï¼Œé”™è¯¯å†™æ³•
      this.$set(this.person, "address", "ç¿»æ–—å¤§èŠ±å›­");
      // Vue.set(this.person, 'address', 'ç¿»æ–—å¤§èŠ±å›­')  // ç¬¬äºŒç§å†™æ³•
    },
    delAddress() {
      // delete this.person.address        // Ã—ï¼Œé”™è¯¯å†™æ³•
      this.$delete(this.person, "address", "ç¿»æ–—å¤§èŠ±å›­");
      // Vue.delete(this.person, 'address', 'ç¿»æ–—å¤§èŠ±å›­') // ç¬¬äºŒç§å†™æ³•
    },
    updateHobby_1() {
      // this.hobby[0] = 'å­¦ä¹ '      // Ã—ï¼Œé”™è¯¯å†™æ³•
      this.$set(this.hobby, 0, 'å­¦ä¹ ')
      // this.hobby.splice(0, 1, 'å­¦ä¹ ')  // ç¬¬äºŒç§å†™æ³•
    }
  },
};
</script>

```

#### 18.4.2 ä»‹ç» Vue3 çš„å“åº”å¼åŸç†

**Vue3.x å“åº”å¼**

**Vue 3.x ä¸­ä¸å­˜åœ¨ Vue2.x ä¸­å‡ºç°çš„é—®é¢˜ï¼Œå¯ä»¥ç›´æ¥æ·»åŠ ã€ä¿®æ”¹å’Œåˆ é™¤**

ç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š

```
<template>
  <h2>å·¥ä½œï¼š{{detail.job}}</h2>
  <h2>è–ªæ°´ï¼š{{detail.salary}}</h2>
  <h2 v-show="detail.address">åœ°å€ï¼š{{detail.address}}</h2>
  <button @click="addData">ç‚¹æˆ‘æ·»åŠ æ•°æ®</button>
  <button @click="delData">ç‚¹æˆ‘åˆ é™¤æ•°æ®</button>
  <button @click="updateData">ç‚¹æˆ‘æ›´æ–°æ•°æ®</button>
</template>

<script>
import {ref, reactive} from 'vue'
export default {
  name: "App",
  setup() {
    let detail = reactive({
       job:'å‰ç«¯å·¥ç¨‹å¸ˆ',
       salary:'30k',
    })

    function addData() {
      detail.address = 'ç¿»æ–—å¤§èŠ±å›­'
    }

    function delData() {
      delete detail.address
    }

    function updateData() {
      detail.job = 'UIè®¾è®¡å¸ˆ'
    }

    return {
      detail,
      addData,
      delData,
      updateData
    }
  },
};
</script>

```

**å®ç°åŸç†**

*   é€šè¿‡ Proxyï¼ˆä»£ç†ï¼‰ï¼šæ‹¦æˆªå¯¹è±¡ä¸­çš„ä»»æ„å±æ€§çš„å˜åŒ–ï¼ŒåŒ…æ‹¬ï¼šå±æ€§å€¼çš„è¯»å†™ã€å±æ€§çš„æ·»åŠ ã€å±æ€§çš„åˆ é™¤ç­‰
*   é€šè¿‡ Reflectï¼ˆåå°„ï¼‰ï¼šå¯¹è¢«ä»£ç†å¯¹è±¡çš„å±æ€§è¿›è¡Œæ“ä½œ
*   MDN æ–‡æ¡£ä¸­æè¿°çš„ Proxy ä¸ Reflect
    *   Proxyï¼š[ä¼ é€é—¨](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Proxy)
    *   Reflectï¼š[ä¼ é€é—¨](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Reflect)

**ç¤ºä¾‹**

```
let person = {
    name:'å¼ ä¸‰',
    age:18
}

// æ¨¡æ‹Ÿ Vue3 ä¸­å®ç°å“åº”å¼
const p = new Proxy(person, {
    // æŸ¥è¯¢
    get(target, propName) {
        console.log(`æœ‰äººè¯»å–äº†pèº«ä¸Šçš„${propName}`);
        return target[propName];
    },
    
    // ä¿®æ”¹æˆ–æ·»åŠ 
    set(target, propName, value) {
        console.log(`æœ‰äººä¿®æ”¹äº†pèº«ä¸Šçš„${propName}`);
        target[propName] = value;
    },

    // åˆ é™¤
    deleteProperty(target, propName) {
        console.log(`æœ‰äººåˆ é™¤äº†pèº«ä¸Šçš„${propName}`);
        return delete target[propName];
    }
})

```

è‡ªå·±ä¹¦å†™ç¤ºä¾‹ä»£ç æ—¶å¯èƒ½å‡ºç°çš„é—®é¢˜ï¼š

1.  `target[propName]` å’Œ `target.propName` æ˜¯ä¸åŒçš„ï¼Œå‰é¢çš„å†™æ³•ï¼ŒJS ä¼šå°† `propName` å½“æˆä¸€ä¸ªå˜é‡å¯¹å¾…ï¼›åä¸€ç§å†™æ³•æ˜¯ç”¨äºè·å– `target` çš„å±æ€§å€¼ï¼Œç›¸å½“äº `target['propName']`
2.  `delete` æ–¹æ³•å…·æœ‰ä¸€ä¸ªå¸ƒå°”ç±»å‹çš„è¿”å›å€¼ï¼Œç”¨æ¥è¡¨ç¤ºåˆ é™¤æˆåŠŸå’Œå¤±è´¥ï¼Œæˆ‘ä»¬éœ€è¦ä½¿ç”¨ `return` å°†å…¶è¿”å›

å½“ç„¶ï¼ŒVue3 ä¸­çš„å¯¹å±æ€§çš„æ“ä½œï¼Œå¹¶ä¸æ˜¯ä¸Šè¿°çš„æ“ä½œï¼Œè€Œæ˜¯é€šè¿‡ Reflect åå°„å¯¹è±¡æ¥å®ç°çš„ï¼š

*   get å‡½æ•°
    
    ```
    return Reflect.get(tagrget, propName)
    
    ```
    
*   set å‡½æ•°
    
    ```
    Reflect.set(target, propName, value)
    
    ```
    
*   deleteProperty å‡½æ•°
    
    ```
    return Reflect,deleteProperty(target, propName)
    
    ```
    

### 18.5 ref å’Œ reactive å¯¹æ¯”

*   ä»å®šä¹‰æ•°æ®è§’åº¦çœ‹
    *   `ref` ç”¨æ¥å®šä¹‰ï¼š**åŸºæœ¬æ•°æ®ç±»å‹**
    *   `reactive` ç”¨æ¥å®šä¹‰ï¼š**å¯¹è±¡ï¼ˆæˆ–æ•°ç»„ï¼‰ç±»å‹æ•°æ®**
    *   ğŸ“Œå¤‡æ³¨ï¼š`ref` ä¹Ÿå¯ä»¥ç”¨æ¥å®šä¹‰å¯¹è±¡ï¼ˆæˆ–æ•°ç»„ï¼‰ç±»å‹æ•°æ®ï¼Œå®ƒå†…éƒ¨ä¼šè‡ªåŠ¨é€šè¿‡ `reactive` æ¥å°†å…¶å°è£…ä¸ºä¸€ä¸ªä»£ç†å¯¹è±¡
*   ä»åŸç†è§’åº¦å¯¹æ¯”
    *   `ref` é€šè¿‡ `Object.defineProperty()` çš„ `get` ä¸ `set` æ¥å®ç°å“åº”å¼ï¼ˆæ•°æ®åŠ«æŒï¼‰
    *   `reactive` é€šè¿‡ä½¿ç”¨ Proxy æ¥å®ç°å“åº”å¼ï¼ˆæ•°æ®åŠ«æŒï¼‰ï¼Œå¹¶é€šè¿‡ `Reflect` æ“ä½œ**æºå¯¹è±¡**å†…éƒ¨çš„æ•°æ®
*   ä»ä½¿ç”¨è§’åº¦å¯¹æ¯”
    *   `ref` å®šä¹‰çš„æ•°æ®ï¼šæ“ä½œæ•°æ®éœ€è¦ `.value`ï¼Œè¯»å–æ•°æ®æ—¶ç›´æ¥è¯»å–ï¼Œä¸éœ€è¦æ·»åŠ  `.value`
    *   `reactive` å®šä¹‰æ•°æ®ï¼šæ“ä½œæ•°æ®ä¸è¯»å–æ•°æ®ï¼šå‡ä¸éœ€è¦æ·»åŠ  `.value`

### 18.6 setup ç›¸å…³æ³¨æ„ç‚¹

*   setup æ‰§è¡Œçš„æ—¶æœº
    *   åœ¨ `beforeCreate` ä¹‹å‰æ‰§è¡Œä¸€æ¬¡ï¼Œåœ¨ `setup` å‡½æ•°é‡Œé¢ this çš„å€¼æ˜¯ undefined
*   setup çš„å‚æ•°
    *   propsï¼šå€¼ä¸ºå¯¹è±¡ï¼ŒåŒ…å«ï¼šç»„ä»¶å¤–éƒ¨ä¼ é€’è¿‡æ¥ï¼Œå¹¶ä¸”ç»„ä»¶å†…éƒ¨å£°æ˜æ¥æ”¶äº†çš„å±æ€§
    *   contextï¼šä¸Šä¸‹æ–‡å¯¹è±¡ï¼Œä¸»è¦åŒ…å«ä»¥ä¸‹ä¸‰ä¸ªå±æ€§
        *   `attrs`ï¼šå€¼ä¸ºå¯¹è±¡ï¼ŒåŒ…å«**ç»„ä»¶å¤–éƒ¨ä¼ é€’è¿‡æ¥çš„ï¼Œä½†æ²¡æœ‰åœ¨ props é…ç½®ä¸­å£°æ˜çš„å±æ€§ï¼Œç›¸å½“äº `this.$attrs`**
        *   `slots`ï¼šæ”¶åˆ°çš„æ’æ§½å†…å®¹ï¼Œç›¸å½“äº `this.$slots`
        *   `emit`ï¼šåˆ†å‘è‡ªå®šä¹‰äº‹ä»¶çš„å‡½æ•°ï¼Œç›¸å½“äº `this.$emit`

æˆ‘ä»¬é¦–å…ˆæµ‹è¯• setup æ‰§è¡Œçš„æ—¶æœº

```
setup() {
  console.log('--setup--');
  console.log(this);
},
beforeCreate() {
  console.log('--beforeCreate--');
}

```

æ‰“å°ç»“æœå¦‚ä¸‹ï¼š

![](https://i-blog.csdnimg.cn/blog_migrate/065d0d64936616b775bedb8f4ede25a2.png)

æˆ‘ä»¬ä¼šå‘ç°ï¼Œsetup æ˜¯å…ˆ beforeCreate æ‰§è¡Œçš„ï¼Œå¹¶ä¸”é‡Œé¢çš„ this å€¼ä¸º undefined

**å…¶å® setup é‡Œé¢æ˜¯æœ‰ä¸¤ä¸ªå‚æ•°çš„ï¼Œåˆ†åˆ«æ˜¯ï¼šprops å’Œ context**

![](https://i-blog.csdnimg.cn/blog_migrate/cea21e7c592f6a25554266348e57671b.png)

æˆ‘ä»¬ç°åœ¨æ‹¿ä¸¤ä¸ªç»„ä»¶è¿›è¡Œæµ‹è¯•ï¼šDemo å’Œ App

App.vue

```
<Demo msg="Hello World" id="1"></Demo>	
<!-- ç»™ Demo ç»„ä»¶ä¼ é€’æ•°æ® -->

```

Demo.vue

```
export default {
  name: 'Demo',
  props:['msg'],
  setup(props, context) {
    console.log(props);
    console.log(context.attrs);
  }
}

```

å¯ä»¥çœ‹åˆ°æ‰“å°ç»“æœå¦‚ä¸‹ï¼š

![](https://i-blog.csdnimg.cn/blog_migrate/87963b494e95457ff7f4cab3e79661c6.png)

> æœªè¢« props æ¥å—çš„æ•°æ®éƒ½è·‘åˆ° attrs ä¸­æ¥

App.vue

```
<template>
  <Demo @hello="showHelloMsg"></Demo>
</template>

<script>
import Demo from "./components/Demo.vue";
export default {
  name: "App",
  components: {
    Demo,
  },
  setup() {
    function showHelloMsg(value) {
      console.log("Hello World---", value);
    }

    return {
      showHelloMsg,
    };
  },
};
</script>

```

Demo.vue

```
<template>
  <button @click="test">ç‚¹æˆ‘è§¦å‘äº‹ä»¶</button>
</template>

<script>
export default {
  name: 'Demo',
  // emit:['hello'],
  setup(props, context) {
    function test() {
      context.emit('hello', 666)
    }

    return {
      test
    }
  }
}
</script>

```

> å¯ä»¥çœ‹åˆ°ï¼Œåœ¨ Vue3.x ä¸­ï¼Œéœ€è¦ emit ä¸å†æ˜¯é€šè¿‡ this æ¥è·å–äº†ï¼Œè€Œæ˜¯é€šè¿‡ setup ä¸­çš„å‚æ•° context æ¥è·å–ï¼ŒåŒæ—¶æ˜¯å¾—åˆ°çš„æ˜¯ emitï¼Œè€Œä¸æ˜¯ Vue2.x ä¸­çš„ $emitï¼ŒåŒæ—¶è¿™é‡Œæœ‰ä¸€ç‚¹éœ€è¦æ³¨æ„ï¼Œåœ¨ä»¥å‰ä½¿ç”¨ emitï¼Œé‚£ä¹ˆåˆ™ä¼šæŠ¥ä»¥ä¸‹é”™è¯¯ï¼š
> 
> ![](https://i-blog.csdnimg.cn/blog_migrate/4e2f84eb1743510290628cb4725ed805.png)
> 
> è¿™ä¸ªæ—¶å€™ï¼Œæˆ‘ä»¬å°±éœ€è¦æ·»åŠ  emit é…ç½®é¡¹ï¼Œ`emit:['hello']`ï¼Œå½“ç„¶ï¼Œç°åœ¨ Vue æ›´æ–°è¿­ä»£ä¹‹åå°±å»é™¤äº†è¿™ç±»è­¦å‘Š

App.vue

```
<template>
  <Demo>
    <template v-slot:test>
      <span>Hello World</span>
    </template>
  </Demo>
</template>

```

Demo.vue

```
<template>
  <slot ></slot>
</template>

```

âš ï¸æ³¨æ„ï¼š

*   è¿™é‡Œæœ‰ä¸€ä¸ªå’Œ Vue2 å¾ˆä¸ä¸€æ ·å°±æ˜¯ï¼šåœ¨ Vue2 ä¸­å…·åæ’æ§½çš„å¯ä»¥ä½¿ç”¨ `slot="name"`ï¼Œä½†æ˜¯åœ¨ Vue3 ä¸­ `slot="name"` å·²ç»è¢«èˆå¼ƒï¼Œåªèƒ½ä½¿ç”¨ `v-slot:name` çš„å†™æ³•

### 18.7 è®¡ç®—å±æ€§ä¸ç›‘è§†å±æ€§

#### 18.7.1 computed å‡½æ•°

ä¸ Vue2 ä¸­çš„ computed é…ç½®åŠŸèƒ½ä¸€è‡´

ç¤ºä¾‹å¦‚ä¸‹ï¼š

```
import {computed} from 'vue'

setup(){
    ...
	//è®¡ç®—å±æ€§â€”â€”ç®€å†™
    let fullName = computed(()=>{
        return person.firstName + '-' + person.lastName
    })
    //è®¡ç®—å±æ€§â€”â€”å®Œæ•´
    let fullName = computed({
        get(){
            return person.firstName + '-' + person.lastName
        },
        set(value){
            const nameArr = value.split('-')
            person.firstName = nameArr[0]
            person.lastName = nameArr[1]
        }
    })
}

```

#### 18.7.2 watch ç›‘è§†å±æ€§

ä¸ Vue2 ä¸­ watch é…ç½®åŠŸèƒ½ä¸€è‡´

*   ç›‘è§† ref å®šä¹‰çš„å“åº”å¼æ•°æ®
    
    ```
    <template> 
      <h1>numï¼š{{num}}</h1>
      <button @click="num++">ç‚¹æˆ‘num+1</button>
      <hr>
      <h1>msg:{{msg}}</h1>
      <button @click="msg+='!'">ç‚¹æˆ‘åŠ !</button>
    </template>
    
    <script>
    import {ref, watch} from 'vue'
    export default {
      name: "App",
      setup() {
        let num = ref(0)
    
        let msg = ref('ä½ å¥½å‘€')
    
        // æƒ…å†µä¸€ï¼šç›‘è§† ref æ‰€å®šä¹‰çš„ä¸€ä¸ªå“åº”å¼æ•°æ®
        watch(num, (newValue, oldValue) => {
          console.log('sum å‘ç”Ÿæ”¹å˜', newValue, oldValue);
        }, {immediate:true})
    
        
        // æƒ…å†µäºŒï¼šç›‘è§† ref æ‰€å®šä¹‰çš„å¤šä¸ªå“åº”å¼æ•°æ®
        watch([num, msg], (newValue, oldValue) => {
          console.log('num æˆ–è€… msg çš„å€¼å‘ç”Ÿæ”¹å˜', newValue, oldValue);
        }, {immediate:true})
    
        return {
          num,
          msg
        }
      },
    };
    </script>
    
    ```
    
    > åœ¨ Vue3 ä¸­ï¼Œwatch ä»¥ä¸€ä¸ªå‡½æ•° API å½¢å¼å­˜åœ¨ï¼Œå‡½æ•°é‡Œé¢ä¸€å…±æœ‰ 3 ä¸ªå‚æ•°ï¼Œåˆ†åˆ«æ˜¯ç›‘è§†çš„å±æ€§ï¼Œå›è°ƒå’Œé…ç½®é¡¹ï¼Œç¬¬ä¸‰ä¸ªå‚æ•°æ˜¯å¯é€‰çš„
    
*   ç›‘è§† reactive å®šä¹‰çš„å“åº”å¼æ•°æ®
    
    æµ‹è¯•ä»£ç 
    
    ```
    <template>
      <h1>å§“åï¼š{{person.name}}</h1>
      <button @click="person.name+='~'">ç‚¹æˆ‘å§“åæ”¹å˜</button>
      <hr>
      <h1>å¹´é¾„ï¼š{{person.age}}</h1>
      <button @click="person.age++">ç‚¹æˆ‘å¹´é¾„+1</button>
      <hr>
      <h1>è–ªèµ„ï¼š{{person.job.j1.salary}}K</h1>
      <button @click="person.job.j1.salary++">ç‚¹æˆ‘æ¶¨è–ª</button>
    </template>
    
    <script>
    import { ref, watch, reactive } from "vue";
    export default {
      name: "App",
      setup() {
        let person = reactive({
          name: "å¼ ä¸‰",
          age: 18,
          job: {
            j1: {
              salary: 20,
            },
          },
        });
    
        return {
          person,
        };
      },
    };
    </script>
    
    
    ```
    
    æƒ…å†µä¸€
    
    ```
    // æƒ…å†µä¸€ï¼šç›‘è§†reactiveæ‰€å®šä¹‰çš„ä¸€ä¸ªå“åº”å¼æ•°æ®çš„å…¨éƒ¨å±æ€§
    /* æ³¨æ„ç‚¹ï¼š
      1. æ­¤å¤„æ— æ³•æ­£ç¡®è·å–oldvalue
      2. å¼ºåˆ¶å¼€å¯äº†æ·±åº¦ç›‘è§†ï¼ˆdeep é…ç½®æ— æ•ˆï¼‰
    */
    watch(person, (newValue, oldValue) => {
      console.log('personå‘ç”Ÿæ”¹å˜', newValue, oldValue);
    })
    
    ```
    
    æƒ…å†µäºŒ
    
    ```
    // æƒ…å†µäºŒï¼šç›‘è§†reacticeæ‰€å®šä¹‰çš„ä¸€ä¸ªå“åº”å¼æ•°æ®çš„ä¸€ä¸ªå±æ€§ï¼ˆéå¯¹è±¡ï¼‰
    /* æ³¨æ„ç‚¹ï¼š
      1.  æ­¤æ—¶å¯ä»¥æ­£ç¡®è·å–oldValue
    */
    watch(() => person.name, (newValue, oldValue) => {
      console.log('personçš„nameå‘ç”Ÿæ”¹å˜', newValue, oldValue);
    })
    
    ```
    
    æƒ…å†µä¸‰
    
    ```
    // æƒ…å†µä¸‰ï¼šç›‘è§† reactive æ‰€å®šä¹‰çš„ä¸€ä¸ªå“åº”å¼æ•°æ®ä¸­çš„å¤šä¸ªå±æ€§ï¼ˆéå¯¹è±¡ï¼‰
    /* æ³¨æ„ç‚¹ï¼š
      1. æ­¤æ—¶å¯ä»¥æ­£ç¡®è·å–oldValue
    */
    watch([() => person.name, () => person.age], (newValue, oldValue) => {
      console.log('personçš„nameæˆ–è€…ageå‘ç”Ÿæ”¹å˜',newValue, oldValue);
    })
    
    ```
    
    æƒ…å†µå››
    
    ```
    // æƒ…å†µå››ï¼šç›‘è§† reactive æ‰€å®šä¹‰çš„ä¸€ä¸ªå“åº”å¼æ•°æ®ä¸­çš„æŸä¸ªå¯¹è±¡å±æ€§
    /* æ³¨æ„ç‚¹ï¼š
      1. deep é…ç½®æœ‰æ•ˆ
      2. oldValue æ— æ•ˆ
    */
    watch(
      () => person.job,
      (newValue, oldValue) => {
        console.log("personçš„jobå˜åŒ–äº†", oldValue, newValue);
      },
      { deep: true }
    );
    
    ```
    

ğŸŒ¿**å…³äº watch æ—¶ value çš„é—®é¢˜**

å¦‚æœæˆ‘ä»¬æ˜¯é€šè¿‡ ref å°è£…çš„åŸºæœ¬æ•°æ®ç±»å‹ï¼Œé‚£ä¹ˆç›‘è§†çš„å±æ€§ç›´æ¥å†™å±æ€§åå³å¯

```
let num = ref(0);

watch(num, (newValue, oldValue) => {
  console.log("num çš„å€¼å‘ç”Ÿæ”¹å˜", newValue, oldValue);
});

```

è€Œå¦‚æœæˆ‘ä»¬ä½¿ç”¨ ref å°è£…çš„å¯¹è±¡ï¼Œé‚£ä¹ˆç”±äºå†…éƒ¨è¿˜ä¼šè°ƒç”¨ reactive å°†å…¶å†…éƒ¨å†å°è£…æˆä¸ºä¸€ä¸ª proxy å¯¹è±¡ï¼Œæ­¤æ—¶æˆ‘ä»¬å¦‚æœè¿˜æƒ³ç›‘è§†å†…éƒ¨æ•°æ®å‘ç”Ÿçš„æ”¹å˜ï¼Œé‚£ä¹ˆåˆ™éœ€è¦ä½¿ç”¨ `.value` æˆ–æ·»åŠ  `deep:true` å¼€å¯æ·±åº¦ç›‘è§†

```
let person = ref({
  name: "å¼ ä¸‰",
  age: 18,
});

// æ–¹å¼1ï¼šæ·»åŠ  .value
watch(person.value, (newValue, oldValue) => {
  console.log("person çš„å€¼å‘ç”Ÿæ”¹å˜", newValue, oldValue);
});

// æ–¹å¼2ï¼šå¼€å¯æ·±åº¦ç›‘è§†
watch(person, (newValue, oldValue) => {
  console.log("person çš„å€¼å‘ç”Ÿæ”¹å˜", newValue, oldValue);
}, {deep:true});

```

#### 18.7.3 watchEffect å‡½æ•°

*   watch çš„å¥—è·¯æ˜¯ï¼šæ—¢è¦æŒ‡æ˜ç›‘è§†çš„å±æ€§ï¼Œä¹Ÿè¦æŒ‡æ˜ç›‘è§†çš„å›è°ƒ
    
*   watchEffect çš„å¥—è·¯æ˜¯ï¼šä¸ç”¨æŒ‡æ˜ç›‘è§†å“ªä¸ªå±æ€§ï¼Œç›‘è§†çš„å›è°ƒä¸­ç”¨åˆ°å“ªä¸ªå±æ€§ï¼Œå°±å»ç›‘è§†é‚£ä¸ªå±æ€§
    
*   watchEffect æœ‰ç‚¹ç±»ä¼¼äº computed:
    
    *   ä½† computed æ³¨é‡è®¡ç®—å‡ºæ¥çš„å€¼ï¼ˆå›è°ƒå‡½æ•°çš„è¿”å›å€¼ï¼‰ï¼Œæ‰€ä»¥å¿…é¡»è¦å†™è¿”å›å€¼
        
    *   è€Œ watchEffect æ›´æ³¨é‡çš„æ˜¯è¿‡ç¨‹ï¼ˆå›è°ƒå‡½æ•°çš„å‡½æ•°ä½“ï¼‰ï¼Œæ‰€ä»¥ä¸éœ€è¦å†™è¿”å›å€¼
        
        ```
        //watchEffectæ‰€æŒ‡å®šçš„å›è°ƒä¸­ç”¨åˆ°çš„æ•°æ®åªè¦å‘ç”Ÿå˜åŒ–ï¼Œåˆ™ç›´æ¥é‡æ–°æ‰§è¡Œå›è°ƒã€‚
        watchEffect(()=>{
            const x1 = sum.value
            const x2 = person.age
            console.log('watchEffecté…ç½®çš„å›è°ƒæ‰§è¡Œäº†')
        })
        
        ```
        

### 18.8 Vue3 ç”Ÿå‘½å‘¨æœŸ

Vue3 å£°æ˜å‘¨æœŸå›¾ç¤ºå¦‚ä¸‹ï¼š

![](https://i-blog.csdnimg.cn/blog_migrate/c35c76310ab67269a0f5ecd0a53c17a3.png)

*   Vue3.0 ä¸­å¯ä»¥ç»§ç»­ä½¿ç”¨ Vue2.x ä¸­çš„ç”Ÿå‘½å‘¨æœŸé’©å­ï¼Œä½†æœ‰æœ‰ä¸¤ä¸ªè¢«æ›´åï¼š
    *   `beforeDestroy`æ”¹åä¸º `beforeUnmount`
    *   `destroyed`æ”¹åä¸º `unmounted`
*   Vue3.0 ä¹Ÿæä¾›äº† Composition API å½¢å¼çš„ç”Ÿå‘½å‘¨æœŸé’©å­ï¼Œä¸ Vue2.x ä¸­é’©å­å¯¹åº”å…³ç³»å¦‚ä¸‹ï¼š
    *   `beforeCreate` ==> `setup()`
    *   `created` ==> `setup()`
    *   `beforeMount` ==> `onBeforeMount`
    *   `mounted` ==> `onMounted`
    *   `beforeUpdate` ==> `onBeforeUpdate`
    *   `updated` ==> `onUpdated`
    *   `beforeUnmount`Â ==> `onBeforeUnmount`
    *   `unmounted` ==> `onUnmounted`

> ğŸŒ¿è¡¥å……ï¼šç»„åˆå¼ API ä¸­ç”Ÿå‘½å‘¨æœŸä¸­çš„é’©å­è¦å¿«äºé…ç½®ä¸­å¯¹åº”çš„é’©å­

### 18.10 è‡ªå®šä¹‰ hook

**ä»€ä¹ˆæ˜¯ hookï¼Ÿ**

æœ¬è´¨æ˜¯ä¸€ä¸ªå‡½æ•°ï¼ŒæŠŠ setup å‡½æ•°ä¸­ä½¿ç”¨çš„ Composition API è¿›è¡Œå°è£…

ğŸ—’**å¤‡æ³¨**

*   ç±»ä¼¼äº Vue2.x ä¸­çš„ mixin
*   è‡ªå®šä¹‰ hook çš„ä¼˜åŠ¿ï¼š**å¤ç”¨ä»£ç ï¼Œè®© setup ä¸­çš„é€»è¾‘æ›´åŠ æ¸…æ¥šæ˜“æ‡‚**

**æ¡ˆä¾‹ï¼šç°åœ¨æˆ‘ä»¬æœ‰å¤šä¸ªç»„ä»¶æƒ³è¦å®Œæˆä¸€ä¸ªåŠŸèƒ½ â€”â€” â€˜æ‰“ç‚¹â€™ï¼ˆå³è®°å½•é¼ æ ‡å½“å‰æ‰€åœ¨çš„ä½ç½®ï¼‰**

ç¬¬ä¸€æ­¥ï¼šåœ¨ src æ–‡ä»¶å¤¹ä¸‹åˆ›å»ºä¸€ä¸ª hooks æ–‡ä»¶å¤¹

```
src             
â”œâ”€ assets       
â”‚  â””â”€ logo.png  
â”œâ”€ components   
â”‚  â””â”€ Demo.vue  
â”œâ”€ hooks         
â”œâ”€ App.vue      
â”œâ”€ index.css    
â””â”€ main.js      

```

åœ¨ hooks ä¸­åˆ›å»ºæ–°çš„æ–‡ä»¶ usePoint.js ï¼ˆä¸€èˆ¬è€Œè¨€ï¼Œ**hook æ–‡ä»¶å¤¹ä¸‹çš„åŠŸèƒ½æ–‡ä»¶çš„å‰ç¼€éƒ½å– "use"**ï¼‰

```
// usePoint.js æ–‡ä»¶
import { reactive, onMounted, onBeforeUnmount } from 'vue'
export default function () {
  let point = reactive({
    x: 0,
    y: 0,
  })

  function savePoint(event) {
    point.x = event.pageX
    point.y = event.pageY
  }

  // å®ç°é¼ æ ‡"æ‰“ç‚¹"ç›¸å…³çš„å£°æ˜å‘¨æœŸé’©å­
  onMounted(() => {
    window.addEventListener('click', savePoint)
  })

  onBeforeUnmount(() => {
    window.removeEventListener('click', savePoint)
  })

  return point
}

```

å¼•å…¥åŠŸèƒ½æ¨¡å—çš„ç»„ä»¶ï¼ˆè¿™é‡Œä»¥ App.vue ç»„ä»¶ä¸ºä¾‹ï¼‰

```
<template>
  <h1>å½“å‰åæ ‡æ‰€åœ¨çš„ä½ç½®ä¸ºï¼š{{point.x}}, {{point.y}}</h1>
</template>

<script>
import usePoint from "./hooks/usePoint";
export default {
  name: "App",
  setup() {
    let point = usePoint();

    return {
      point,
    };
  },
};
</script>

```

å®ç°æ•ˆæœå¦‚ä¸‹ï¼š

![](https://i-blog.csdnimg.cn/blog_migrate/ac6e27a0fafc51ce58b111ed88708f05.png)

### 18.11 toRef ä¸ toRefs

ä½œç”¨ï¼š**åˆ›å»ºä¸€ä¸ª ref å¯¹è±¡ï¼Œå…¶ value å€¼æŒ‡å‘å¦ä¸€ä¸ªå¯¹è±¡çš„æŸä¸ªå±æ€§**

è¯­æ³•å¦‚ä¸‹ï¼š

```
const name = toRef(person, 'name')

```

*   åº”ç”¨ï¼šè¦å°†å“åº”å¼å¯¹è±¡ä¸­çš„æŸä¸ªå±æ€§å•ç‹¬æä¾›ç»™å¤–éƒ¨ä½¿ç”¨
*   æ‰©å±•ï¼š`toRefs` ä¸ `toRef` åŠŸèƒ½ä¸€è‡´ï¼Œä½†å¯ä»¥æ‰¹é‡åˆ›å»ºå¤šä¸ª ref å¯¹è±¡ï¼Œè¯­æ³•ï¼š`toRefs(person)`

å¼•å…¥ç›®çš„ï¼š**ç®€å†™å˜é‡åï¼Œä½¿å¾—ä»£ç æ›´åŠ ç®€æ´**

**æƒ…æ™¯åˆ†æï¼š**

æƒ…æ™¯ä¸€ï¼šæŸä¸ªå¯¹è±¡çš„å±‚æ¬¡æ¯”è¾ƒæ·±ï¼Œå³å¯¹è±¡ç›¸äº’åµŒå¥—ï¼Œæˆ‘ä»¬è¦æ‹¿å‡ºæ¥æ”¾åˆ°æ¨¡æ¿ä¸­ï¼Œå°±å¿…é¡»è¦ `a.b.c.â€¦` è¿™ç§å½¢å¼

æƒ…æ™¯äºŒï¼šæˆ‘ä»¬åœ¨æ¨¡æ¿ä¸­ç”¨åˆ°æŸä¸ªå¯¹è±¡çš„æ¬¡æ•°æ¯”è¾ƒå¤šï¼Œæ¯æ¬¡éƒ½éœ€è¦é€šè¿‡ `a.b` æ¥æ”¾ç½®

åŸºäºä¸Šè¿°çš„ä¸¤ä¸ªæƒ…æ™¯ï¼Œæˆ‘ä»¬éœ€è¦è€ƒè™‘åˆ°å°†å˜é‡åè¿›è¡Œç®€å†™ï¼Œè¿™ä¸ªæ—¶å€™å°±éœ€è¦ç”¨åˆ° `ref` å’Œ `refs`

**ç¤ºä¾‹**

```
<template>
  <h1>å§“åï¼š{{myName}}</h1>
  <h1>èŒä¸šï¼š{{myJob}}</h1>
  <hr>
  <h1>å§“åï¼š{{name}}</h1>
  <h1>èŒä¸šï¼š{{job.j1.name}}</h1>
</template>

<script>
import {reactive, toRef, toRefs} from 'vue'
export default {
  name: "App",
  setup() {
    let person = reactive({
      name:'å¼ ä¸‰',
      job:{
        j1:{
          name:'åç«¯å·¥ç¨‹å¸ˆ'
        },
      } 
    })

    let myName = toRef(person, 'name')

    let myJob = toRef(person.job.j1, 'name')
    // æ³¨æ„ç‚¹1ï¼šè¿™é‡Œä¸èƒ½å†™æˆ toRef(person, 'job.j1.name')

    let p = toRefs(person)
    return {
      myName,
      myJob,
      ...p
      //æ³¨æ„ç‚¹2ï¼šè¿™é‡Œéœ€è¦ä½¿ç”¨æ‰©å±•è¿ç®—ç¬¦å°†å…¶å±•å¼€ï¼Œåˆ†åˆ«è¿”å›
    }
  },
};
</script>

```

æ‰§è¡Œç»“æœå¦‚ä¸‹ï¼š

![](https://i-blog.csdnimg.cn/blog_migrate/53e9a267426f1ffd28d42f5658171568.png)

> âš ï¸æ³¨æ„ï¼š
> 
> 1.  é’ˆå¯¹æ³¨æ„ç‚¹ 1 çš„è§£é‡Šï¼šä¸ºä»€ä¹ˆä¸èƒ½å†™æˆ `toRef(person, 'job.j1.name')` çš„é“ç†å¾ˆç®€å•ï¼Œå› ä¸ºå­—ç¬¦ä¸²é‡Œé¢ä»£è¡¨æ˜¯å¯¹è±¡çš„å±æ€§ï¼Œè€Œæ²¡æœ‰è¢«å½“åšæ˜¯å˜é‡è§£æï¼Œä¹Ÿå°±æ˜¯è¯´ä¸Šè¿°å†™æ³•çš„æ„æ€ï¼Œperson é‡Œé¢æœ‰ä¸€ä¸ªå±æ€§å«åš â€˜job.j1.nameâ€™ï¼ˆæ˜¾ç„¶è¿™ç§å½¢å¼ä¹Ÿæ˜¯é”™è¯¯çš„ï¼‰
> 2.  é’ˆå¯¹æ³¨æ„ç‚¹ 2 çš„è§£é‡Šï¼šä¸ºä»€ä¹ˆè¦ä½¿ç”¨æ‰©å±•è¿ç®—ç¬¦å°†å…¶æ‹†åˆ†ï¼Œ return é‡Œé¢è¿”å›çš„åº”è¯¥æ˜¯ä¸€ä¸ªå…·ä½“çš„å¯¹è±¡ï¼Œä¹Ÿå°±æ˜¯è¦ä½¿ç”¨å…·ä½“çš„å˜é‡åå»æ¥æ”¶ï¼ˆstatementï¼‰ï¼Œç„¶åå†è¿”å›ï¼Œè€Œä¸èƒ½ç›´æ¥è¿”å›ä¸€ä¸ªåŒ¿åå¯¹è±¡

â“**è®¨è®º**

1.  æˆ‘ä»¬ä¸ºå•¥ä¸èƒ½ç›´æ¥è¿”å›ä¸€ä¸ªå­—å…¸ï¼Œé‡Œé¢å°±å†™ä»–ä»¬ä¹‹é—´çš„æ˜ å°„å…³ç³»ï¼Ÿå¦‚ä¸‹ï¼š
    
    ```
    return {
      name:person.name,
      job:person.job.j1.name
    }
    
    ```
    
2.  æˆ‘ä»¬ä¸ºä»€ä¹ˆä¸èƒ½ä½¿ç”¨å†å¼„ä¸€ä¸ªå£°æ˜æ¥ï¼Œå°†å…¶å°è£…æˆä¸ºäº† ref å¯¹è±¡ä½¿ç”¨ï¼Ÿå¦‚ä¸‹ï¼š
    
    ```
    let name = ref(person.name)
    let job = ref(person.job.j1.name)
    
    ```
    

ç­”ï¼šè¿™å°±æ¶‰åŠåˆ°æ·±æ‹·è´å’Œæµ…æ‹·è´çš„é—®é¢˜äº†ï¼Œæˆ‘ä»¬ä½¿ç”¨ `toRef` æ˜¯æµ…æ‹·è´ï¼Œç›¸å½“äºå¼•ç”¨ï¼Œè€Œä¸Šé¢ä¸¤ç§æ–¹å¼åˆ™æ˜¯æ·±æ‹·è´ï¼Œä¸€ä¸ªæ˜¯å½±å“åˆ°å†…å­˜ä½¿ç”¨é—®é¢˜ï¼Œå¦ä¸€ä¸ªæœ€å¤§çš„é—®é¢˜å°±æ˜¯æ‹·è´æ•°æ®ä¸åŸæ•°æ®æ— å…³è”

19 Vue3 ä¸­å…¶ä»–çš„ Composition API
----------------------------

### 19.1 shallowReactive ä¸ shallowRef

*   â€‹ `shallowReactive`ï¼šåªå¤„ç†å¯¹è±¡æœ€å¤–å±‚å±æ€§çš„å“åº”å¼ï¼ˆæµ…å“åº”å¼ï¼‰
*   `shalldowRef`ï¼šåªå¤„ç†åŸºæœ¬æ•°æ®ç±»å‹çš„å“åº”å¼ï¼Œä¸è¿›è¡Œå¯¹è±¡çš„å“åº”å¼å¤„ç†
*   ä½¿ç”¨æ—¶æœº
    *   å¦‚æœæœ‰ä¸€ä¸ªå¯¹è±¡æ•°æ®ï¼Œç»“æ„æ¯”è¾ƒæ·±ï¼Œä½†å˜åŒ–æ—¶åªæ˜¯å¤–å±‚å±æ€§å‘ç”Ÿæ”¹å˜ ==> shalldowReactive
    *   å¦‚æœæœ‰ä¸€ä¸ªå¯¹è±¡æ•°æ®ï¼Œåç»­åŠŸèƒ½ä¸ä¼šä¿®æ”¹è¯¥å¯¹è±¡ä¸­çš„å±æ€§ï¼Œè€Œæ˜¯ç”Ÿæ–°çš„å¯¹è±¡æ¥æ›¿æ¢ ==> shallowRef

### 19.2 readonly å’Œ shalldowReadonly

*   readonlyï¼šè®©ä¸€ä¸ªå“åº”å¼æ•°æ®å˜æˆåªè¯»çš„ï¼ˆæ·±åªè¯»ï¼‰
*   shalldowReadonlyï¼šè®©ä¸€ä¸ªå“åº”å¼æ•°æ®å˜æˆåªè¯»çš„ï¼ˆæµ…åªè¯»ï¼‰
*   åº”ç”¨åœºæ™¯ï¼šä¸å¸Œæœ›æ•°æ®è¢«ä¿®æ”¹æ—¶

### 19.3 toRaw ä¸ markRaw

*   `toRaw`
    *   ä½œç”¨ï¼š**æŠŠè¢« reactive æˆ– readonly åçš„ Proxy å¯¹è±¡è½¬æ¢ä¸ºåŸæ¥çš„ target å¯¹è±¡**
    *   ä½¿ç”¨åœºæ™¯ï¼šç”¨äºè¯»å–å“åº”å¼å¯¹è±¡å¯¹åº”çš„æ™®é€šå¯¹è±¡ï¼Œå¯¹è¿™ä¸ªæ™®é€šå¯¹è±¡çš„æ‰€æœ‰æ“ä½œï¼Œä¸ä¼šå¼•èµ·é¡µé¢æ›´æ–°ï¼Œæå‡æ€§èƒ½
*   `markRow`
    *   ä½œç”¨ï¼š**ç›´æ¥è®© target ä¸èƒ½è¢« reactive æˆ– readonly**
    *   ä½¿ç”¨åœºæ™¯ï¼š
        1.  æœ‰äº›å€¼ä¸åº”è¢«è®¾ç½®ä¸ºå“åº”å¼çš„ï¼Œä¾‹å¦‚å¤æ‚çš„ç¬¬ä¸‰æ–¹ç±»åº“
        2.  å½“æ¸²æŸ“å…·æœ‰ä¸å¯å˜æ•°æ®çš„å¤§åˆ—è¡¨æ—¶ï¼Œè·³è¿‡å“åº”å¼å¯ä»¥æé«˜æ€§èƒ½

### 19.4 customRef

*   ä½œç”¨ï¼šåˆ›å»ºä¸€ä¸ªè‡ªå®šä¹‰çš„ refï¼Œå¹¶å¯¹å…¶ä¾èµ–é¡¹è·Ÿè¸ªå’Œæ›´æ–°è§¦å‘è¿›è¡Œæ˜¾å¼æ§åˆ¶
    
*   ç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š
    
    ```
    <template>
    	<input type="text" v-model="keyword">
    	<h3>{{keyword}}</h3>
    </template>
    
    <script>
    	import {ref,customRef} from 'vue'
    	export default {
    		name:'Demo',
    		setup(){
    			// let keyword = ref('hello') //ä½¿ç”¨Vueå‡†å¤‡å¥½çš„å†…ç½®ref
    			//è‡ªå®šä¹‰ä¸€ä¸ªmyRef
    			function myRef(value,delay){
    				let timer
    				//é€šè¿‡customRefå»å®ç°è‡ªå®šä¹‰
    				return customRef((track,trigger)=>{
    					return{
    						get(){
    							track() //å‘Šè¯‰Vueè¿™ä¸ªvalueå€¼æ˜¯éœ€è¦è¢«â€œè¿½è¸ªâ€çš„
    							return value
    						},
    						set(newValue){
    							clearTimeout(timer)
    							timer = setTimeout(()=>{
    								value = newValue
    								trigger() //å‘Šè¯‰Vueå»æ›´æ–°ç•Œé¢
    							},delay)
    						}
    					}
    				})
    			}
    			let keyword = myRef('hello',500) //ä½¿ç”¨ç¨‹åºå‘˜è‡ªå®šä¹‰çš„ref
    			return {
    				keyword
    			}
    		}
    	}
    </script>
    
    ```
    

### 19.5 provide å’Œ inject

![](https://i-blog.csdnimg.cn/blog_migrate/af04b8394fe0d76dcab457f50f9be3c2.png)

*   ä½œç”¨ï¼šå®ç°**ç¥–ä¸åä»£ç»„ä»¶é—´**é€šä¿¡
    
*   å¥—è·¯ï¼šçˆ¶ç»„ä»¶æœ‰ä¸€ä¸ª `provide` é€‰é¡¹æ¥æä¾›æ•°æ®ï¼Œåä»£ç»„ä»¶æœ‰ä¸€ä¸ª `inject` é€‰é¡¹æ¥å¼€å§‹ä½¿ç”¨è¿™äº›æ•°æ®
    
*   å…·ä½“å†™æ³•ï¼š
    
    1.  ç¥–ç»„ä»¶ä¸­ï¼š
        
        ```
        setup(){
        	......
            let car = reactive({name:'å¥”é©°',price:'40ä¸‡'})
            provide('car',car)
            ......
        }
        
        ```
        
    2.  åä»£ç»„ä»¶ä¸­ï¼š
        
        ```
        setup(props,context){
        	......
            const car = inject('car')
            return {car}
        	......
        }
        
        ```
        

ğŸ—’**å¤‡æ³¨**

> `provide` æ˜¯ç”±çˆ¶ç»„ä»¶æä¾›ï¼Œè€Œ `inject` ç”±åä»£ç»„ä»¶æ¥æ”¶ï¼Œå½“ç„¶å°±åŒ…æ‹¬äº†çˆ¶ç»„ä»¶ä¸å­ç»„ä»¶ä¹‹é—´çš„æ•°æ®ä¼ é€’ï¼Œä¸è¿‡ä¸€èˆ¬çˆ¶ç»„ä»¶ä¼ é€’æ•°æ®ç»™å­ç»„ä»¶ï¼Œæˆ‘ä»¬ä½¿ç”¨çš„æ˜¯ `props`

### 19.5 å“åº”å¼æ•°æ®çš„åˆ¤æ–­

*   isRef: æ£€æŸ¥ä¸€ä¸ªå€¼æ˜¯å¦ä¸ºä¸€ä¸ª ref å¯¹è±¡
*   isReactive: æ£€æŸ¥ä¸€ä¸ªå¯¹è±¡æ˜¯å¦æ˜¯ç”± `reactive` åˆ›å»ºçš„å“åº”å¼ä»£ç†
*   isReadonly: æ£€æŸ¥ä¸€ä¸ªå¯¹è±¡æ˜¯å¦æ˜¯ç”± `readonly` åˆ›å»ºçš„åªè¯»ä»£ç†
*   isProxy: æ£€æŸ¥ä¸€ä¸ªå¯¹è±¡æ˜¯å¦æ˜¯ç”± `reactive` æˆ–è€… `readonly` æ–¹æ³•åˆ›å»ºçš„ä»£ç†

20 Composition API çš„ä¼˜åŠ¿
----------------------

### 20.1 Options API å­˜åœ¨çš„é—®é¢˜

ä½¿ç”¨ä¼ ç»Ÿ OptionsAPI ä¸­ï¼Œæ–°å¢æˆ–è€…ä¿®æ”¹ä¸€ä¸ªéœ€æ±‚ï¼Œå°±éœ€è¦åˆ†åˆ«åœ¨ dataï¼Œmethodsï¼Œcomputed é‡Œä¿®æ”¹ ã€‚

![](https://i-blog.csdnimg.cn/blog_migrate/ccf0410a9d80ff38a3eea96b307d8c12.gif) ![](https://i-blog.csdnimg.cn/blog_migrate/5a54ada46ab9de88ca44d218a85d1aa2.gif)

### 20.2 Composition API çš„ä¼˜åŠ¿

æˆ‘ä»¬å¯ä»¥æ›´åŠ ä¼˜é›…åœ°ç»„ç»‡æˆ‘ä»¬çš„ä»£ç ã€å‡½æ•°ã€‚è®©ç›¸å…³åŠŸèƒ½çš„ä»£ç æ›´åŠ æœ‰åºçš„ç»„ç»‡åœ¨ä¸€èµ·

21 æ–°çš„ç»„ä»¶
-------

### 21.1 Fragment

*   åœ¨ Vue2 ä¸­: ç»„ä»¶å¿…é¡»æœ‰ä¸€ä¸ªæ ¹æ ‡ç­¾
*   åœ¨ Vue3 ä¸­: ç»„ä»¶å¯ä»¥æ²¡æœ‰æ ¹æ ‡ç­¾, å†…éƒ¨ä¼šå°†å¤šä¸ªæ ‡ç­¾åŒ…å«åœ¨ä¸€ä¸ª Fragment è™šæ‹Ÿå…ƒç´ ä¸­
*   å¥½å¤„: å‡å°‘æ ‡ç­¾å±‚çº§, å‡å°å†…å­˜å ç”¨

### 21.2 Teleport

`Teleport`ï¼š ä¸­æ–‡è¯‘ä¸º â€œè½¬ç§»ã€ä¼ é€â€ï¼Œæ˜¯ä¸€ç§èƒ½å¤Ÿå°†æˆ‘ä»¬çš„**ç»„ä»¶ html ç»“æ„**ç§»åŠ¨åˆ°æŒ‡å®šä½ç½®çš„æŠ€æœ¯ã€‚

ç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š

```
<teleport to="ç§»åŠ¨ä½ç½®">
	<div v-if="isShow" class="mask">
		<div class="dialog">
			<h3>æˆ‘æ˜¯ä¸€ä¸ªå¼¹çª—</h3>
			<button @click="isShow = false">å…³é—­å¼¹çª—</button>
		</div>
	</div>
</teleport>

```

> è¿™é‡Œçš„ç§»åŠ¨ä½ç½®ä¸»è¦æ˜¯é€‰æ‹©å™¨ï¼Œä¾‹å¦‚ï¼šhtmlã€bodyã€#idã€.class ç­‰ç­‰

### 21.3 Suspense

è¿™ä¸ªä»¥åè¡¥

22 Vue3 ä¸­å…¶ä»–çš„æ”¹å˜
--------------

### 22.1 å…¨å±€ API çš„è½¬ç§»

*   Vue 2.x æœ‰è®¸å¤šå…¨å±€ API å’Œé…ç½®ã€‚
    
    *   ä¾‹å¦‚ï¼šæ³¨å†Œå…¨å±€ç»„ä»¶ã€æ³¨å†Œå…¨å±€æŒ‡ä»¤ç­‰ã€‚
        
        ```
        //æ³¨å†Œå…¨å±€ç»„ä»¶
        Vue.component('MyButton', {
          data: () => ({
            count: 0
          }),
          template: '<button @click="count++">Clicked {{ count }} times.</button>'
        })
        
        //æ³¨å†Œå…¨å±€æŒ‡ä»¤
        Vue.directive('focus', {
          inserted: el => el.focus()
        }
        
        ```
        
*   Vue3.0 ä¸­å¯¹è¿™äº› API åšå‡ºäº†è°ƒæ•´ï¼š
    
    *   å°†å…¨å±€çš„ APIï¼Œå³ï¼š`Vue.xxx`è°ƒæ•´åˆ°åº”ç”¨å®ä¾‹ï¼ˆ`app`ï¼‰ä¸Š
        
        <table><thead><tr><th>2.x å…¨å±€ APIï¼ˆ<code>Vue</code>ï¼‰</th><th>3.x å®ä¾‹ API (<code>app</code>)</th></tr></thead><tbody><tr><td>Vue.config.xxxx</td><td>app.config.xxxx</td></tr><tr><td>Vue.config.productionTip</td><td><strong>ç§»é™¤</strong></td></tr><tr><td>Vue.component</td><td>app.component</td></tr><tr><td>Vue.directive</td><td>app.directive</td></tr><tr><td>Vue.mixin</td><td>app.mixin</td></tr><tr><td>Vue.use</td><td>app.use</td></tr><tr><td>Vue.prototype</td><td>app.config.globalProperties</td></tr></tbody></table>

### 22.2 å…¶ä»–æ”¹å˜

*   data é€‰é¡¹åº”å§‹ç»ˆè¢«å£°æ˜ä¸ºä¸€ä¸ªå‡½æ•°ã€‚
    
*   è¿‡åº¦ç±»åçš„æ›´æ”¹ï¼š
    
    *   Vue2.x å†™æ³•
        
        ```
        .v-enter,
        .v-leave-to {
          opacity: 0;
        }
        .v-leave,
        .v-enter-to {
          opacity: 1;
        }
        
        ```
        
    *   Vue3.x å†™æ³•
        
        ```
        .v-enter-from,
        .v-leave-to {
          opacity: 0;
        }
        
        .v-leave-from,
        .v-enter-to {
          opacity: 1;
        }
        
        ```
        
*   **ç§»é™¤** keyCode ä½œä¸º v-on çš„ä¿®é¥°ç¬¦ï¼ŒåŒæ—¶ä¹Ÿä¸å†æ”¯æŒ`config.keyCodes`
    
*   **ç§»é™¤**`v-on.native`ä¿®é¥°ç¬¦
    
    *   çˆ¶ç»„ä»¶ä¸­ç»‘å®šäº‹ä»¶
        
        ```
        <my-component
          v-on:close="handleComponentEvent"
          v-on:click="handleNativeClickEvent"
        />
        
        ```
        
    *   å­ç»„ä»¶ä¸­å£°æ˜è‡ªå®šä¹‰äº‹ä»¶
        
        ```
        <script>
          export default {
            emits: ['close']
          }
        </script>
        
        ```
        
*   **ç§»é™¤**è¿‡æ»¤å™¨ï¼ˆfilterï¼‰
    
    > è¿‡æ»¤å™¨è™½ç„¶è¿™çœ‹èµ·æ¥å¾ˆæ–¹ä¾¿ï¼Œä½†å®ƒéœ€è¦ä¸€ä¸ªè‡ªå®šä¹‰è¯­æ³•ï¼Œæ‰“ç ´å¤§æ‹¬å·å†…è¡¨è¾¾å¼æ˜¯ â€œåªæ˜¯ JavaScriptâ€ çš„å‡è®¾ï¼Œè¿™ä¸ä»…æœ‰å­¦ä¹ æˆæœ¬ï¼Œè€Œä¸”æœ‰å®ç°æˆæœ¬ï¼å»ºè®®ç”¨æ–¹æ³•è°ƒç”¨æˆ–è®¡ç®—å±æ€§å»æ›¿æ¢è¿‡æ»¤å™¨ã€‚
    
*   â€¦